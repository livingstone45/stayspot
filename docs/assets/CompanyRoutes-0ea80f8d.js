import{j as e}from"./charts-2e8e60b5.js";import{r as s}from"./vendor-fb33f09a.js";import{u as kt,L as at,b as Ct,R as At,a as G,N as Dt}from"./router-9ce3d278.js";import{X}from"./x-b20ca7aa.js";import{M as Pt,L as Tt,S as ut,B as _t,T as Mt}from"./triangle-alert-6442e412.js";import{B as ve}from"./building-2-7f70f80f.js";import{C as pt}from"./chevron-down-5fe088c8.js";import{C as Ze}from"./credit-card-b8da0c26.js";import{H as Ae}from"./house-02fb106a.js";import{c as ge}from"./createLucideIcon-e378a771.js";import{H as Lt}from"./headphones-6b64d0ae.js";import{T as Be}from"./truck-e84f43d3.js";import{M as Fe}from"./message-square-8ba7a423.js";import{S as De}from"./shield-bc169da6.js";import{S as bt}from"./share-2-4217d9f7.js";import{u as he}from"./useThemeMode-62052a17.js";import{U as Re}from"./user-6ac73d0c.js";import{L as Xe}from"./lock-3a762006.js";import{L as Rt}from"./log-out-a32c3b7e.js";import{a as ie}from"./utils-78d57de0.js";import{D as ce}from"./download-cea157b8.js";import{A as ft,a as Et}from"./arrow-up-right-5013b9e8.js";import{C as ze}from"./chart-column-9841475b.js";import{C as le}from"./circle-check-big-3b69b535.js";import{C as de}from"./circle-alert-73cb2b80.js";import{A as Me}from"./activity-fd1bbf5d.js";import{U as ye}from"./users-36cd6787.js";import{D as Ee}from"./dollar-sign-a98b8e1c.js";import{Z as we}from"./zap-3d3deaa8.js";import{P as re}from"./plus-e2e8cc52.js";import{S as oe}from"./search-873dc6ad.js";import{E as xe}from"./eye-720b44d1.js";import{S as Ye}from"./square-pen-55a9f303.js";import{C as Ue}from"./calendar-fddab733.js";import{C as se}from"./clock-f4549da8.js";import{F as je}from"./file-text-d3c92847.js";import{C as et}from"./check-735eb75a.js";import{C as $e}from"./chevron-left-21e5d8b4.js";import{C as Se}from"./chevron-right-a69dea3c.js";import{P as It}from"./printer-c02eeb17.js";import{M as jt}from"./mail-a7110ae0.js";import{F as tt}from"./funnel-2f66c31b.js";import{S as Ce}from"./save-a9ef44e5.js";import{M as pe}from"./map-pin-70182bf8.js";import{A as Ft}from"./AddPropertyModal-c1e78d17.js";import{G as Bt,L as Ut}from"./list-cc11dc6e.js";import{S as _e}from"./star-d0eae4d9.js";import{M as zt,T as Ot,a as Vt,P as Kt}from"./maps-2dc382d1.js";import{W as Wt}from"./wifi-49e50cce.js";import{W as Jt}from"./wind-002dfe73.js";import{U as lt}from"./upload-cb0c8f1d.js";import{T as Ne}from"./trash-2-55d289a1.js";import{a as ae}from"./index-dc5ea599.js";import{C as Pe}from"./circle-x-c8b2c847.js";import{T as Le}from"./trending-up-73a605bb.js";import{P as Ie}from"./phone-ec2b3553.js";import{V as yt,P as vt}from"./video-d2c4e123.js";import{E as Nt}from"./ellipsis-vertical-13b3f48a.js";import{S as wt}from"./smile-96a1a99f.js";import{S as st}from"./send-0a9c412a.js";import{M as Qe}from"./message-circle-69437da6.js";import{B as rt}from"./book-open-22fc0df9.js";import{A as qt}from"./arrow-right-24489afa.js";import{L as fe}from"./loader-e267c9d1.js";import{W as nt}from"./wrench-b0425ee9.js";import{M as Ve}from"./megaphone-860e7082.js";import{P as Oe}from"./pen-2f3092df.js";import{B as Ke}from"./bell-c5c8eba6.js";import{I as Ht}from"./info-02a362c8.js";import{C as $t}from"./copy-862f97c5.js";import{G as Gt}from"./globe-b6795d31.js";import"./droplet-accd2486.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],We=ge("arrow-up-down",Yt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],ot=ge("coffee",Qt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Xt=ge("history",Zt);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ts=ge("loader-circle",es);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],it=ge("navigation",ss);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]],dt=ge("repeat-2",as);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ct=ge("rotate-ccw",ls);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],ns=ge("toggle-left",rs);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],is=ge("toggle-right",os);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],cs=ge("tv",ds);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ms=ge("user-check",xs);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],gs=ge("utensils",hs),xt=({isOpen:t,setIsOpen:x})=>{const _=kt(),[m,P]=s.useState(null),b=[{label:"Dashboard",icon:Tt,path:"/company",badge:null},{label:"Payment Management",icon:Ze,submenu:[{label:"All Payments",path:"/company/payments"},{label:"Payment History",path:"/company/payments/history"},{label:"Invoices",path:"/company/payments/invoices"},{label:"Refunds",path:"/company/payments/refunds"},{label:"Payment Settings",path:"/company/payments/settings"},{label:"Pay Others",path:"/company/pay-others"}]},{label:"Property Management",icon:Ae,submenu:[{label:"All Properties",path:"/company/properties"},{label:"Property Verification",path:"/company/properties/verification"},{label:"BNB & Guest Houses",path:"/company/properties/bnb"},{label:"Pending Approvals",path:"/company/properties/pending",badge:"12"},{label:"Property Documents",path:"/company/properties/documents"}]},{label:"User Verification",icon:ms,submenu:[{label:"Verify Tenants",path:"/company/verification/tenants"},{label:"Verify Landlords",path:"/company/verification/landlords"},{label:"Verify Managers",path:"/company/verification/managers"},{label:"Pending Verification",path:"/company/verification/pending",badge:"8"},{label:"Verification Reports",path:"/company/verification/reports"}]},{label:"Client Support",icon:Lt,submenu:[{label:"Support Tickets",path:"/company/support/tickets",badge:"5"},{label:"Live Chat",path:"/company/support/chat"},{label:"Knowledge Base",path:"/company/support/kb"},{label:"Issue Resolution",path:"/company/support/issues"},{label:"Support Reports",path:"/company/support/reports"}]},{label:"Transportation",icon:Be,submenu:[{label:"Driver Management",path:"/company/transportation/drivers"},{label:"Bookings",path:"/company/transportation/bookings"},{label:"Routes & Tracking",path:"/company/transportation/tracking"},{label:"Vehicle Fleet",path:"/company/transportation/fleet"},{label:"Earnings Report",path:"/company/transportation/earnings"}]},{label:"System Communication",icon:Fe,submenu:[{label:"Messages",path:"/company/communication/messages"},{label:"Announcements",path:"/company/communication/announcements"},{label:"Notifications",path:"/company/communication/notifications"},{label:"Email Templates",path:"/company/communication/templates"},{label:"Communication Logs",path:"/company/communication/logs"}]},{label:"Security & Compliance",icon:De,submenu:[{label:"User Permissions",path:"/company/security/permissions"},{label:"Audit Logs",path:"/company/security/audit"},{label:"Data Protection",path:"/company/security/data"},{label:"Compliance Reports",path:"/company/security/compliance"}]},{label:"Sharing & Collaboration",icon:bt,path:"/company/sharing"},{label:"Settings",icon:ut,path:"/company/settings"}],w=y=>_.pathname===y,j=y=>y==null?void 0:y.some(c=>w(c.path));return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(!t),className:"fixed top-4 left-4 z-50 lg:hidden p-2 bg-orange-600 text-white rounded-lg",children:t?e.jsx(X,{className:"w-6 h-6"}):e.jsx(Pt,{className:"w-6 h-6"})}),e.jsxs("div",{className:`fixed left-0 top-0 h-screen w-64 bg-gradient-to-b from-slate-900 to-slate-800 text-white overflow-y-auto transition-transform duration-300 z-40 lg:translate-x-0 ${t?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("div",{className:"p-6 border-b border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-600 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"StaySpot"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Admin Panel"})]})]})}),e.jsx("nav",{className:"p-4 space-y-2",children:b.map((y,c)=>{const S=y.icon,r=y.submenu;return w(y.path)||j(y.submenu),e.jsxs("div",{children:[r?e.jsxs("button",{onClick:()=>P(m===c?null:c),className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition ${j(y.submenu)?"bg-orange-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:y.label})]}),e.jsx(pt,{className:`w-4 h-4 transition ${m===c?"rotate-180":""}`})]}):e.jsxs(at,{to:y.path,onClick:()=>x(!1),className:`flex items-center justify-between px-4 py-3 rounded-lg transition ${w(y.path)?"bg-orange-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:y.label})]}),y.badge&&e.jsx("span",{className:"text-xs bg-red-600 px-2 py-1 rounded-full",children:y.badge})]}),r&&m===c&&e.jsx("div",{className:"mt-2 ml-4 space-y-1 border-l border-slate-700 pl-4",children:y.submenu.map((F,l)=>e.jsxs(at,{to:F.path,onClick:()=>x(!1),className:`flex items-center justify-between px-4 py-2 rounded-lg text-sm transition ${w(F.path)?"bg-orange-600 text-white":"text-slate-400 hover:text-slate-200 hover:bg-slate-700"}`,children:[e.jsx("span",{children:F.label}),F.badge&&e.jsx("span",{className:"text-xs bg-red-600 px-2 py-0.5 rounded-full",children:F.badge})]},l))})]},c)})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700 bg-slate-900",children:e.jsxs("div",{className:"text-xs text-slate-400 text-center",children:[e.jsx("p",{children:"StaySpot Admin v1.0"}),e.jsx("p",{className:"mt-1",children:"Â© 2024 All Rights Reserved"})]})})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>x(!1)})]})},Y=({children:t})=>{const[x,_]=s.useState(!1),[m,P]=s.useState(!1),{isDarkMode:b}=he(),w=Ct(),j={name:"Admin User",email:"admin@stayspot.com"},y=()=>{localStorage.removeItem("token"),w("/login")},c=()=>{w("/company/settings"),P(!1)},S=()=>{w("/company/settings"),P(!1)};return e.jsxs("div",{className:`flex h-screen ${b?"bg-slate-950":"bg-slate-50"}`,children:[e.jsx("div",{className:"hidden lg:block w-64 flex-shrink-0",children:e.jsx(xt,{isOpen:x,setIsOpen:_})}),x&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-40",children:e.jsx(xt,{isOpen:x,setIsOpen:_})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:`border-b ${b?"bg-slate-900 border-slate-800":"bg-white border-slate-200"} px-6 py-4 flex items-center justify-between lg:hidden`,children:[e.jsx("h1",{className:`text-2xl font-bold ${b?"text-white":"text-slate-900"}`,children:"StaySpot Admin"}),e.jsx("button",{onClick:()=>_(!x),className:`p-2 rounded-lg ${b?"hover:bg-slate-800":"hover:bg-slate-100"}`,children:e.jsx("svg",{className:`w-6 h-6 ${b?"text-slate-400":"text-slate-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e.jsxs("div",{className:`hidden lg:flex border-b ${b?"bg-slate-900 border-slate-800":"bg-white border-slate-200"} px-6 py-4 items-center justify-between`,children:[e.jsx("h1",{className:`text-2xl font-bold ${b?"text-white":"text-slate-900"}`,children:"StaySpot Admin"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:`p-2 rounded-lg ${b?"hover:bg-slate-800":"hover:bg-slate-100"}`,children:e.jsx("svg",{className:`w-6 h-6 ${b?"text-slate-400":"text-slate-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>P(!m),className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold bg-orange-600 hover:bg-orange-700",children:j.name.charAt(0)}),m&&e.jsxs("div",{className:`absolute right-0 mt-2 w-48 rounded-lg shadow-lg z-50 ${b?"bg-slate-800 border border-slate-700":"bg-white border border-slate-200"}`,children:[e.jsxs("div",{className:`px-4 py-3 border-b ${b?"border-slate-700":"border-slate-200"}`,children:[e.jsx("p",{className:`font-semibold ${b?"text-white":"text-slate-900"}`,children:j.name}),e.jsx("p",{className:`text-sm ${b?"text-slate-400":"text-slate-600"}`,children:j.email})]}),e.jsxs("button",{onClick:S,className:`w-full text-left px-4 py-2 flex items-center gap-2 ${b?"hover:bg-slate-700 text-slate-300":"hover:bg-slate-100 text-slate-900"}`,children:[e.jsx(Re,{className:"w-4 h-4"})," Account"]}),e.jsxs("button",{onClick:c,className:`w-full text-left px-4 py-2 flex items-center gap-2 ${b?"hover:bg-slate-700 text-slate-300":"hover:bg-slate-100 text-slate-900"}`,children:[e.jsx(Xe,{className:"w-4 h-4"})," Change Password"]}),e.jsxs("button",{onClick:y,className:`w-full text-left px-4 py-2 flex items-center gap-2 border-t ${b?"border-slate-700 hover:bg-slate-700 text-red-400":"border-slate-200 hover:bg-slate-100 text-red-600"}`,children:[e.jsx(Rt,{className:"w-4 h-4"})," Logout"]})]})]})]})]}),e.jsx("div",{className:`flex-1 overflow-auto ${b?"bg-slate-950":"bg-slate-50"}`,children:t})]})]})},us=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState("month"),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState([]),c={}.VITE_API_URL||"http://localhost:5000/api",S={stats:[{label:"Total Properties",value:1240,change:"+8.5%",icon:_t,color:"blue"},{label:"Active Users",value:"45.2K",change:"+12.3%",icon:ye,color:"purple"},{label:"Platform Revenue",value:"KES 245M",change:"+18.7%",icon:Ee,color:"green"},{label:"System Health",value:"99.8%",change:"+0.2%",icon:we,color:"orange"},{label:"Moderators",value:12,change:"+2",icon:De,color:"blue"}],moderators:[{id:1,name:"James Kipchoge",email:"james@example.com",status:"active",actions:245},{id:2,name:"Mary Wanjiru",email:"mary@example.com",status:"active",actions:189},{id:3,name:"Peter Omondi",email:"peter@example.com",status:"active",actions:156}],drivers:[{id:1,name:"James Kipchoge",email:"james@example.com",status:"active",trips:245},{id:2,name:"Mary Wanjiru",email:"mary@example.com",status:"active",trips:189}],bookings:[{id:"BK001",passenger_name:"Peter Omondi",status:"completed",fare:2500},{id:"BK002",passenger_name:"Grace Muthoni",status:"in_progress",fare:1800},{id:"BK003",passenger_name:"David Kiplagat",status:"pending",fare:1200},{id:"BK004",passenger_name:"Amina Hassan",status:"completed",fare:950},{id:"BK005",passenger_name:"Samuel Kariuki",status:"accepted",fare:1500}],revenue:[{month:"Jan",percent:60},{month:"Feb",percent:65},{month:"Mar",percent:70},{month:"Apr",percent:75},{month:"May",percent:78},{month:"Jun",percent:82}],companies:[{name:"Nairobi Transport Ltd",revenue:"KES 245K"},{name:"Mombasa Logistics Co",revenue:"KES 187K"},{name:"Kisumu Rentals Ltd",revenue:"KES 156K"},{name:"Nakuru Management",revenue:"KES 134K"},{name:"Eldoret Properties",revenue:"KES 98K"}]};s.useEffect(()=>{r(),F()},[x]);const r=async()=>{var N,h;try{w(!0);const g=localStorage.getItem("token"),a=await ie.get(`${c}/management/dashboard`,{params:{period:x},headers:{Authorization:`Bearer ${g}`},timeout:5e3});(N=a.data)!=null&&N.success&&((h=a.data)!=null&&h.data)?P(a.data.data):P(S)}catch(g){console.log("Using mock data:",g.message),P(S)}finally{w(!1)}},F=async()=>{var N;try{const h=localStorage.getItem("token"),g=await ie.get(`${c}/security/user-roles?limit=5`,{headers:{Authorization:`Bearer ${h}`},timeout:5e3});(N=g.data)!=null&&N.data?y(g.data.data):y(S.moderators)}catch{y(S.moderators)}},l=m||S,v=l.stats||S.stats,n=l.revenue||S.revenue,T=l.companies||S.companies,$=j.length>0?j:S.moderators,z=l.drivers||S.drivers,U=l.bookings||S.bookings,M={blue:"from-blue-500 to-blue-600",purple:"from-purple-500 to-purple-600",green:"from-green-500 to-green-600",orange:"from-orange-500 to-orange-600"},k=N=>({active:"text-green-600",inactive:"text-red-600",completed:"text-green-600",in_progress:"text-blue-600",pending:"text-yellow-600",accepted:"text-blue-600"})[N]||"text-gray-600";return b?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Dashboard"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-slate-400":"text-slate-600"}`,children:"System-wide analytics and management"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:x,onChange:N=>_(N.target.value),className:`px-4 py-2 rounded-lg border font-semibold ${t?"border-slate-700 bg-slate-800 text-white":"border-purple-200 bg-white text-slate-900"}`,children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsx("button",{className:`p-2 rounded-lg ${t?"bg-slate-800":"bg-white"}`,children:e.jsx(ce,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:v.map((N,h)=>{const g=N.icon;return e.jsxs("div",{className:`rounded-2xl shadow-xl p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white/80 border-purple-200/50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 bg-gradient-to-br ${M[N.color]} rounded-lg shadow-lg`,children:e.jsx(g,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold text-green-600",children:[e.jsx(ft,{className:"w-4 h-4"}),N.change]})]}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:N.label}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:N.value})]},h)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:`lg:col-span-2 rounded-2xl shadow-xl p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white/80 border-purple-200/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(ze,{className:"w-5 h-5 text-orange-600"}),e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Revenue Trend"})]}),e.jsx("div",{className:"space-y-4",children:n.map((N,h)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:N.month}),e.jsxs("span",{className:`text-sm font-bold ${t?"text-white":"text-slate-900"}`,children:["KES ",(1.8+h*.15).toFixed(2),"M"]})]}),e.jsx("div",{className:`w-full h-2 rounded-full ${t?"bg-slate-700":"bg-slate-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 h-2 rounded-full",style:{width:`${N.percent}%`}})})]},h))})]}),e.jsxs("div",{className:`rounded-2xl shadow-xl p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white/80 border-purple-200/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(De,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Moderators"})]}),e.jsx("div",{className:"space-y-3",children:$.slice(0,4).map((N,h)=>e.jsx("div",{className:`p-3 rounded-lg border ${t?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold text-sm ${t?"text-white":"text-slate-900"}`,children:N.name}),e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:N.email})]}),e.jsx("div",{className:"flex items-center gap-1",children:N.status==="active"?e.jsx(le,{className:"w-4 h-4 text-green-600"}):e.jsx(de,{className:"w-4 h-4 text-red-600"})})]})},h))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:`rounded-2xl shadow-xl p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white/80 border-purple-200/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Be,{className:"w-5 h-5 text-orange-600"}),e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Active Drivers"})]}),e.jsx("div",{className:"space-y-3",children:z.map((N,h)=>e.jsx("div",{className:`p-3 rounded-lg border ${t?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold text-sm ${t?"text-white":"text-slate-900"}`,children:N.name}),e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:N.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:[N.trips," trips"]}),e.jsx("span",{className:`text-xs font-semibold ${k(N.status)}`,children:N.status})]})]})},h))})]}),e.jsxs("div",{className:`rounded-2xl shadow-xl p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white/80 border-purple-200/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Recent Bookings"})]}),e.jsx("div",{className:"space-y-3",children:U.slice(0,5).map((N,h)=>e.jsx("div",{className:`p-3 rounded-lg border ${t?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold text-sm ${t?"text-white":"text-slate-900"}`,children:N.passenger_name}),e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:N.id})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-green-600",children:["KES ",N.fare]}),e.jsx("span",{className:`text-xs font-semibold ${k(N.status)}`,children:N.status})]})]})},h))})]})]}),e.jsxs("div",{className:`rounded-2xl shadow-xl p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white/80 border-purple-200/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Top Companies"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:T.map((N,h)=>e.jsx("div",{className:`p-4 rounded-lg border ${t?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`font-semibold text-sm ${t?"text-white":"text-slate-900"}`,children:N.name}),e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:N.revenue})]})},h))})]})]})},ps=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState([]),[j,y]=s.useState(null),[c,S]=s.useState(!0),[r,F]=s.useState(!1),[l,v]=s.useState(1),[n,T]=s.useState({recipientType:"landlord",recipient:"",amount:"",method:"bank",description:"",dueDate:"",scheduleType:"once",frequency:"monthly",reference:"",notes:"",attachments:[]}),$={}.VITE_API_URL||"http://localhost:5000/api";s.useEffect(()=>{z()},[m]);const z=async()=>{var o,d;try{S(!0);const f=localStorage.getItem("token"),u=await ie.get(`${$}/payments`,{params:{status:m!=="all"?m:void 0},headers:{Authorization:`Bearer ${f}`},timeout:5e3});if((o=u.data)!=null&&o.success&&((d=u.data)!=null&&d.data)){const C=u.data.data;w(Array.isArray(C)?C:[]);const i=C.filter(E=>E.status==="completed"),p=C.filter(E=>E.status==="pending"),K=C.filter(E=>E.status==="failed"),R=i.reduce((E,L)=>E+(L.amount||0),0),J=p.reduce((E,L)=>E+(L.amount||0),0),B=K.reduce((E,L)=>E+(L.amount||0),0);y({totalRevenue:`$${(R/1e3).toFixed(1)}K`,pendingPayments:`$${(J/1e3).toFixed(1)}K`,failedPayments:`$${(B/1e3).toFixed(1)}K`,refunds:"$45K"})}}catch(f){console.log("Error fetching payments:",f.message),w([])}finally{S(!1)}},U=[{label:"Total Revenue",value:(j==null?void 0:j.totalRevenue)||"$0",change:"+18.7%",icon:"ðŸ’°"},{label:"Pending Payments",value:(j==null?void 0:j.pendingPayments)||"$0",change:"transactions",icon:"â³"},{label:"Failed Payments",value:(j==null?void 0:j.failedPayments)||"$0",change:"transactions",icon:"âŒ"},{label:"Refunds Issued",value:(j==null?void 0:j.refunds)||"$0",change:"This month",icon:"â†©ï¸"}],M=b.filter(o=>{var f,u;return!x||((f=o.id)==null?void 0:f.toLowerCase().includes(x.toLowerCase()))||((u=o.company)==null?void 0:u.toLowerCase().includes(x.toLowerCase()))}),k=o=>{const d={completed:t?"bg-green-900/20 text-green-400":"bg-green-100 text-green-800",pending:t?"bg-yellow-900/20 text-yellow-400":"bg-yellow-100 text-yellow-800",failed:t?"bg-red-900/20 text-red-400":"bg-red-100 text-red-800"};return d[o]||d.pending},N=o=>`$${(o||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,h=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),g=()=>{n.recipient&&n.amount&&n.method&&(w([{id:"TXN"+Date.now(),company:n.recipient,amount:parseFloat(n.amount),status:"pending",method:n.method,createdAt:new Date},...b]),F(!1),v(1),T({recipientType:"landlord",recipient:"",amount:"",method:"bank",description:"",dueDate:"",scheduleType:"once",frequency:"monthly",reference:"",notes:"",attachments:[]}))},a=()=>{F(!1),v(1),T({recipientType:"landlord",recipient:"",amount:"",method:"bank",description:"",dueDate:"",scheduleType:"once",frequency:"monthly",reference:"",notes:"",attachments:[]})};return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg",children:e.jsx(Ze,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Payment Management"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Track and manage all platform payments"})]})]}),e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition",children:[e.jsx(re,{className:"w-5 h-5"})," New Payment"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:U.map((o,d)=>e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsx("span",{className:"text-xs font-semibold text-green-600",children:o.change})]}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:o.label}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:o.value})]},d))}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-6 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by transaction ID or company...",value:x,onChange:o=>_(o.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]}),e.jsxs("select",{value:m,onChange:o=>P(o.target.value),className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("button",{className:`px-4 py-2 rounded-lg border flex items-center gap-2 ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-slate-50 border-slate-300 text-slate-900 hover:bg-slate-100"}`,children:[e.jsx(ce,{className:"w-5 h-5"})," Export"]})]})}),e.jsx("div",{className:`rounded-xl shadow border overflow-hidden ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsx("div",{className:"overflow-x-auto",children:c?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-2"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading payments..."})]}):M.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"No payments found"})}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${t?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Transaction ID"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Company"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Amount"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Status"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Method"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Date"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Actions"})]})}),e.jsx("tbody",{children:M.map((o,d)=>{var f,u;return e.jsxs("tr",{className:`border-b ${t?"border-slate-700 hover:bg-slate-800":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("td",{className:`px-6 py-4 text-sm font-mono ${t?"text-slate-300":"text-slate-900"}`,children:o.id}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-slate-900"}`,children:o.company||"N/A"}),e.jsx("td",{className:`px-6 py-4 text-sm font-bold ${t?"text-white":"text-slate-900"}`,children:N(o.amount)}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${k(o.status)}`,children:((f=o.status)==null?void 0:f.charAt(0).toUpperCase())+((u=o.status)==null?void 0:u.slice(1))})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-400":"text-slate-600"}`,children:o.method||"N/A"}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-400":"text-slate-600"}`,children:h(o.createdAt)}),e.jsxs("td",{className:"px-6 py-4 text-sm flex gap-2",children:[e.jsx("button",{className:`p-2 rounded hover:bg-slate-700 ${t?"text-slate-400 hover:text-white":"text-slate-600 hover:text-slate-900"}`,children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{className:`p-2 rounded hover:bg-slate-700 ${t?"text-slate-400 hover:text-white":"text-slate-600 hover:text-slate-900"}`,children:e.jsx(Ye,{className:"w-4 h-4"})})]})]},d)})})]})})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-gradient-to-b from-slate-900 to-slate-950 rounded-2xl shadow-2xl max-w-2xl w-full my-8 border border-orange-900/30",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-6 flex items-center justify-between rounded-t-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"New Payment"}),e.jsx("button",{onClick:a,className:"text-white hover:bg-white hover:bg-opacity-20 p-1 rounded-lg transition",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex gap-2 px-6 py-4 bg-slate-800/50 border-b border-orange-900/20",children:[1,2,3].map(o=>e.jsx("div",{className:`flex-1 h-2 rounded-full transition-all ${o<=l?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-slate-700"}`},o))}),e.jsxs("div",{className:"p-6 space-y-4 max-h-96 overflow-y-auto text-slate-100",children:[l===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-orange-400 mb-2 flex items-center gap-2",children:[e.jsx(Re,{size:16,className:"text-orange-500"})," Recipient Type"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["landlord","manager","vendor"].map(o=>e.jsx("button",{onClick:()=>T({...n,recipientType:o}),className:`p-3 rounded-lg border-2 transition-all text-sm font-medium ${n.recipientType===o?"border-orange-500 bg-orange-900/30 text-orange-300":"border-slate-700 bg-slate-800 text-slate-400 hover:border-orange-600/50"}`,children:o.charAt(0).toUpperCase()+o.slice(1)},o))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Recipient Name"}),e.jsx("input",{type:"text",placeholder:"Enter recipient name",value:n.recipient,onChange:o=>T({...n,recipient:o.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-orange-400 mb-2 flex items-center gap-2",children:[e.jsx(Ee,{size:16,className:"text-orange-500"})," Amount (KES)"]}),e.jsx("input",{type:"number",placeholder:"Enter amount",value:n.amount,onChange:o=>T({...n,amount:o.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Reference Number"}),e.jsx("input",{type:"text",placeholder:"e.g., INV-2024-001",value:n.reference,onChange:o=>T({...n,reference:o.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),l===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Payment Method"}),e.jsxs("select",{value:n.method,onChange:o=>T({...n,method:o.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"card",children:"Credit Card"}),e.jsx("option",{value:"mpesa",children:"M-Pesa"}),e.jsx("option",{value:"check",children:"Check"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-orange-400 mb-2 flex items-center gap-2",children:[e.jsx(Ue,{size:16,className:"text-orange-500"})," Due Date"]}),e.jsx("input",{type:"date",value:n.dueDate,onChange:o=>T({...n,dueDate:o.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-orange-400 mb-2 flex items-center gap-2",children:[e.jsx(se,{size:16,className:"text-orange-500"})," Schedule Type"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["once","recurring"].map(o=>e.jsx("button",{onClick:()=>T({...n,scheduleType:o}),className:`p-2 rounded-lg border-2 transition-all text-sm font-medium ${n.scheduleType===o?"border-orange-500 bg-orange-900/30 text-orange-300":"border-slate-700 bg-slate-800 text-slate-400 hover:border-orange-600/50"}`,children:o.charAt(0).toUpperCase()+o.slice(1)},o))})]}),n.scheduleType==="recurring"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Frequency"}),e.jsxs("select",{value:n.frequency,onChange:o=>T({...n,frequency:o.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"annually",children:"Annually"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Description"}),e.jsx("textarea",{placeholder:"Enter payment description",value:n.description,onChange:o=>T({...n,description:o.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none",rows:"2"})]})]}),l===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-900/20 border border-orange-600/30 rounded-lg p-4 space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-400",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Recipient:"}),e.jsx("span",{className:"text-slate-100 font-medium",children:n.recipient})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Type:"}),e.jsx("span",{className:"text-slate-100 font-medium",children:n.recipientType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Amount:"}),e.jsxs("span",{className:"text-orange-400 font-bold",children:["KES ",parseFloat(n.amount||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Method:"}),e.jsx("span",{className:"text-slate-100 font-medium",children:n.method})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Due Date:"}),e.jsx("span",{className:"text-slate-100 font-medium",children:n.dueDate||"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Schedule:"}),e.jsx("span",{className:"text-slate-100 font-medium",children:n.scheduleType==="recurring"?`${n.frequency}`:"One-time"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-orange-400 mb-2 flex items-center gap-2",children:[e.jsx(je,{size:16,className:"text-orange-500"})," Additional Notes"]}),e.jsx("textarea",{placeholder:"Add any additional notes...",value:n.notes,onChange:o=>T({...n,notes:o.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none",rows:"3"})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 px-6 py-4 flex gap-3 border-t border-orange-900/20 rounded-b-2xl",children:[e.jsx("button",{onClick:()=>l>1?v(l-1):a(),className:"flex-1 px-4 py-2 border-2 border-slate-700 text-slate-300 font-semibold rounded-lg hover:bg-slate-700 transition-colors",children:l===1?"Cancel":"Back"}),e.jsx("button",{onClick:()=>l<3?v(l+1):g(),className:"flex-1 px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold rounded-lg hover:from-orange-700 hover:to-orange-800 transition-all flex items-center justify-center gap-2",children:l===3?e.jsxs(e.Fragment,{children:[e.jsx(et,{size:18})," Create Payment"]}):"Next"})]})]})})]})},bs=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState("all"),[j,y]=s.useState([]),[c,S]=s.useState(!0),[r,F]=s.useState(1),[l,v]=s.useState(1),[n,T]=s.useState(null),$={}.VITE_API_URL||"http://localhost:5000/api",z=15;s.useEffect(()=>{U()},[m,r,b]);const U=async()=>{var a;try{S(!0);const o=localStorage.getItem("token"),d={page:r,limit:z,status:m!=="all"?m:void 0};if(b!=="all"){const u=new Date;let C=new Date;b==="week"?C.setDate(u.getDate()-7):b==="month"?C.setMonth(u.getMonth()-1):b==="quarter"?C.setMonth(u.getMonth()-3):b==="year"&&C.setFullYear(u.getFullYear()-1),d.fromDate=C.toISOString(),d.toDate=u.toISOString()}const f=await ie.get(`${$}/payments`,{params:d,headers:{Authorization:`Bearer ${o}`},timeout:5e3});if((a=f.data)!=null&&a.success){y(f.data.data||[]),f.data.pagination&&v(f.data.pagination.pages);const u=f.data.data.filter(p=>p.status==="completed"),C=u.reduce((p,K)=>p+(K.paidAmount||K.amount||0),0),i=u.length>0?C/u.length:0;T({totalTransactions:f.data.data.length,totalAmount:C,avgAmount:i,completedCount:u.length})}}catch(o){console.log("Error fetching payments:",o.message),y([])}finally{S(!1)}},M=j.filter(a=>{var o,d,f;return!x||((o=a.id)==null?void 0:o.toLowerCase().includes(x.toLowerCase()))||((d=a.paymentNumber)==null?void 0:d.toLowerCase().includes(x.toLowerCase()))||((f=a.company)==null?void 0:f.toLowerCase().includes(x.toLowerCase()))}),k=a=>{const o={completed:t?"bg-green-900/20 text-green-400":"bg-green-100 text-green-800",pending:t?"bg-yellow-900/20 text-yellow-400":"bg-yellow-100 text-yellow-800",failed:t?"bg-red-900/20 text-red-400":"bg-red-100 text-red-800",overdue:t?"bg-orange-900/20 text-orange-400":"bg-orange-100 text-orange-800",partially_paid:t?"bg-blue-900/20 text-blue-400":"bg-blue-100 text-blue-800",cancelled:t?"bg-slate-900/20 text-slate-400":"bg-slate-100 text-slate-800"};return o[a]||o.pending},N=a=>a==="completed"?e.jsx(Et,{className:"w-4 h-4"}):a==="pending"?e.jsx(ft,{className:"w-4 h-4"}):null,h=a=>`$${(a||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,g=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:e.jsx(Xt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Payment History"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"View all payment transactions"})]})]}),e.jsxs("button",{className:`px-4 py-2 rounded-lg border flex items-center gap-2 ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"}`,children:[e.jsx(ce,{className:"w-5 h-5"})," Export"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Total Transactions"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:n.totalTransactions})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Total Amount"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:h(n.totalAmount)})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Average Amount"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:h(n.avgAmount)})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-green-600",children:n.completedCount})]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-6 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by ID or company...",value:x,onChange:a=>_(a.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]}),e.jsxs("select",{value:m,onChange:a=>{P(a.target.value),F(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"partially_paid",children:"Partially Paid"})]}),e.jsxs("select",{value:b,onChange:a=>{w(a.target.value),F(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"week",children:"Last 7 Days"}),e.jsx("option",{value:"month",children:"Last Month"}),e.jsx("option",{value:"quarter",children:"Last Quarter"}),e.jsx("option",{value:"year",children:"Last Year"})]})]})}),e.jsx("div",{className:`rounded-xl shadow border overflow-hidden ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsx("div",{className:"overflow-x-auto",children:c?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading transactions..."})]}):M.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"No transactions found"})}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${t?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Date"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Transaction ID"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Company"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Amount"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Type"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Status"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Method"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Action"})]})}),e.jsx("tbody",{children:M.map((a,o)=>{var d,f,u,C;return e.jsxs("tr",{className:`border-b ${t?"border-slate-700 hover:bg-slate-800":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-slate-900"}`,children:g(a.paidDate||a.dueDate||a.createdAt)}),e.jsx("td",{className:`px-6 py-4 text-sm font-mono ${t?"text-slate-300":"text-slate-900"}`,children:a.paymentNumber||((d=a.id)==null?void 0:d.slice(0,8))}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-slate-900"}`,children:a.company||((f=a.Property)==null?void 0:f.name)||"N/A"}),e.jsx("td",{className:`px-6 py-4 text-sm font-bold ${t?"text-white":"text-slate-900"}`,children:h(a.paidAmount||a.amount)}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-400":"text-slate-600"}`,children:a.type||"rent"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1 w-fit ${k(a.status)}`,children:[N(a.status),((u=a.status)==null?void 0:u.charAt(0).toUpperCase())+((C=a.status)==null?void 0:C.slice(1))]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-400":"text-slate-600"}`,children:a.paymentMethod||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("button",{className:`p-2 rounded hover:bg-slate-700 ${t?"text-slate-400 hover:text-white":"text-slate-600 hover:text-slate-900"}`,children:e.jsx(xe,{className:"w-4 h-4"})})})]},o)})})]})})}),l>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:["Page ",r," of ",l]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(Math.max(1,r-1)),disabled:r===1,className:`p-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-white border-slate-300 text-slate-900"} disabled:opacity-50`,children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>F(Math.min(l,r+1)),disabled:r===l,className:`p-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-white border-slate-300 text-slate-900"} disabled:opacity-50`,children:e.jsx(Se,{className:"w-5 h-5"})})]})]})]})]})},fs=({isDarkMode:t,showModal:x,onClose:_,onSubmit:m,generating:P,message:b,formData:w,setFormData:j,tenants:y,leases:c})=>x?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden ${t?"bg-slate-900 border border-slate-700":"bg-white"}`,children:[e.jsxs("div",{className:`p-8 border-b bg-gradient-to-r from-purple-600/10 to-purple-700/10 flex items-center justify-between ${t?"border-slate-700":"border-slate-200"}`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Generate Invoice"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-slate-400":"text-slate-600"}`,children:"Create a new invoice for your tenant"})]}),e.jsx("button",{onClick:_,className:`p-2 rounded-lg transition ${t?"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-900"}`,children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:m,className:"p-8",children:[b&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center gap-3 border ${b.type==="success"?t?"bg-green-900/20 border-green-700 text-green-400":"bg-green-50 border-green-300 text-green-800":t?"bg-red-900/20 border-red-700 text-red-400":"bg-red-50 border-red-300 text-red-800"}`,children:[b.type==="success"?e.jsx(le,{className:"w-5 h-5 flex-shrink-0"}):e.jsx(de,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium",children:b.text})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-3 ${t?"text-slate-200":"text-slate-900"}`,children:"Select Tenant"}),e.jsxs("select",{value:w.tenantId,onChange:S=>j({...w,tenantId:S.target.value}),required:!0,className:`w-full px-4 py-3 rounded-lg border-2 transition focus:outline-none focus:border-purple-500 ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500 focus:bg-slate-800":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400 focus:bg-white"}`,children:[e.jsx("option",{value:"",children:"Choose a tenant..."}),y.map(S=>e.jsxs("option",{value:S.id,children:[S.firstName," ",S.lastName]},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-3 ${t?"text-slate-200":"text-slate-900"}`,children:"Select Lease"}),e.jsxs("select",{value:w.leaseId,onChange:S=>j({...w,leaseId:S.target.value}),required:!0,className:`w-full px-4 py-3 rounded-lg border-2 transition focus:outline-none focus:border-purple-500 ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500 focus:bg-slate-800":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400 focus:bg-white"}`,children:[e.jsx("option",{value:"",children:"Choose a lease..."}),c.map(S=>{var r;return e.jsxs("option",{value:S.id,children:[S.leaseNumber," - ",(r=S.Property)==null?void 0:r.name]},S.id)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-3 ${t?"text-slate-200":"text-slate-900"}`,children:"Invoice Amount"}),e.jsxs("div",{className:`flex items-center rounded-lg border-2 transition focus-within:border-purple-500 ${t?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-300"}`,children:[e.jsx("span",{className:`px-4 py-3 font-semibold ${t?"text-slate-400":"text-slate-600"}`,children:"$"}),e.jsx("input",{type:"number",step:"0.01",value:w.amount,onChange:S=>j({...w,amount:S.target.value}),required:!0,placeholder:"0.00",className:`flex-1 px-0 py-3 bg-transparent outline-none ${t?"text-white placeholder-slate-500":"text-slate-900 placeholder-slate-400"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-3 ${t?"text-slate-200":"text-slate-900"}`,children:"Due Date"}),e.jsx("input",{type:"date",value:w.dueDate,onChange:S=>j({...w,dueDate:S.target.value}),required:!0,className:`w-full px-4 py-3 rounded-lg border-2 transition focus:outline-none focus:border-purple-500 ${t?"bg-slate-800 border-slate-700 text-white focus:bg-slate-800":"bg-slate-50 border-slate-300 text-slate-900 focus:bg-white"}`})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:`block text-sm font-semibold mb-3 ${t?"text-slate-200":"text-slate-900"}`,children:"Description"}),e.jsx("textarea",{value:w.description,onChange:S=>j({...w,description:S.target.value}),placeholder:"e.g., Monthly rent for January 2024",rows:"3",className:`w-full px-4 py-3 rounded-lg border-2 transition focus:outline-none focus:border-purple-500 resize-none ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500 focus:bg-slate-800":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400 focus:bg-white"}`})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",style:{borderColor:t?"#334155":"#e2e8f0"},children:[e.jsx("button",{type:"button",onClick:_,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition ${t?"bg-slate-800 text-white hover:bg-slate-700":"bg-slate-100 text-slate-900 hover:bg-slate-200"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:P,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:P?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):"Generate Invoice"})]})]})]})}):null,js=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState([]),[j,y]=s.useState(!0),[c,S]=s.useState(1),[r,F]=s.useState(1),[l,v]=s.useState(null),[n,T]=s.useState(!1),[$,z]=s.useState(!1),[U,M]=s.useState(null),[k,N]=s.useState({tenantId:"",leaseId:"",amount:"",dueDate:"",description:""}),[h,g]=s.useState([]),[a,o]=s.useState([]),d={}.VITE_API_URL||"http://localhost:5000/api",f=12;s.useEffect(()=>{u()},[m,c]),s.useEffect(()=>{n&&C()},[n]);const u=async()=>{var B;try{y(!0);const E=localStorage.getItem("token"),L={page:c,limit:f,type:"invoice",status:m!=="all"?m:void 0},D=await ie.get(`${d}/payments`,{params:L,headers:{Authorization:`Bearer ${E}`},timeout:5e3});if((B=D.data)!=null&&B.success){const V=D.data.data||[];w(V),D.data.pagination&&F(D.data.pagination.pages);const A=V.filter(I=>I.status==="completed"),W=V.filter(I=>I.status==="pending"),q=V.filter(I=>I.status==="overdue"),O=V.reduce((I,Q)=>I+(Q.amount||0),0),ne=A.reduce((I,Q)=>I+(Q.paidAmount||Q.amount||0),0),Z=W.reduce((I,Q)=>I+(Q.amount||0),0);v({totalInvoices:V.length,totalAmount:O,paidAmount:ne,pendingAmount:Z,overdueCount:q.length})}}catch(E){console.log("Error fetching invoices:",E.message),w([])}finally{y(!1)}},C=async()=>{var B,E;try{const L=localStorage.getItem("token"),D=await ie.get(`${d}/tenants`,{params:{limit:100},headers:{Authorization:`Bearer ${L}`},timeout:5e3});if((B=D.data)!=null&&B.success){const V=D.data.data||[];o(V);const A=[];for(const W of V)try{const q=await ie.get(`${d}/tenants/${W.id}/leases`,{headers:{Authorization:`Bearer ${L}`},timeout:5e3});(E=q.data)!=null&&E.success&&A.push(...q.data.data||[])}catch(q){console.log(`Error fetching leases for tenant ${W.id}:`,q.message)}g(A)}}catch(L){console.log("Error fetching tenants:",L.message)}},i=async B=>{var E,L,D;B.preventDefault();try{z(!0);const V=localStorage.getItem("token");(E=(await ie.post(`${d}/payments`,{...k,amount:parseFloat(k.amount),type:"invoice"},{headers:{Authorization:`Bearer ${V}`},timeout:5e3})).data)!=null&&E.success&&(M({type:"success",text:"Invoice generated successfully"}),N({tenantId:"",leaseId:"",amount:"",dueDate:"",description:""}),setTimeout(()=>{T(!1),M(null),u()},2e3))}catch(V){M({type:"error",text:((D=(L=V.response)==null?void 0:L.data)==null?void 0:D.message)||"Failed to generate invoice"})}finally{z(!1)}},p=b.filter(B=>{var E,L,D,V;return!x||((E=B.paymentNumber)==null?void 0:E.toLowerCase().includes(x.toLowerCase()))||((L=B.company)==null?void 0:L.toLowerCase().includes(x.toLowerCase()))||((V=(D=B.Tenant)==null?void 0:D.firstName)==null?void 0:V.toLowerCase().includes(x.toLowerCase()))}),K=B=>{const E={completed:t?"bg-green-900/20 text-green-400":"bg-green-100 text-green-800",pending:t?"bg-yellow-900/20 text-yellow-400":"bg-yellow-100 text-yellow-800",overdue:t?"bg-red-900/20 text-red-400":"bg-red-100 text-red-800",draft:t?"bg-slate-900/20 text-slate-400":"bg-slate-100 text-slate-800"};return E[B]||E.pending},R=B=>`$${(B||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,J=B=>new Date(B).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:e.jsx(je,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Invoices"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Manage and track all invoices"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:`px-4 py-2 rounded-lg border flex items-center gap-2 ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"}`,children:[e.jsx(ce,{className:"w-5 h-5"})," Export"]}),e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition flex items-center gap-2 font-semibold",children:[e.jsx(re,{className:"w-5 h-5"})," Generate Invoice"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Invoices"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:l.totalInvoices})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Amount"}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:R(l.totalAmount)})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-green-600",children:"Paid"}),e.jsx("p",{className:"text-2xl font-bold mt-2 text-green-600",children:R(l.paidAmount)})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-orange-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold mt-2 text-orange-600",children:R(l.pendingAmount)})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-red-600",children:"Overdue"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-red-600",children:l.overdueCount})]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-8 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by invoice number or company...",value:x,onChange:B=>_(B.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("select",{value:m,onChange:B=>{P(B.target.value),S(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"draft",children:"Draft"})]})]})}),e.jsx("div",{children:j?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-3"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading invoices..."})]}):p.length===0?e.jsxs("div",{className:`p-12 text-center rounded-xl border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx(je,{className:`w-12 h-12 mx-auto mb-3 ${t?"text-slate-600":"text-slate-400"}`}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No invoices found"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-slate-400":"text-slate-600"}`,children:"Create your first invoice to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map((B,E)=>{var L,D,V,A,W,q;return e.jsxs("div",{className:`rounded-xl shadow border overflow-hidden transition ${t?"bg-slate-900/50 border-slate-700 hover:border-purple-600/50 hover:shadow-lg":"bg-white border-slate-200 hover:border-purple-300 hover:shadow-lg"}`,children:[e.jsxs("div",{className:`p-6 border-b ${t?"border-slate-700 bg-slate-800/50":"border-slate-200 bg-slate-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-xs font-mono font-semibold ${t?"text-purple-400":"text-purple-600"}`,children:B.paymentNumber||`INV-${(L=B.id)==null?void 0:L.slice(0,8)}`}),e.jsx("p",{className:`text-base font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:B.company||((D=B.Property)==null?void 0:D.name)||"N/A"})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ml-2 ${K(B.status)}`,children:((V=B.status)==null?void 0:V.charAt(0).toUpperCase())+((A=B.status)==null?void 0:A.slice(1))})]}),e.jsxs("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:[(W=B.Tenant)==null?void 0:W.firstName," ",(q=B.Tenant)==null?void 0:q.lastName]})]}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:"Amount"}),e.jsx("span",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:R(B.amount)})]}),B.paidAmount>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:"Paid"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:R(B.paidAmount)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:"Due Date"}),e.jsx("span",{className:`text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:J(B.dueDate||B.createdAt)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:"Type"}),e.jsx("span",{className:`text-sm font-semibold capitalize ${t?"text-slate-300":"text-slate-700"}`,children:B.type||"invoice"})]})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700 bg-slate-800/30":"border-slate-200 bg-slate-50"} flex gap-2`,children:[e.jsxs("button",{className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-slate-200 text-slate-900 hover:bg-slate-300"}`,children:[e.jsx(xe,{className:"w-4 h-4"})," View"]}),e.jsxs("button",{className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-slate-200 text-slate-900 hover:bg-slate-300"}`,children:[e.jsx(It,{className:"w-4 h-4"})," Print"]}),e.jsxs("button",{className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-slate-200 text-slate-900 hover:bg-slate-300"}`,children:[e.jsx(jt,{className:"w-4 h-4"})," Send"]})]})]},E)})})}),r>1&&e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:["Page ",c," of ",r]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(Math.max(1,c-1)),disabled:c===1,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(Math.min(r,c+1)),disabled:c===r,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx(Se,{className:"w-5 h-5"})})]})]})]}),e.jsx(fs,{isDarkMode:t,showModal:n,onClose:()=>{T(!1),M(null)},onSubmit:i,generating:$,message:U,formData:k,setFormData:N,tenants:a,leases:h})]})},ys=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState([]),[j,y]=s.useState(!0),[c,S]=s.useState(1),[r,F]=s.useState(1),[l,v]=s.useState(null),n={}.VITE_API_URL||"http://localhost:5000/api",T=10;s.useEffect(()=>{$()},[m,c]);const $=async()=>{var h;try{y(!0);const g=localStorage.getItem("token"),a={page:c,limit:T,type:"refund",status:m!=="all"?m:void 0},o=await ie.get(`${n}/payments`,{params:a,headers:{Authorization:`Bearer ${g}`},timeout:5e3});if((h=o.data)!=null&&h.success){const d=o.data.data||[];w(d),o.data.pagination&&F(o.data.pagination.pages);const f=d.filter(R=>R.status==="completed"),u=d.filter(R=>R.status==="pending"),C=d.filter(R=>R.status==="failed"),i=d.reduce((R,J)=>R+(J.amount||0),0),p=f.reduce((R,J)=>R+(J.amount||0),0),K=u.reduce((R,J)=>R+(J.amount||0),0);v({totalRefunds:d.length,totalAmount:i,completedAmount:p,pendingAmount:K,failedCount:C.length})}}catch(g){console.log("Error fetching refunds:",g.message),w([])}finally{y(!1)}},z=b.filter(h=>{var g,a,o,d,f;return!x||((g=h.paymentNumber)==null?void 0:g.toLowerCase().includes(x.toLowerCase()))||((o=(a=h.Tenant)==null?void 0:a.firstName)==null?void 0:o.toLowerCase().includes(x.toLowerCase()))||((f=(d=h.Tenant)==null?void 0:d.lastName)==null?void 0:f.toLowerCase().includes(x.toLowerCase()))}),U=h=>{switch(h){case"completed":return e.jsx(le,{className:"w-5 h-5 text-green-500"});case"pending":return e.jsx(se,{className:"w-5 h-5 text-yellow-500"});case"failed":return e.jsx(de,{className:"w-5 h-5 text-red-500"});default:return e.jsx(se,{className:"w-5 h-5 text-slate-500"})}},M=h=>{const g={completed:t?"bg-green-900/20 text-green-400":"bg-green-100 text-green-800",pending:t?"bg-yellow-900/20 text-yellow-400":"bg-yellow-100 text-yellow-800",failed:t?"bg-red-900/20 text-red-400":"bg-red-100 text-red-800"};return g[h]||g.pending},k=h=>`$${(h||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,N=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg",children:e.jsx(ct,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Refunds"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Track and manage all refund transactions"})]})]}),e.jsxs("button",{className:`px-4 py-2 rounded-lg border flex items-center gap-2 ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"}`,children:[e.jsx(ce,{className:"w-5 h-5"})," Export"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Refunds"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:l.totalRefunds})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Amount"}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:k(l.totalAmount)})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-green-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold mt-2 text-green-600",children:k(l.completedAmount)})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-yellow-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold mt-2 text-yellow-600",children:k(l.pendingAmount)})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-red-600",children:"Failed"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-red-600",children:l.failedCount})]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-8 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by refund ID or customer...",value:x,onChange:h=>_(h.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("select",{value:m,onChange:h=>{P(h.target.value),S(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("button",{className:`px-4 py-2 rounded-lg border flex items-center justify-center gap-2 ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-slate-50 border-slate-300 text-slate-900 hover:bg-slate-100"}`,children:[e.jsx(tt,{className:"w-5 h-5"})," More Filters"]})]})}),e.jsx("div",{className:`rounded-xl shadow border overflow-hidden ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsx("div",{className:"overflow-x-auto",children:j?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-3"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading refunds..."})]}):z.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ct,{className:`w-12 h-12 mx-auto mb-3 ${t?"text-slate-600":"text-slate-400"}`}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No refunds found"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${t?"bg-slate-800 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Date"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Refund ID"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Customer"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Amount"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Reason"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Status"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:"Action"})]})}),e.jsx("tbody",{children:z.map((h,g)=>{var a,o,d,f,u;return e.jsxs("tr",{className:`border-b ${t?"border-slate-700 hover:bg-slate-800/50":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-slate-900"}`,children:N(h.createdAt)}),e.jsx("td",{className:`px-6 py-4 text-sm font-mono font-semibold ${t?"text-orange-400":"text-orange-600"}`,children:h.paymentNumber||`REF-${(a=h.id)==null?void 0:a.slice(0,8)}`}),e.jsxs("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-slate-900"}`,children:[(o=h.Tenant)==null?void 0:o.firstName," ",(d=h.Tenant)==null?void 0:d.lastName]}),e.jsx("td",{className:`px-6 py-4 text-sm font-bold ${t?"text-white":"text-slate-900"}`,children:k(h.amount)}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-400":"text-slate-600"}`,children:h.description||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[U(h.status),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${M(h.status)}`,children:((f=h.status)==null?void 0:f.charAt(0).toUpperCase())+((u=h.status)==null?void 0:u.slice(1))})]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("button",{className:`p-2 rounded-lg transition ${t?"text-slate-400 hover:bg-slate-700 hover:text-white":"text-slate-600 hover:bg-slate-100 hover:text-slate-900"}`,children:e.jsx(xe,{className:"w-4 h-4"})})})]},g)})})]})})}),r>1&&e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:["Page ",c," of ",r]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(Math.max(1,c-1)),disabled:c===1,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(Math.min(r,c+1)),disabled:c===r,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx(Se,{className:"w-5 h-5"})})]})]})]})]})},vs=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(!1),[m,P]=s.useState(!1),[b,w]=s.useState(null),[j,y]=s.useState({paymentMethods:["bank_transfer","credit_card","mpesa"],autoPaymentEnabled:!0,paymentDueDay:15,lateFeePercentage:5,lateFeeType:"percentage",gracePeriodDays:3,notificationDays:7,refundPolicy:"full",refundProcessingDays:5,bankDetails:{accountHolder:"StaySpot Inc",accountNumber:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",routingNumber:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",bankName:"First National Bank"},paypalEmail:"payments@stayspot.com",stripeConnected:!0,mpesaTillNumber:"123456",mpesaPaybill:"654321",mpesaAccountNumber:"STAYSPOT",mpesaPhoneNumber:"+254712345678"});s.useEffect(()=>{_(!1)},[]);const c=l=>{const{name:v,value:n,type:T,checked:$}=l.target;y(z=>({...z,[v]:T==="checkbox"?$:n}))},S=l=>{const{name:v,value:n}=l.target;y(T=>({...T,bankDetails:{...T.bankDetails,[v]:n}}))},r=l=>{y(v=>({...v,paymentMethods:v.paymentMethods.includes(l)?v.paymentMethods.filter(n=>n!==l):[...v.paymentMethods,l]}))},F=async()=>{try{P(!0),w({type:"success",text:"Settings saved successfully"}),setTimeout(()=>w(null),3e3)}catch(l){console.log("Error saving settings:",l.message),w({type:"error",text:"Failed to save settings"})}finally{P(!1)}};return x?e.jsx("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})})}):e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg",children:e.jsx(ut,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Payment Settings"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Configure payment methods and policies"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[b&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center gap-3 ${b.type==="success"?t?"bg-green-900/20 border border-green-700 text-green-400":"bg-green-100 border border-green-300 text-green-800":t?"bg-red-900/20 border border-red-700 text-red-400":"bg-red-100 border border-red-300 text-red-800"}`,children:[b.type==="success"?e.jsx(le,{className:"w-5 h-5"}):e.jsx(de,{className:"w-5 h-5"}),b.text]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Ze,{className:"w-5 h-5 text-blue-500"}),e.jsx("h2",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:"Payment Methods"})]}),e.jsx("div",{className:"space-y-3",children:["bank_transfer","credit_card","paypal","stripe","mpesa"].map(l=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.paymentMethods.includes(l),onChange:()=>r(l),className:"w-4 h-4 rounded"}),e.jsx("span",{className:t?"text-slate-300":"text-slate-700",children:l==="mpesa"?"M-Pesa":l==="bank_transfer"?"Bank Transfer":l==="credit_card"?"Credit Card":l.toUpperCase()})]},l))})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-purple-500"}),e.jsx("h2",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:"Auto Payment"})]}),e.jsx("label",{className:"flex items-center gap-2 cursor-pointer",children:e.jsx("input",{type:"checkbox",name:"autoPaymentEnabled",checked:j.autoPaymentEnabled,onChange:c,className:"w-4 h-4 rounded"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Payment Due Day"}),e.jsx("input",{type:"number",name:"paymentDueDay",value:j.paymentDueDay,onChange:c,min:"1",max:"31",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]})})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(de,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:"Late Fees"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Late Fee Type"}),e.jsxs("select",{name:"lateFeeType",value:j.lateFeeType,onChange:c,className:`w-full px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:["Late Fee ",j.lateFeeType==="percentage"?"(%)":"($)"]}),e.jsx("input",{type:"number",name:"lateFeePercentage",value:j.lateFeePercentage,onChange:c,min:"0",step:"0.1",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Grace Period (Days)"}),e.jsx("input",{type:"number",name:"gracePeriodDays",value:j.gracePeriodDays,onChange:c,min:"0",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]})]})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(De,{className:"w-5 h-5 text-green-500"}),e.jsx("h2",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:"Notifications"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Send Reminder (Days Before Due)"}),e.jsx("input",{type:"number",name:"notificationDays",value:j.notificationDays,onChange:c,min:"1",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Ee,{className:"w-5 h-5 text-yellow-500"}),e.jsx("h2",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:"Refund Policy"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Refund Type"}),e.jsxs("select",{name:"refundPolicy",value:j.refundPolicy,onChange:c,className:`w-full px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"full",children:"Full Refund"}),e.jsx("option",{value:"partial",children:"Partial Refund"}),e.jsx("option",{value:"store_credit",children:"Store Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Processing Days"}),e.jsx("input",{type:"number",name:"refundProcessingDays",value:j.refundProcessingDays,onChange:c,min:"1",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Xe,{className:"w-5 h-5 text-indigo-500"}),e.jsx("h2",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:"Bank Account"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-slate-300":"text-slate-700"}`,children:"Bank Name"}),e.jsx("input",{type:"text",name:"bankName",value:j.bankDetails.bankName,onChange:S,placeholder:"Enter bank name",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-slate-300":"text-slate-700"}`,children:"Account Holder"}),e.jsx("input",{type:"text",name:"accountHolder",value:j.bankDetails.accountHolder,onChange:S,placeholder:"Full name",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-slate-300":"text-slate-700"}`,children:"Account Number"}),e.jsx("input",{type:"password",name:"accountNumber",value:j.bankDetails.accountNumber,onChange:S,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-slate-300":"text-slate-700"}`,children:"Routing Number"}),e.jsx("input",{type:"password",name:"routingNumber",value:j.bankDetails.routingNumber,onChange:S,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]})]})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("h3",{className:`text-lg font-bold mb-4 ${t?"text-white":"text-slate-900"}`,children:"PayPal"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"PayPal Email"}),e.jsx("input",{type:"email",name:"paypalEmail",value:j.paypalEmail,onChange:c,placeholder:"your@email.com",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:"Stripe"}),e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${j.stripeConnected?"bg-green-900/20 text-green-400":"bg-slate-700 text-slate-400"}`,children:j.stripeConnected?"Connected":"Not Connected"})]}),e.jsxs("button",{className:"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm font-medium",children:[j.stripeConnected?"Manage":"Connect"," Stripe"]})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("h3",{className:`text-lg font-bold mb-4 ${t?"text-white":"text-slate-900"}`,children:"M-Pesa ðŸ“±"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-slate-300":"text-slate-700"}`,children:"Till Number"}),e.jsx("input",{type:"text",value:j.mpesaTillNumber,onChange:l=>y(v=>({...v,mpesaTillNumber:l.target.value})),placeholder:"e.g. 123456",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-slate-300":"text-slate-700"}`,children:"Paybill Number"}),e.jsx("input",{type:"text",value:j.mpesaPaybill,onChange:l=>y(v=>({...v,mpesaPaybill:l.target.value})),placeholder:"e.g. 654321",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-slate-300":"text-slate-700"}`,children:"Account Number"}),e.jsx("input",{type:"text",value:j.mpesaAccountNumber,onChange:l=>y(v=>({...v,mpesaAccountNumber:l.target.value})),placeholder:"e.g. STAYSPOT",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${t?"text-slate-300":"text-slate-700"}`,children:"Phone Number"}),e.jsx("input",{type:"tel",value:j.mpesaPhoneNumber,onChange:l=>y(v=>({...v,mpesaPhoneNumber:l.target.value})),placeholder:"e.g. +254712345678",className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`})]})]})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsxs("button",{onClick:F,disabled:m,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition disabled:opacity-50",children:[e.jsx(Ce,{className:"w-5 h-5"}),m?"Saving...":"Save Settings"]})})]})]})},Ns=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState([]),[j,y]=s.useState(!0),[c,S]=s.useState(1),[r,F]=s.useState(1),[l,v]=s.useState(null),[n,T]=s.useState(null),[$,z]=s.useState(!1),[U,M]=s.useState(!1),k={}.VITE_API_URL||"http://localhost:5000/api",N=10;s.useEffect(()=>{h()},[m,c]);const h=async()=>{var C;try{y(!0);const i=localStorage.getItem("token"),p={page:c,limit:N,verificationStatus:m!=="all"?m:void 0},K=await ie.get(`${k}/properties`,{params:p,headers:{Authorization:`Bearer ${i}`},timeout:5e3});if((C=K.data)!=null&&C.success){const R=K.data.data||[];w(R),K.data.pagination&&F(K.data.pagination.pages);const J=R.filter(L=>L.verificationStatus==="verified"),B=R.filter(L=>L.verificationStatus==="pending"),E=R.filter(L=>L.verificationStatus==="rejected");v({totalProperties:R.length,verifiedProperties:J.length,pendingProperties:B.length,rejectedProperties:E.length,verificationRate:R.length>0?Math.round(J.length/R.length*100):0})}}catch(i){console.log("Error fetching properties:",i.message),w([])}finally{y(!1)}},g=b.filter(C=>{var i,p,K;return!x||((i=C.name)==null?void 0:i.toLowerCase().includes(x.toLowerCase()))||((p=C.address)==null?void 0:p.toLowerCase().includes(x.toLowerCase()))||((K=C.city)==null?void 0:K.toLowerCase().includes(x.toLowerCase()))}),a=C=>{const i={verified:t?"bg-green-900/20 text-green-400 border-green-700":"bg-green-100 text-green-800 border-green-300",pending:t?"bg-yellow-900/20 text-yellow-400 border-yellow-700":"bg-yellow-100 text-yellow-800 border-yellow-300",rejected:t?"bg-red-900/20 text-red-400 border-red-700":"bg-red-100 text-red-800 border-red-300"};return i[C]||i.pending},o=C=>{switch(C){case"verified":return e.jsx(le,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(de,{className:"w-5 h-5 text-red-500"});default:return e.jsx(se,{className:"w-5 h-5 text-yellow-500"})}},d=async C=>{try{M(!0);const i=localStorage.getItem("token");await ie.put(`${k}/properties/${C}/verify`,{verificationStatus:"verified",notes:"Approved"},{headers:{Authorization:`Bearer ${i}`}}),w(b.map(p=>p.id===C?{...p,verificationStatus:"verified"}:p)),z(!1),h()}catch(i){console.log("Error approving property:",i.message)}finally{M(!1)}},f=async C=>{try{M(!0);const i=localStorage.getItem("token");await ie.put(`${k}/properties/${C}/verify`,{verificationStatus:"rejected",notes:"Rejected"},{headers:{Authorization:`Bearer ${i}`}}),w(b.map(p=>p.id===C?{...p,verificationStatus:"rejected"}:p)),z(!1),h()}catch(i){console.log("Error rejecting property:",i.message)}finally{M(!1)}},u=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Property Verification"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Verify and manage property documents"})]})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Properties"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:l.totalProperties})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Verified"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-green-600",children:l.verifiedProperties}),e.jsxs("p",{className:"text-xs mt-2 text-slate-500",children:[l.verificationRate,"% verified"]})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-yellow-600",children:l.pendingProperties})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Rejected"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-red-600",children:l.rejectedProperties})]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-8 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, address, or city...",value:x,onChange:C=>_(C.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("select",{value:m,onChange:C=>{P(C.target.value),S(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})}),e.jsx("div",{className:`rounded-xl shadow border overflow-hidden ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:j?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading properties..."})]}):g.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ve,{className:`w-12 h-12 mx-auto mb-3 ${t?"text-slate-600":"text-slate-400"}`}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No properties found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${t?"bg-slate-800/50 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Property"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Location"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Status"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Verified At"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-slate-700":"divide-slate-200"}`,children:g.map(C=>e.jsxs("tr",{className:`hover:${t?"bg-slate-800/30":"bg-slate-50"} transition`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-slate-900"}`,children:C.name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:C.type})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(pe,{className:"w-4 h-4 text-slate-400"}),e.jsxs("span",{className:t?"text-slate-300":"text-slate-700",children:[C.city,", ",C.state]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full border text-sm font-semibold ${a(C.verificationStatus)}`,children:[o(C.verificationStatus),C.verificationStatus.charAt(0).toUpperCase()+C.verificationStatus.slice(1)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:C.verifiedAt?u(C.verifiedAt):"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{T(C),z(!0)},className:`px-3 py-1 rounded-lg text-sm font-semibold transition ${t?"bg-blue-900/20 text-blue-400 hover:bg-blue-900/30":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:"Review"})})]},C.id))})]})})}),r>1&&e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:["Page ",c," of ",r]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(Math.max(1,c-1)),disabled:c===1,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(Math.min(r,c+1)),disabled:c===r,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx(Se,{className:"w-5 h-5"})})]})]})]}),$&&n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto ${t?"bg-slate-900":"bg-white"}`,children:[e.jsxs("div",{className:`border-b ${t?"border-slate-800 bg-slate-800/50":"border-slate-200 bg-slate-50"} p-6 flex items-center justify-between sticky top-0`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:n.name}),e.jsx("button",{onClick:()=>z(!1),className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:"âœ•"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-white":"text-slate-900"}`,children:"Property Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Address"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:n.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"City, State"}),e.jsxs("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:[n.city,", ",n.state]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Type"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:n.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Status"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:n.status})]})]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-white":"text-slate-900"}`,children:"Verification Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t?"text-slate-300":"text-slate-700",children:"Current Status"}),e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full border text-sm font-semibold ${a(n.verificationStatus)}`,children:[o(n.verificationStatus),n.verificationStatus.charAt(0).toUpperCase()+n.verificationStatus.slice(1)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t?"text-slate-300":"text-slate-700",children:"Verified At"}),e.jsx("span",{className:`text-sm font-semibold ${t?"text-white":"text-slate-900"}`,children:n.verifiedAt?u(n.verifiedAt):"Not verified"})]})]})]})]}),e.jsxs("div",{className:`border-t ${t?"border-slate-800 bg-slate-800/50":"border-slate-200 bg-slate-50"} p-6 flex gap-3 justify-end sticky bottom-0`,children:[e.jsx("button",{onClick:()=>z(!1),className:`px-4 py-2 rounded-lg font-semibold transition ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-slate-200 text-slate-900 hover:bg-slate-300"}`,children:"Close"}),n.verificationStatus!=="verified"&&e.jsx("button",{onClick:()=>d(n.id),disabled:U,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition disabled:opacity-50",children:U?"Approving...":"Approve"}),n.verificationStatus!=="rejected"&&e.jsx("button",{onClick:()=>f(n.id),disabled:U,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition disabled:opacity-50",children:U?"Rejecting...":"Reject"})]})]})})]})},ws=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState([]),[j,y]=s.useState(!0),[c,S]=s.useState(1),[r,F]=s.useState(1),[l,v]=s.useState(null),[n,T]=s.useState("grid"),[$,z]=s.useState("name"),[U,M]=s.useState(!1),k={}.VITE_API_URL||"http://localhost:5000/api",N=12;s.useEffect(()=>{h()},[m,c]);const h=async()=>{var u;try{y(!0);const C=localStorage.getItem("token"),i={page:c,limit:N,status:m!=="all"?m:void 0},p=await ie.get(`${k}/properties`,{params:i,headers:{Authorization:`Bearer ${C}`},timeout:5e3});if((u=p.data)!=null&&u.success){const K=p.data.data||[];w(K),p.data.pagination&&F(p.data.pagination.pages);const R=K.filter(V=>V.status==="active"),J=K.filter(V=>V.status==="inactive"),B=K.filter(V=>V.status==="maintenance"),E=K.reduce((V,A)=>V+(A.unitCount||0),0),L=K.reduce((V,A)=>V+(A.occupiedUnits||0),0),D=K.reduce((V,A)=>V+(A.estimatedValue||0),0);v({totalProperties:K.length,activeProperties:R.length,inactiveProperties:J.length,maintenanceProperties:B.length,totalUnits:E,occupiedUnits:L,totalValue:D})}}catch(C){console.log("Error fetching properties:",C.message),w([])}finally{y(!1)}},g=()=>{const u=[...a];return $==="value"?u.sort((C,i)=>(i.estimatedValue||0)-(C.estimatedValue||0)):$==="units"?u.sort((C,i)=>(i.unitCount||0)-(C.unitCount||0)):u.sort((C,i)=>(C.name||"").localeCompare(i.name||"")),u},a=b.filter(u=>{var C,i,p;return!x||((C=u.name)==null?void 0:C.toLowerCase().includes(x.toLowerCase()))||((i=u.address)==null?void 0:i.toLowerCase().includes(x.toLowerCase()))||((p=u.city)==null?void 0:p.toLowerCase().includes(x.toLowerCase()))}),o=u=>{const C={active:t?"bg-green-900/20 text-green-400":"bg-green-100 text-green-800",inactive:t?"bg-slate-900/20 text-slate-400":"bg-slate-100 text-slate-800",maintenance:t?"bg-yellow-900/20 text-yellow-400":"bg-yellow-100 text-yellow-800"};return C[u]||C.inactive},d=u=>`$${(u||0).toLocaleString("en-US",{maximumFractionDigits:0})}`,f=g();return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Properties"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Manage your property portfolio"})]})]}),e.jsxs("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition flex items-center gap-2 font-semibold",children:[e.jsx(re,{className:"w-5 h-5"})," Add Property"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Properties"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:l.totalProperties}),e.jsxs("p",{className:"text-xs mt-2 text-slate-500",children:[l.activeProperties," active"]})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Units"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:l.totalUnits}),e.jsxs("p",{className:"text-xs mt-2 text-slate-500",children:[l.occupiedUnits," occupied"]})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Portfolio Value"}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:d(l.totalValue)})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Occupancy Rate"}),e.jsxs("p",{className:"text-3xl font-bold mt-2 text-blue-600",children:[l.totalUnits>0?Math.round(l.occupiedUnits/l.totalUnits*100):0,"%"]})]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-8 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, address, or city...",value:x,onChange:u=>_(u.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("select",{value:m,onChange:u=>{P(u.target.value),S(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]}),e.jsxs("select",{value:$,onChange:u=>z(u.target.value),className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"value",children:"Sort by Value"}),e.jsx("option",{value:"units",children:"Sort by Units"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T("grid"),className:`flex-1 px-4 py-2 rounded-lg border flex items-center justify-center gap-2 transition ${n==="grid"?t?"bg-blue-900/20 border-blue-700 text-blue-400":"bg-blue-50 border-blue-300 text-blue-600":t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-slate-50 border-slate-300 text-slate-900 hover:bg-slate-100"}`,children:e.jsx(Bt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T("list"),className:`flex-1 px-4 py-2 rounded-lg border flex items-center justify-center gap-2 transition ${n==="list"?t?"bg-blue-900/20 border-blue-700 text-blue-400":"bg-blue-50 border-blue-300 text-blue-600":t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-slate-50 border-slate-300 text-slate-900 hover:bg-slate-100"}`,children:e.jsx(Ut,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{children:j?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading properties..."})]}):f.length===0?e.jsxs("div",{className:`p-12 text-center rounded-xl border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx(ve,{className:`w-12 h-12 mx-auto mb-3 ${t?"text-slate-600":"text-slate-400"}`}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No properties found"})]}):e.jsx("div",{className:n==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:f.map((u,C)=>{var i,p,K,R,J;return e.jsx("div",{className:`rounded-xl shadow border overflow-hidden transition ${t?"bg-slate-900/50 border-slate-700 hover:border-blue-600/50 hover:shadow-lg":"bg-white border-slate-200 hover:border-blue-300 hover:shadow-lg"}`,children:n==="grid"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`h-48 bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center relative ${((i=u.images)==null?void 0:i.length)>0?"bg-cover bg-center":""}`,style:((p=u.images)==null?void 0:p.length)>0?{backgroundImage:`url(${u.images[0]})`}:{},children:[!((K=u.images)!=null&&K.length)&&e.jsx(Ae,{className:"w-12 h-12 text-white/50"}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[u.status==="active"&&e.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-semibold rounded-full",children:"Active"}),u.occupiedUnits===u.unitCount&&u.unitCount>0&&e.jsxs("span",{className:"px-2 py-1 bg-blue-500 text-white text-xs font-semibold rounded-full flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"})," Full"]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:u.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm text-slate-500",children:[e.jsx(pe,{className:"w-4 h-4"}),u.city,", ",u.state]})]})}),e.jsx("p",{className:`text-sm mb-4 ${t?"text-slate-400":"text-slate-600"}`,children:u.address}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4 pt-4 border-t",style:{borderColor:t?"#334155":"#e2e8f0"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Units"}),e.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:u.unitCount||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Occupied"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:u.occupiedUnits||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Value"}),e.jsx("p",{className:`text-sm font-bold ${t?"text-white":"text-slate-900"}`,children:d(u.estimatedValue)})]})]}),e.jsx("button",{className:`w-full px-4 py-2 rounded-lg font-semibold transition ${t?"bg-blue-900/20 text-blue-400 hover:bg-blue-900/30":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:"View Details"})]})]}):e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:u.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${o(u.status)}`,children:((R=u.status)==null?void 0:R.charAt(0).toUpperCase())+((J=u.status)==null?void 0:J.slice(1))})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[e.jsx(pe,{className:"w-4 h-4"}),u.address,", ",u.city,", ",u.state]})})]}),e.jsxs("div",{className:"flex items-center gap-8 ml-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Units"}),e.jsx("p",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:u.unitCount||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Occupied"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:u.occupiedUnits||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Value"}),e.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:d(u.estimatedValue)})]}),e.jsx("button",{className:`px-4 py-2 rounded-lg font-semibold transition ${t?"bg-blue-900/20 text-blue-400 hover:bg-blue-900/30":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:"View"})]})]})},C)})})}),r>1&&e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:["Page ",c," of ",r]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(Math.max(1,c-1)),disabled:c===1,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(Math.min(r,c+1)),disabled:c===r,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx(Se,{className:"w-5 h-5"})})]})]})]}),e.jsx(Ft,{isOpen:U,onClose:()=>M(!1),onAdd:u=>{w([u,...b]),M(!1)}})]})},$s=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState("all"),[j,y]=s.useState([]),[c,S]=s.useState(!0),[r,F]=s.useState(1),[l,v]=s.useState(1),[n,T]=s.useState(null),[$,z]=s.useState(null),[U,M]=s.useState(!1),[k,N]=s.useState(!1);s.useState("grid");const[h,g]=s.useState("name"),[a,o]=s.useState(1),[d,f]=s.useState([]),[u,C]=s.useState([51.505,-.09]),[i,p]=s.useState({name:"",address:"",city:"",type:"apartment",bedrooms:"",bathrooms:"",guests:"",pricePerNight:"",description:"",amenities:[],checkIn:"",checkOut:"",minStay:"",maxGuests:"",latitude:51.505,longitude:-.09}),K={}.VITE_API_URL||"http://localhost:5000/api",R=12;s.useEffect(()=>{J()},[m,b,r]);const J=async()=>{var A;try{S(!0);const W=localStorage.getItem("token"),q={page:r,limit:R,type:b!=="all"?b:void 0,status:m!=="all"?m:void 0},O=await ie.get(`${K}/properties`,{params:q,headers:{Authorization:`Bearer ${W}`},timeout:5e3});if((A=O.data)!=null&&A.success){const Z=(O.data.data||[]).map(ue=>({...ue,rating:(Math.random()*2+3.5).toFixed(1),reviews:Math.floor(Math.random()*200)+10,occupancyRate:Math.floor(Math.random()*40)+60,monthlyRevenue:Math.floor(Math.random()*8e3)+2e3,amenities:["WiFi","Kitchen","AC","TV","Parking"],bedrooms:Math.floor(Math.random()*4)+1,bathrooms:Math.floor(Math.random()*3)+1,guests:Math.floor(Math.random()*6)+2}));y(Z),O.data.pagination&&v(O.data.pagination.pages);const I=Z.filter(ue=>ue.status==="active"),Q=Z.filter(ue=>ue.status==="inactive"),H=Z.reduce((ue,Te)=>ue+Te.monthlyRevenue,0),St=(Z.reduce((ue,Te)=>ue+parseFloat(Te.rating),0)/Z.length).toFixed(1);T({totalProperties:Z.length,activeProperties:I.length,inactiveProperties:Q.length,totalRevenue:H,avgRating:St,totalReviews:Z.reduce((ue,Te)=>ue+Te.reviews,0)})}}catch(W){console.log("Error fetching properties:",W.message),y([])}finally{S(!1)}},B=j.filter(A=>{var W,q,O;return!x||((W=A.name)==null?void 0:W.toLowerCase().includes(x.toLowerCase()))||((q=A.address)==null?void 0:q.toLowerCase().includes(x.toLowerCase()))||((O=A.city)==null?void 0:O.toLowerCase().includes(x.toLowerCase()))}),E=()=>{const A=[...B];return h==="rating"?A.sort((W,q)=>parseFloat(q.rating)-parseFloat(W.rating)):h==="revenue"?A.sort((W,q)=>q.monthlyRevenue-W.monthlyRevenue):h==="occupancy"?A.sort((W,q)=>q.occupancyRate-W.occupancyRate):A.sort((W,q)=>(W.name||"").localeCompare(q.name||"")),A},L=A=>`$${(A||0).toLocaleString("en-US",{maximumFractionDigits:0})}`,D=E(),V={WiFi:e.jsx(Wt,{className:"w-4 h-4"}),Kitchen:e.jsx(gs,{className:"w-4 h-4"}),AC:e.jsx(Jt,{className:"w-4 h-4"}),TV:e.jsx(cs,{className:"w-4 h-4"}),Parking:e.jsx(Ae,{className:"w-4 h-4"})};return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:e.jsx(Ae,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"BnB Properties"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Manage your short-term rental portfolio"})]})]}),e.jsxs("button",{onClick:()=>{N(!0),o(1),f([])},className:"px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition flex items-center gap-2 font-semibold",children:[e.jsx(re,{className:"w-5 h-5"})," Add Property"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Properties"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:n.totalProperties}),e.jsxs("p",{className:"text-xs mt-2 text-slate-500",children:[n.activeProperties," active"]})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Monthly Revenue"}),e.jsx("p",{className:"text-2xl font-bold mt-2 text-green-600",children:L(n.totalRevenue)})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Avg Rating"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:n.avgRating}),e.jsx(_e,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"})]})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Reviews"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:n.totalReviews})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Avg Occupancy"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-blue-600",children:"72%"})]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-8 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search properties...",value:x,onChange:A=>_(A.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("select",{value:m,onChange:A=>{P(A.target.value),F(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsxs("select",{value:b,onChange:A=>{w(A.target.value),F(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"condo",children:"Condo"})]}),e.jsxs("select",{value:h,onChange:A=>g(A.target.value),className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"rating",children:"Sort by Rating"}),e.jsx("option",{value:"revenue",children:"Sort by Revenue"}),e.jsx("option",{value:"occupancy",children:"Sort by Occupancy"})]})]})}),e.jsx("div",{children:c?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-3"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading properties..."})]}):D.length===0?e.jsxs("div",{className:`p-12 text-center rounded-xl border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx(Ae,{className:`w-12 h-12 mx-auto mb-3 ${t?"text-slate-600":"text-slate-400"}`}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No properties found"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(A=>e.jsxs("div",{className:`rounded-xl shadow border overflow-hidden transition hover:shadow-lg ${t?"bg-slate-900/50 border-slate-700 hover:border-orange-600/50":"bg-white border-slate-200 hover:border-orange-300"}`,children:[e.jsxs("div",{className:"h-48 bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center relative",children:[e.jsx(Ae,{className:"w-12 h-12 text-white/50"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:A.status==="active"&&e.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-semibold rounded-full",children:"Active"})}),e.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center gap-1 bg-black/70 text-white px-2 py-1 rounded-lg",children:[e.jsx(_e,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-semibold",children:A.rating}),e.jsxs("span",{className:"text-xs text-gray-300",children:["(",A.reviews,")"]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:A.name}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-sm text-slate-500",children:[e.jsx(pe,{className:"w-4 h-4"}),A.city,", ",A.state]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:A.amenities.slice(0,3).map((W,q)=>e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded text-xs ${t?"bg-slate-800 text-slate-300":"bg-slate-100 text-slate-700"}`,children:[V[W]||e.jsx(ot,{className:"w-3 h-3"}),W]},q))}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4 pt-4 border-t",style:{borderColor:t?"#334155":"#e2e8f0"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Guests"}),e.jsx("p",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:A.guests})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Occupancy"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[A.occupancyRate,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-slate-600"}`,children:"Revenue"}),e.jsx("p",{className:`text-sm font-bold ${t?"text-white":"text-slate-900"}`,children:L(A.monthlyRevenue)})]})]}),e.jsx("button",{onClick:()=>{z(A),M(!0)},className:`w-full px-4 py-2 rounded-lg font-semibold transition ${t?"bg-orange-900/20 text-orange-400 hover:bg-orange-900/30":"bg-orange-50 text-orange-600 hover:bg-orange-100"}`,children:"View Details"})]})]},A.id))})}),l>1&&e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:["Page ",r," of ",l]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(Math.max(1,r-1)),disabled:r===1,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>F(Math.min(l,r+1)),disabled:r===l,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx(Se,{className:"w-5 h-5"})})]})]})]}),U&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto ${t?"bg-slate-900":"bg-white"}`,children:[e.jsxs("div",{className:`border-b ${t?"border-slate-800 bg-slate-800/50":"border-slate-200 bg-slate-50"} p-6 flex items-center justify-between sticky top-0`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:$.name}),e.jsx("div",{className:"flex items-center gap-3 mt-2",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_e,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"font-semibold",children:$.rating}),e.jsxs("span",{className:"text-sm text-slate-500",children:["(",$.reviews," reviews)"]})]})})]}),e.jsx("button",{onClick:()=>M(!1),className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:"âœ•"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-white":"text-slate-900"}`,children:"Property Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Address"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:$.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"City"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:$.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Type"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:$.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Bedrooms"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:$.bedrooms})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Bathrooms"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:$.bathrooms})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Max Guests"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:$.guests})]})]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-white":"text-slate-900"}`,children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Monthly Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:L($.monthlyRevenue)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Occupancy Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:[$.occupancyRate,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Rating"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:"text-2xl font-bold",children:$.rating}),e.jsx(_e,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"})]})]})]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-white":"text-slate-900"}`,children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:$.amenities.map((A,W)=>e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${t?"bg-slate-700 text-slate-200":"bg-slate-100 text-slate-700"}`,children:[V[A]||e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:A})]},W))})]})]}),e.jsxs("div",{className:`border-t ${t?"border-slate-800 bg-slate-800/50":"border-slate-200 bg-slate-50"} p-6 flex gap-3 justify-end sticky bottom-0`,children:[e.jsx("button",{onClick:()=>M(!1),className:`px-4 py-2 rounded-lg font-semibold transition ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-slate-200 text-slate-900 hover:bg-slate-300"}`,children:"Close"}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 transition",children:"Edit Property"})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-gradient-to-b from-slate-900 to-slate-950 rounded-2xl shadow-2xl max-w-2xl w-full my-8 border border-orange-900/30",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-6 flex items-center justify-between rounded-t-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Add BnB Property"}),e.jsx("button",{onClick:()=>{N(!1),o(1),f([])},className:"text-white hover:bg-white hover:bg-opacity-20 p-1 rounded-lg transition",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex gap-2 px-6 py-4 bg-slate-800/50 border-b border-orange-900/20",children:[1,2,3].map(A=>e.jsx("div",{className:`flex-1 h-2 rounded-full transition-all ${A<=a?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-slate-700"}`},A))}),e.jsxs("div",{className:"p-6 space-y-4 max-h-96 overflow-y-auto text-slate-100",children:[a===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Property Photos"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[d.map((A,W)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:A,alt:"property",className:"w-full h-24 object-cover rounded-lg border border-orange-900/30"}),e.jsx("button",{onClick:()=>f(d.filter((q,O)=>O!==W)),className:"absolute top-1 right-1 bg-red-600 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(X,{className:"w-4 h-4"})})]},W)),e.jsxs("label",{className:"border-2 border-dashed border-orange-600/50 rounded-lg p-4 flex flex-col items-center justify-center cursor-pointer hover:bg-orange-900/20 transition bg-slate-800/50",children:[e.jsx(re,{className:"text-orange-500 mb-1",size:20}),e.jsx("span",{className:"text-xs font-medium text-orange-400",children:"Add Photos"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:A=>Array.from(A.target.files).forEach(W=>{const q=new FileReader;q.onload=O=>f([...d,O.target.result]),q.readAsDataURL(W)}),className:"hidden"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Property Name"}),e.jsx("input",{type:"text",placeholder:"Enter property name",value:i.name,onChange:A=>p({...i,name:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Description"}),e.jsx("textarea",{placeholder:"Describe your property",value:i.description,onChange:A=>p({...i,description:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none",rows:"3"})]})]}),a===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Address"}),e.jsx("input",{type:"text",placeholder:"Enter address",value:i.address,onChange:A=>p({...i,address:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Latitude"}),e.jsx("input",{type:"number",step:"0.0001",placeholder:"51.505",value:i.latitude,onChange:A=>{p({...i,latitude:parseFloat(A.target.value)}),C([parseFloat(A.target.value),i.longitude])},className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Longitude"}),e.jsx("input",{type:"number",step:"0.0001",placeholder:"-0.09",value:i.longitude,onChange:A=>{p({...i,longitude:parseFloat(A.target.value)}),C([i.latitude,parseFloat(A.target.value)])},className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Map Location"}),e.jsx("div",{className:"rounded-lg overflow-hidden border border-orange-900/30 h-48",children:e.jsxs(zt,{center:u,zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(Ot,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"Â© OpenStreetMap contributors"}),e.jsx(Vt,{position:u,children:e.jsx(Kt,{children:i.address||"Property Location"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"City"}),e.jsx("input",{type:"text",placeholder:"City",value:i.city,onChange:A=>p({...i,city:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Type"}),e.jsxs("select",{value:i.type,onChange:A=>p({...i,type:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"condo",children:"Condo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Bedrooms"}),e.jsx("input",{type:"number",placeholder:"0",value:i.bedrooms,onChange:A=>p({...i,bedrooms:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Bathrooms"}),e.jsx("input",{type:"number",placeholder:"0",value:i.bathrooms,onChange:A=>p({...i,bathrooms:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Guests"}),e.jsx("input",{type:"number",placeholder:"0",value:i.guests,onChange:A=>p({...i,guests:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Price/Night"}),e.jsx("input",{type:"number",placeholder:"0",value:i.pricePerNight,onChange:A=>p({...i,pricePerNight:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]})]}),a===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Check-in Time"}),e.jsx("input",{type:"time",value:i.checkIn,onChange:A=>p({...i,checkIn:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Check-out Time"}),e.jsx("input",{type:"time",value:i.checkOut,onChange:A=>p({...i,checkOut:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Min Stay (nights)"}),e.jsx("input",{type:"number",placeholder:"1",value:i.minStay,onChange:A=>p({...i,minStay:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Max Guests"}),e.jsx("input",{type:"number",placeholder:"0",value:i.maxGuests,onChange:A=>p({...i,maxGuests:A.target.value}),className:"w-full px-4 py-2 border border-orange-900/30 rounded-lg bg-slate-800 text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Amenities"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["WiFi","Kitchen","AC","TV","Parking","Pool","Gym","Washer"].map(A=>e.jsx("button",{onClick:()=>p({...i,amenities:i.amenities.includes(A)?i.amenities.filter(W=>W!==A):[...i.amenities,A]}),className:`p-2 rounded-lg border-2 transition-all text-sm font-medium ${i.amenities.includes(A)?"border-orange-500 bg-orange-900/30 text-orange-300":"border-slate-700 bg-slate-800 text-slate-400 hover:border-orange-600/50"}`,children:A},A))})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 px-6 py-4 flex gap-3 border-t border-orange-900/20 rounded-b-2xl",children:[e.jsx("button",{onClick:()=>a>1?o(a-1):N(!1),className:"flex-1 px-4 py-2 border-2 border-slate-700 text-slate-300 font-semibold rounded-lg hover:bg-slate-700 transition-colors",children:a===1?"Cancel":"Back"}),e.jsx("button",{onClick:()=>a<3?o(a+1):(y([{id:Date.now(),name:i.name,address:i.address,city:i.city,type:i.type,bedrooms:parseInt(i.bedrooms),bathrooms:parseInt(i.bathrooms),guests:parseInt(i.guests),status:"active",rating:"4.5",reviews:0,occupancyRate:0,monthlyRevenue:0,amenities:i.amenities,image:d[0]||"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=500&h=300&fit=crop"},...j]),N(!1),o(1),f([])),className:"flex-1 px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold rounded-lg hover:from-orange-700 hover:to-orange-800 transition-all",children:a===3?"Add Property":"Next"})]})]})})]})},Ss=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState([]),[j,y]=s.useState(!0),[c,S]=s.useState(1),[r,F]=s.useState(1),[l,v]=s.useState(null),[n,T]=s.useState(null),[$,z]=s.useState(!1),[U,M]=s.useState(!1),[k,N]=s.useState(""),h={}.VITE_API_URL||"http://localhost:5000/api",g=10;s.useEffect(()=>{a()},[m,c]);const a=async()=>{var i;try{y(!0);const p=localStorage.getItem("token"),K={page:c,limit:g,verificationStatus:"pending",type:m!=="all"?m:void 0},R=await ie.get(`${h}/properties`,{params:K,headers:{Authorization:`Bearer ${p}`},timeout:5e3});if((i=R.data)!=null&&i.success){const J=R.data.data||[];w(J),R.data.pagination&&F(R.data.pagination.pages);const B=J.map(E=>{const L=new Date(E.createdAt);return Math.floor((new Date-L)/(1e3*60*60*24))});v({totalPending:J.length,avgDaysWaiting:J.length>0?Math.round(B.reduce((E,L)=>E+L)/B.length):0,oldestDays:J.length>0?Math.max(...B):0,newestDays:J.length>0?Math.min(...B):0})}}catch(p){console.log("Error fetching properties:",p.message),w([])}finally{y(!1)}},o=b.filter(i=>{var p,K,R;return!x||((p=i.name)==null?void 0:p.toLowerCase().includes(x.toLowerCase()))||((K=i.address)==null?void 0:K.toLowerCase().includes(x.toLowerCase()))||((R=i.city)==null?void 0:R.toLowerCase().includes(x.toLowerCase()))}),d=async i=>{try{M(!0);const p=localStorage.getItem("token");await ie.put(`${h}/properties/${i}/verify`,{verificationStatus:"verified",notes:"Approved"},{headers:{Authorization:`Bearer ${p}`}}),w(b.filter(K=>K.id!==i)),z(!1),a()}catch(p){console.log("Error approving property:",p.message)}finally{M(!1)}},f=async i=>{try{M(!0);const p=localStorage.getItem("token");await ie.put(`${h}/properties/${i}/verify`,{verificationStatus:"rejected",notes:k||"Rejected"},{headers:{Authorization:`Bearer ${p}`}}),w(b.filter(K=>K.id!==i)),z(!1),N(""),a()}catch(p){console.log("Error rejecting property:",p.message)}finally{M(!1)}},u=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),C=i=>i>14?"text-red-600":i>7?"text-yellow-600":"text-green-600";return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg",children:e.jsx(se,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Pending Properties"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Review and approve pending property listings"})]})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-yellow-600",children:l.totalPending}),e.jsx("p",{className:"text-xs mt-2 text-slate-500",children:"Awaiting approval"})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Avg Days Waiting"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:l.avgDaysWaiting}),e.jsx("p",{className:"text-xs mt-2 text-slate-500",children:"Average wait time"})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Oldest Pending"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-red-600",children:l.oldestDays}),e.jsx("p",{className:"text-xs mt-2 text-slate-500",children:"Days waiting"})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Newest Pending"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-green-600",children:l.newestDays}),e.jsx("p",{className:"text-xs mt-2 text-slate-500",children:"Days waiting"})]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-8 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, address, or city...",value:x,onChange:i=>_(i.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("select",{value:m,onChange:i=>{P(i.target.value),S(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"condo",children:"Condo"}),e.jsx("option",{value:"townhouse",children:"Townhouse"})]})]})}),e.jsx("div",{className:`rounded-xl shadow border overflow-hidden ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:j?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600 mx-auto mb-3"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading pending properties..."})]}):o.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(le,{className:"w-12 h-12 mx-auto mb-3 text-green-500"}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No pending properties"}),e.jsx("p",{className:`text-sm mt-2 ${t?"text-slate-400":"text-slate-600"}`,children:"All properties have been reviewed!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${t?"bg-slate-800/50 border-slate-700":"bg-slate-50 border-slate-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Property"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Location"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Type"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Submitted"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Days Waiting"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-slate-700":"divide-slate-200"}`,children:o.map(i=>{const p=Math.floor((new Date-new Date(i.createdAt))/864e5);return e.jsxs("tr",{className:`hover:${t?"bg-slate-800/30":"bg-slate-50"} transition`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-slate-900"}`,children:i.name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:i.address})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(pe,{className:"w-4 h-4 text-slate-400"}),e.jsxs("span",{className:t?"text-slate-300":"text-slate-700",children:[i.city,", ",i.state]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${t?"bg-slate-800 text-slate-300":"bg-slate-100 text-slate-700"}`,children:i.type})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:u(i.createdAt)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:`text-sm font-semibold ${C(p)}`,children:[p," days"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{T(i),z(!0)},className:`px-3 py-1 rounded-lg text-sm font-semibold transition ${t?"bg-yellow-900/20 text-yellow-400 hover:bg-yellow-900/30":"bg-yellow-50 text-yellow-600 hover:bg-yellow-100"}`,children:"Review"})})]},i.id)})})]})})}),r>1&&e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:["Page ",c," of ",r]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(Math.max(1,c-1)),disabled:c===1,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(Math.min(r,c+1)),disabled:c===r,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx(Se,{className:"w-5 h-5"})})]})]})]}),$&&n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto ${t?"bg-slate-900":"bg-white"}`,children:[e.jsxs("div",{className:`border-b ${t?"border-slate-800 bg-slate-800/50":"border-slate-200 bg-slate-50"} p-6 flex items-center justify-between sticky top-0`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:n.name}),e.jsx("button",{onClick:()=>z(!1),className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:"âœ•"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-white":"text-slate-900"}`,children:"Property Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Address"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:n.address})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"City, State"}),e.jsxs("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:[n.city,", ",n.state]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Type"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:n.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Submitted"}),e.jsx("p",{className:`font-semibold mt-1 ${t?"text-white":"text-slate-900"}`,children:u(n.createdAt)})]})]})]}),e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-4 ${t?"text-white":"text-slate-900"}`,children:"Rejection Reason (Optional)"}),e.jsx("textarea",{value:k,onChange:i=>N(i.target.value),placeholder:"Provide a reason if rejecting this property...",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,rows:"4"})]}),n.description&&e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-2 ${t?"text-white":"text-slate-900"}`,children:"Description"}),e.jsx("p",{className:`text-sm ${t?"text-slate-300":"text-slate-700"}`,children:n.description})]})]}),e.jsxs("div",{className:`border-t ${t?"border-slate-800 bg-slate-800/50":"border-slate-200 bg-slate-50"} p-6 flex gap-3 justify-end sticky bottom-0`,children:[e.jsx("button",{onClick:()=>{z(!1),N("")},className:`px-4 py-2 rounded-lg font-semibold transition ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-slate-200 text-slate-900 hover:bg-slate-300"}`,children:"Close"}),e.jsx("button",{onClick:()=>f(n.id),disabled:U,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition disabled:opacity-50",children:U?"Rejecting...":"Reject"}),e.jsx("button",{onClick:()=>d(n.id),disabled:U,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition disabled:opacity-50",children:U?"Approving...":"Approve"})]})]})})]})},ks=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState("all"),[j,y]=s.useState([]),[c,S]=s.useState(!0),[r,F]=s.useState(1),[l,v]=s.useState(1),[n,T]=s.useState(null),[$,z]=s.useState(null),[U,M]=s.useState(!1),[k,N]=s.useState(!1),[h,g]=s.useState(!1),[a,o]=s.useState({documentType:"deed",description:"",file:null}),d={}.VITE_API_URL||"http://localhost:5000/api",f=10,u=[{value:"deed",label:"Deed",icon:"ðŸ“‹"},{value:"tax_certificate",label:"Tax Certificate",icon:"ðŸ›ï¸"},{value:"insurance",label:"Insurance",icon:"ðŸ›¡ï¸"},{value:"inspection",label:"Inspection Report",icon:"ðŸ”"},{value:"title",label:"Title",icon:"ðŸ“œ"},{value:"mortgage",label:"Mortgage",icon:"ðŸ¦"},{value:"survey",label:"Survey",icon:"ðŸ“"},{value:"other",label:"Other",icon:"ðŸ“"}];s.useEffect(()=>{C()},[m,b,r]);const C=async()=>{var E;try{S(!0);const L=localStorage.getItem("token"),D={page:r,limit:f,type:m!=="all"?m:void 0},V=await ie.get(`${d}/properties`,{params:D,headers:{Authorization:`Bearer ${L}`},timeout:5e3});if((E=V.data)!=null&&E.success){const W=(V.data.data||[]).map(Z=>({...Z,documents:[{id:"1",type:"deed",name:"Property Deed",uploadedAt:new Date(Date.now()-30*24*60*60*1e3),uploadedBy:"Admin",size:2.5,status:"verified"},{id:"2",type:"tax_certificate",name:"Tax Certificate 2024",uploadedAt:new Date(Date.now()-15*24*60*60*1e3),uploadedBy:"Manager",size:1.2,status:"verified"},{id:"3",type:"insurance",name:"Insurance Policy",uploadedAt:new Date(Date.now()-7*24*60*60*1e3),uploadedBy:"Admin",size:3.8,status:"pending"},{id:"4",type:"inspection",name:"Inspection Report",uploadedAt:new Date(Date.now()-2*24*60*60*1e3),uploadedBy:"Inspector",size:5.1,status:"verified"}],totalDocuments:4,verifiedDocuments:3,pendingDocuments:1}));y(W),V.data.pagination&&v(V.data.pagination.pages);const q=W.reduce((Z,I)=>Z+I.totalDocuments,0),O=W.reduce((Z,I)=>Z+I.verifiedDocuments,0),ne=W.reduce((Z,I)=>Z+I.pendingDocuments,0);T({totalProperties:W.length,totalDocuments:q,verifiedDocuments:O,pendingDocuments:ne,verificationRate:q>0?Math.round(O/q*100):0})}}catch(L){console.log("Error fetching properties:",L.message),y([])}finally{S(!1)}},i=j.filter(E=>{var L,D,V;return!x||((L=E.name)==null?void 0:L.toLowerCase().includes(x.toLowerCase()))||((D=E.address)==null?void 0:D.toLowerCase().includes(x.toLowerCase()))||((V=E.city)==null?void 0:V.toLowerCase().includes(x.toLowerCase()))}),p=async E=>{if(E.preventDefault(),!(!a.file||!$))try{g(!0);const L=localStorage.getItem("token"),D=new FormData;D.append("file",a.file),D.append("documentType",a.documentType),D.append("description",a.description),await ie.post(`${d}/properties/${$.id}/documents`,D,{headers:{Authorization:`Bearer ${L}`,"Content-Type":"multipart/form-data"}}),o({documentType:"deed",description:"",file:null}),M(!1),C()}catch(L){console.log("Error uploading document:",L.message)}finally{g(!1)}},K=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),R=E=>E<1024?E+" B":E<1024*1024?(E/1024).toFixed(1)+" KB":(E/(1024*1024)).toFixed(1)+" MB",J=E=>{const L=u.find(D=>D.value===E);return(L==null?void 0:L.icon)||"ðŸ“"},B=E=>{const L={verified:t?"bg-green-900/20 text-green-400 border-green-700":"bg-green-100 text-green-800 border-green-300",pending:t?"bg-yellow-900/20 text-yellow-400 border-yellow-700":"bg-yellow-100 text-yellow-800 border-yellow-300",rejected:t?"bg-red-900/20 text-red-400 border-red-700":"bg-red-100 text-red-800 border-red-300"};return L[E]||L.pending};return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:e.jsx(je,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Property Documents"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Manage and organize property documentation"})]})]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition flex items-center gap-2 font-semibold",children:[e.jsx(re,{className:"w-5 h-5"})," Upload Document"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Properties"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:n.totalProperties})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Total Documents"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-purple-600",children:n.totalDocuments})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Verified"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-green-600",children:n.verifiedDocuments}),e.jsxs("p",{className:"text-xs mt-2 text-slate-500",children:[n.verificationRate,"% verified"]})]}),e.jsxs("div",{className:`rounded-xl shadow p-5 border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${t?"text-slate-400":"text-slate-600"}`,children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-yellow-600",children:n.pendingDocuments})]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-8 ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search properties...",value:x,onChange:E=>_(E.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-slate-50 border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("select",{value:m,onChange:E=>{P(E.target.value),F(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"condo",children:"Condo"})]}),e.jsxs("select",{value:b,onChange:E=>{w(E.target.value),F(1)},className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"verified",children:"Verified"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})}),e.jsx("div",{className:"space-y-6",children:c?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-3"}),e.jsx("p",{className:t?"text-slate-400":"text-slate-600",children:"Loading documents..."})]}):i.length===0?e.jsxs("div",{className:`p-12 text-center rounded-xl border ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx(je,{className:`w-12 h-12 mx-auto mb-3 ${t?"text-slate-600":"text-slate-400"}`}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No properties found"})]}):i.map(E=>e.jsxs("div",{className:`rounded-xl shadow border overflow-hidden ${t?"bg-slate-900/50 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("div",{className:`p-6 border-b ${t?"border-slate-700 bg-slate-800/30":"border-slate-200 bg-slate-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"}`,children:E.name}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"w-4 h-4 text-slate-400"}),e.jsxs("span",{className:t?"text-slate-300":"text-slate-700",children:[E.city,", ",E.state]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-4 h-4 text-slate-400"}),e.jsxs("span",{className:t?"text-slate-300":"text-slate-700",children:[E.totalDocuments," documents"]})]})]})]}),e.jsxs("button",{onClick:()=>{z(E),M(!0)},className:`px-4 py-2 rounded-lg font-semibold transition ${t?"bg-purple-900/20 text-purple-400 hover:bg-purple-900/30":"bg-purple-50 text-purple-600 hover:bg-purple-100"}`,children:[e.jsx(lt,{className:"w-4 h-4 inline mr-2"})," Upload"]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:E.documents.map(L=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${t?"bg-slate-800/30 border-slate-700 hover:border-purple-600/50":"bg-slate-50 border-slate-200 hover:border-purple-300"} transition`,children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("span",{className:"text-2xl",children:J(L.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-slate-900"}`,children:L.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs",children:[e.jsx("span",{className:t?"text-slate-400":"text-slate-600",children:K(L.uploadedAt)}),e.jsxs("span",{className:t?"text-slate-400":"text-slate-600",children:["by ",L.uploadedBy]}),e.jsx("span",{className:t?"text-slate-400":"text-slate-600",children:R(L.size*1024*1024)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full border text-xs font-semibold ${B(L.status)}`,children:[L.status==="verified"?e.jsx(le,{className:"w-3 h-3"}):e.jsx(se,{className:"w-3 h-3"}),L.status.charAt(0).toUpperCase()+L.status.slice(1)]}),e.jsx("button",{className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:e.jsx(ce,{className:"w-4 h-4 text-slate-400"})}),e.jsx("button",{className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:e.jsx(xe,{className:"w-4 h-4 text-slate-400"})}),e.jsx("button",{className:`p-2 rounded-lg transition ${t?"hover:bg-red-900/20 text-red-400":"hover:bg-red-50 text-red-600"}`,children:e.jsx(Ne,{className:"w-4 h-4"})})]})]},L.id))})})]},E.id))}),l>1&&e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-slate-600"}`,children:["Page ",r," of ",l]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(Math.max(1,r-1)),disabled:r===1,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>F(Math.min(l,r+1)),disabled:r===l,className:`p-2 rounded-lg border transition ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-white border-slate-300 text-slate-900 hover:bg-slate-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx(Se,{className:"w-5 h-5"})})]})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl max-w-2xl w-full ${t?"bg-slate-900":"bg-white"}`,children:[e.jsxs("div",{className:`border-b ${t?"border-slate-800 bg-gradient-to-r from-purple-900/20 to-slate-900":"border-slate-200 bg-gradient-to-r from-purple-50 to-white"} p-6 flex items-center justify-between rounded-t-2xl`,children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Select Property"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-slate-400":"text-slate-600"}`,children:"Choose a property to upload documents"})]}),e.jsx("button",{onClick:()=>N(!1),className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:j.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(E=>e.jsx("button",{onClick:()=>{z(E),N(!1),M(!0)},className:`text-left p-4 rounded-xl border-2 transition hover:shadow-lg ${t?"bg-slate-800/50 border-slate-700 hover:border-purple-600 hover:bg-slate-800":"bg-slate-50 border-slate-200 hover:border-purple-400 hover:bg-white"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600",children:e.jsx(je,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-semibold truncate ${t?"text-white":"text-slate-900"}`,children:E.name}),e.jsx("p",{className:`text-xs mt-1 ${t?"text-slate-400":"text-slate-600"}`,children:E.address}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${t?"bg-slate-700 text-slate-300":"bg-slate-200 text-slate-700"}`,children:[E.city,", ",E.state]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${E.status==="active"?t?"bg-green-900/30 text-green-400":"bg-green-100 text-green-700":t?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-700"}`,children:E.status})]}),e.jsxs("p",{className:"text-xs mt-2 text-slate-500",children:[E.totalDocuments," documents"]})]})]})},E.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(je,{className:`w-12 h-12 mx-auto mb-3 ${t?"text-slate-600":"text-slate-400"}`}),e.jsx("p",{className:`font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No properties available"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-slate-500":"text-slate-600"}`,children:"Add properties first to upload documents"})]})})]})}),U&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`rounded-xl shadow-2xl max-w-2xl w-full ${t?"bg-slate-900":"bg-white"}`,children:[e.jsxs("div",{className:`border-b ${t?"border-slate-800 bg-slate-800/50":"border-slate-200 bg-slate-50"} p-6 flex items-center justify-between`,children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Upload Document"}),e.jsx("button",{onClick:()=>M(!1),className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:"âœ•"})]}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[e.jsxs("div",{className:`rounded-lg p-4 border ${t?"bg-slate-800/30 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("p",{className:`text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:$.name}),e.jsxs("p",{className:`text-xs mt-1 ${t?"text-slate-400":"text-slate-600"}`,children:[$.address,", ",$.city,", ",$.state]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-3 ${t?"text-white":"text-slate-900"}`,children:"Document Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:u.map(E=>e.jsxs("button",{type:"button",onClick:()=>o({...a,documentType:E.value}),className:`p-3 rounded-lg border text-center transition ${a.documentType===E.value?t?"bg-purple-900/20 border-purple-700 text-purple-400":"bg-purple-50 border-purple-300 text-purple-600":t?"bg-slate-800 border-slate-700 text-slate-300 hover:border-slate-600":"bg-slate-50 border-slate-300 text-slate-700 hover:border-slate-400"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:E.icon}),e.jsx("div",{className:"text-xs font-semibold",children:E.label})]},E.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-white":"text-slate-900"}`,children:"Description (Optional)"}),e.jsx("textarea",{value:a.description,onChange:E=>o({...a,description:E.target.value}),placeholder:"Add notes about this document...",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,rows:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-3 ${t?"text-white":"text-slate-900"}`,children:"Select File"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition ${a.file?t?"bg-purple-900/10 border-purple-700":"bg-purple-50 border-purple-300":t?"bg-slate-800/50 border-slate-700 hover:border-slate-600":"bg-slate-50 border-slate-300 hover:border-slate-400"}`,children:[e.jsx("input",{type:"file",onChange:E=>{var L;return o({...a,file:(L=E.target.files)==null?void 0:L[0]})},className:"hidden",id:"file-input"}),e.jsxs("label",{htmlFor:"file-input",className:"cursor-pointer",children:[e.jsx(lt,{className:`w-8 h-8 mx-auto mb-2 ${a.file?"text-purple-600":"text-slate-400"}`}),e.jsx("p",{className:`font-semibold ${a.file?"text-purple-600":t?"text-white":"text-slate-900"}`,children:a.file?a.file.name:"Click to upload or drag and drop"}),e.jsx("p",{className:`text-xs mt-1 ${t?"text-slate-400":"text-slate-600"}`,children:"PDF, DOC, DOCX, JPG, PNG up to 10MB"})]})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",style:{borderColor:t?"#334155":"#e2e8f0"},children:[e.jsx("button",{type:"button",onClick:()=>M(!1),className:`px-4 py-2 rounded-lg font-semibold transition ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-slate-200 text-slate-900 hover:bg-slate-300"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!a.file,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-semibold hover:from-purple-700 hover:to-purple-800 transition disabled:opacity-50",children:h?"Uploading...":"Upload Document"})]})]})]})})]})},te=({children:t,variant:x="primary",size:_="md",loading:m=!1,disabled:P=!1,type:b="button",icon:w,iconPosition:j="left",fullWidth:y=!1,className:c="",onClick:S,...r})=>{const F="inline-flex items-center justify-center font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",l={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 focus:ring-gray-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",outline:"border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-gray-500",ghost:"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-gray-500"},v={xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"},n=y?"w-full":"",T=`
    ${F}
    ${l[x]}
    ${v[_]}
    ${n}
    ${c}
  `.trim(),$=()=>m?e.jsx(ts,{className:"animate-spin"}):w,z={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-5 w-5",xl:"h-6 w-6"}[_];return e.jsxs("button",{type:b,disabled:P||m,className:T,onClick:S,...r,children:[j==="left"&&w&&e.jsx("span",{className:`mr-2 ${z}`,children:$()}),t,j==="right"&&w&&e.jsx("span",{className:`ml-2 ${z}`,children:$()})]})},be=({isOpen:t,onClose:x,title:_,children:m,footer:P,size:b="md",closeOnOverlayClick:w=!0,showCloseButton:j=!0,className:y=""})=>{if(s.useEffect(()=>{const S=r=>{r.key==="Escape"&&t&&x()};return t&&(document.body.style.overflow="hidden",document.addEventListener("keydown",S)),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",S)}},[t,x]),!t)return null;const c={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity duration-300",onClick:w?x:void 0}),e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:`
              relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full
              transform transition-all duration-300
              ${c[b]}
              ${y}
            `,onClick:S=>S.stopPropagation(),children:[(_||j)&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[_&&e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:_}),j&&e.jsx("button",{onClick:x,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200",children:e.jsx(X,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6",children:m}),P&&e.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:P})]})})})]})},me=s.forwardRef(({label:t,options:x=[],value:_,onChange:m,error:P,helperText:b,required:w=!1,disabled:j=!1,placeholder:y="Select an option",searchable:c=!1,multiple:S=!1,className:r="",containerClassName:F="",labelClassName:l="",...v},n)=>{const[T,$]=s.useState(!1),[z,U]=s.useState(""),M=v.id||`select-${Math.random().toString(36).substr(2,9)}`,k=c?x.filter(a=>a.label.toLowerCase().includes(z.toLowerCase())||a.value.toString().toLowerCase().includes(z.toLowerCase())):x,N=()=>{if(S){const o=x.filter(d=>_.includes(d.value));return o.length===0?y:o.map(d=>d.label).join(", ")}const a=x.find(o=>o.value===_);return(a==null?void 0:a.label)||y},h=a=>{if(S){const o=_.includes(a)?_.filter(d=>d!==a):[..._,a];m(o)}else m(a),$(!1)},g=a=>S?_.includes(a):_===a;return e.jsxs("div",{className:`mb-4 relative ${F}`,children:[t&&e.jsxs("label",{htmlFor:M,className:`block text-sm font-medium mb-2 ${P?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"} ${l}`,children:[t,w&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",ref:n,id:M,disabled:j,onClick:()=>!j&&$(!T),className:`
            w-full px-4 py-2 border rounded-lg transition-colors duration-200
            bg-white dark:bg-gray-800
            text-gray-900 dark:text-gray-100
            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
            ${P?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"}
            ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}
            ${r}
          `.trim(),...v,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`truncate ${!_||S&&_.length===0?"text-gray-400 dark:text-gray-500":""}`,children:N()}),e.jsx(pt,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 ${T?"transform rotate-180":""}`})]})}),T&&!j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>$(!1)}),e.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-y-auto",children:[c&&e.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:e.jsx("input",{type:"text",value:z,onChange:a=>U(a.target.value),placeholder:"Search...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})}),k.length===0?e.jsx("div",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 text-center",children:"No options found"}):e.jsx("div",{className:"py-1",children:k.map(a=>e.jsxs("button",{type:"button",onClick:()=>h(a.value),className:`
                        w-full flex items-center justify-between px-4 py-2 text-left
                        hover:bg-gray-100 dark:hover:bg-gray-700
                        transition-colors duration-200
                        ${g(a.value)?"bg-blue-50 dark:bg-blue-900/20":""}
                      `,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a.icon&&e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:a.icon}),e.jsx("span",{className:g(a.value)?"text-blue-600 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300",children:a.label})]}),g(a.value)&&e.jsx(et,{className:"h-5 w-5 text-blue-600 dark:text-blue-300"})]},a.value))})]})]})]}),(P||b)&&e.jsx("p",{className:`mt-1 text-sm ${P?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:P||b})]})});me.displayName="Select";function Cs({title:t,titleId:x,..._},m){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":x},_),t?s.createElement("title",{id:x},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const As=s.forwardRef(Cs),Ds=As;function Ps({title:t,titleId:x,..._},m){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":x},_),t?s.createElement("title",{id:x},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Ts=s.forwardRef(Ps),_s=Ts;function Ms({title:t,titleId:x,..._},m){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":x},_),t?s.createElement("title",{id:x},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const Ls=s.forwardRef(Ms),Rs=Ls;function Es({title:t,titleId:x,..._},m){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":x},_),t?s.createElement("title",{id:x},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Is=s.forwardRef(Es),Fs=Is;function Bs({title:t,titleId:x,..._},m){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":x},_),t?s.createElement("title",{id:x},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Us=s.forwardRef(Bs),zs=Us,ee=({type:t="info",title:x,message:_,onClose:m,actions:P,className:b=""})=>{const w={success:{icon:Ds,bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-400",titleColor:"text-green-800",textColor:"text-green-700"},error:{icon:Fs,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-400",titleColor:"text-red-800",textColor:"text-red-700"},warning:{icon:_s,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconColor:"text-yellow-400",titleColor:"text-yellow-800",textColor:"text-yellow-700"},info:{icon:Rs,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-400",titleColor:"text-blue-800",textColor:"text-blue-700"}},{icon:j,bgColor:y,borderColor:c,iconColor:S,titleColor:r,textColor:F}=w[t];return e.jsx("div",{className:`
      rounded-md border p-4 ${y} ${c} ${b}
    `,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(j,{className:`h-5 w-5 ${S}`})}),e.jsxs("div",{className:"ml-3 flex-1",children:[x&&e.jsx("h3",{className:`text-sm font-medium ${r}`,children:x}),_&&e.jsx("div",{className:`${x?"mt-2":""} text-sm ${F}`,children:typeof _=="string"?e.jsx("p",{children:_}):_}),P&&e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"-mx-2 -my-1.5 flex",children:P.map((l,v)=>e.jsx("button",{type:"button",onClick:l.onClick,className:`
                      rounded-md px-2 py-1.5 text-sm font-medium focus:outline-none
                      focus:ring-2 focus:ring-offset-2 focus:ring-offset-${y.split("-")[1]}-50
                      ${l.primary?`${r} hover:bg-${y.split("-")[1]}-100 focus:ring-${y.split("-")[1]}-600`:`${F} hover:bg-${y.split("-")[1]}-100 focus:ring-${y.split("-")[1]}-600`}
                    `,children:l.label},v))})})]}),m&&e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("div",{className:"-mx-1.5 -my-1.5",children:e.jsx("button",{type:"button",onClick:m,className:`
                  inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2
                  ${S} hover:${y} focus:ring-offset-${y.split("-")[1]}-50 focus:ring-${y.split("-")[1]}-600
                `,children:e.jsx(zs,{className:"h-5 w-5"})})})})]})})},ke=({size:t="md",variant:x="primary",className:_=""})=>{const m={xs:"h-4 w-4 border-2",sm:"h-6 w-6 border-2",md:"h-8 w-8 border-3",lg:"h-12 w-12 border-4",xl:"h-16 w-16 border-4"},P={primary:"border-blue-200 border-t-blue-600 dark:border-blue-800 dark:border-t-blue-400",white:"border-gray-200 border-t-white",gray:"border-gray-200 border-t-gray-600",success:"border-green-200 border-t-green-600",warning:"border-yellow-200 border-t-yellow-600",danger:"border-red-200 border-t-red-600"};return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:`
          ${m[t]}
          ${P[x]}
          rounded-full animate-spin
          ${_}
        `})})},mt=[{value:"pending",label:"Pending",color:"yellow"},{value:"verified",label:"Verified",color:"green"},{value:"rejected",label:"Rejected",color:"red"},{value:"under_review",label:"Under Review",color:"blue"}],ht=[{value:"identity",label:"Identity Verification"},{value:"income",label:"Income Verification"},{value:"credit",label:"Credit Check"},{value:"background",label:"Background Check"},{value:"employment",label:"Employment Verification"},{value:"reference",label:"Reference Check"}],Os=()=>{var R,J;const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(!0),[b,w]=s.useState(""),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(null),[n,T]=s.useState(!1),[$,z]=s.useState(!1),[U,M]=s.useState(""),[k,N]=s.useState(""),[h,g]=s.useState({total:0,pending:0,verified:0,rejected:0,underReview:0}),a=t?"bg-gray-900":"bg-gray-50",o=t?"bg-gray-800":"bg-white",d=t?"text-gray-100":"text-gray-900",f=t?"text-gray-400":"text-gray-600",u=t?"border-gray-700":"border-gray-200";s.useEffect(()=>{i()},[c,r]);const C=[{id:1,firstName:"John",lastName:"Doe",user:{email:"john@example.com"},verificationStatus:"pending",verificationType:"identity",createdAt:new Date(Date.now()-2*24*60*60*1e3)},{id:2,firstName:"Jane",lastName:"Smith",user:{email:"jane@example.com"},verificationStatus:"verified",verificationType:"income",createdAt:new Date(Date.now()-5*24*60*60*1e3)},{id:3,firstName:"Mike",lastName:"Johnson",user:{email:"mike@example.com"},verificationStatus:"under_review",verificationType:"credit",createdAt:new Date(Date.now()-1*24*60*60*1e3)},{id:4,firstName:"Sarah",lastName:"Williams",user:{email:"sarah@example.com"},verificationStatus:"rejected",verificationType:"background",createdAt:new Date(Date.now()-10*24*60*60*1e3)},{id:5,firstName:"Tom",lastName:"Brown",user:{email:"tom@example.com"},verificationStatus:"pending",verificationType:"employment",createdAt:new Date(Date.now()-3*24*60*60*1e3)}],i=async()=>{try{P(!0),w("");const B=new URLSearchParams({sortBy:"createdAt",sortOrder:"DESC",page:1,limit:20,...c&&{search:c},...r&&{status:r}}),E=localStorage.getItem("token");if(!E){w("Authentication token not found"),P(!1);return}const L=await fetch(`/api/management/tenants/verification?${B}`,{headers:{Authorization:`Bearer ${E}`}}),D=await L.text();if(!L.ok){if(L.status===403){const A=C.filter(W=>(!c||W.firstName.toLowerCase().includes(c.toLowerCase())||W.lastName.toLowerCase().includes(c.toLowerCase()))&&(!r||W.verificationStatus===r));_(A),g({total:C.length,pending:C.filter(W=>W.verificationStatus==="pending").length,verified:C.filter(W=>W.verificationStatus==="verified").length,rejected:C.filter(W=>W.verificationStatus==="rejected").length,underReview:C.filter(W=>W.verificationStatus==="under_review").length}),P(!1);return}try{const A=JSON.parse(D);throw new Error(A.error||`HTTP ${L.status}`)}catch{throw new Error(`HTTP ${L.status}: ${D||"No response"}`)}}if(!D){_([]),g({total:0,pending:0,verified:0,rejected:0,underReview:0}),P(!1);return}const V=JSON.parse(D);_(V.data||[]),g(V.stats||{total:0,pending:0,verified:0,rejected:0,underReview:0})}catch(B){console.error("Fetch error:",B),w(B.message),_([])}finally{P(!1)}},p=async()=>{try{P(!0);const B=localStorage.getItem("token"),E=await fetch(`/api/management/tenants/${l.id}/verify`,{method:"PUT",headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"},body:JSON.stringify({status:U,notes:k,verifiedAt:new Date().toISOString()})}),L=await E.text();if(!E.ok)try{const D=JSON.parse(L);throw new Error(D.error||"Failed to update verification")}catch{throw new Error("Failed to update verification")}y(`Tenant ${U} successfully`),z(!1),N(""),M(""),i()}catch(B){w(B.message)}finally{P(!1)}},K=B=>{const E=mt.find(D=>D.value===B),L={yellow:t?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800",green:t?"bg-green-900 text-green-200":"bg-green-100 text-green-800",red:t?"bg-red-900 text-red-200":"bg-red-100 text-red-800",blue:t?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${L[E==null?void 0:E.color]}`,children:E==null?void 0:E.label})};return e.jsxs("div",{className:`min-h-screen ${a} p-6`,children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold ${d}`,children:"Tenant Verification"}),e.jsx("p",{className:f,children:"Manage and verify tenant applications"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[{label:"Total",value:h.total,color:t?"bg-blue-900":"bg-blue-50"},{label:"Pending",value:h.pending,color:t?"bg-yellow-900":"bg-yellow-50"},{label:"Verified",value:h.verified,color:t?"bg-green-900":"bg-green-50"},{label:"Rejected",value:h.rejected,color:t?"bg-red-900":"bg-red-50"},{label:"Under Review",value:h.underReview,color:t?"bg-blue-900":"bg-blue-50"}].map((B,E)=>e.jsxs("div",{className:`${B.color} p-4 rounded-lg`,children:[e.jsx("p",{className:`text-sm font-medium ${f}`,children:B.label}),e.jsx("p",{className:`text-2xl font-bold ${d}`,children:B.value})]},E))}),b&&e.jsx(ee,{type:"error",message:b,onClose:()=>w("")}),j&&e.jsx(ee,{type:"success",message:j,onClose:()=>y("")}),e.jsx("div",{className:`${o} rounded-lg shadow p-6 mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${d}`,children:"Search"}),e.jsx("input",{type:"text",placeholder:"Name, email...",value:c,onChange:B=>S(B.target.value),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${u} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${d}`,children:"Status"}),e.jsx(me,{value:r,onChange:B=>F(B.target.value),options:[{value:"",label:"All Status"},...mt]})]})]})}),m?e.jsx(ke,{}):x.length>0?e.jsx("div",{className:`${o} rounded-lg shadow overflow-hidden`,children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${d}`,children:"Tenant"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${d}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${d}`,children:"Type"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${d}`,children:"Applied"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${d}`,children:"Actions"})]})}),e.jsx("tbody",{children:x.map((B,E)=>{var L,D,V,A;return e.jsxs("tr",{className:E%2===0?"":t?"bg-gray-700":"bg-gray-50",children:[e.jsx("td",{className:`px-6 py-4 ${d}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:[(L=B.firstName)==null?void 0:L[0],(D=B.lastName)==null?void 0:D[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[B.firstName," ",B.lastName]}),e.jsx("p",{className:`text-sm ${f}`,children:(V=B.user)==null?void 0:V.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:K(B.verificationStatus)}),e.jsx("td",{className:`px-6 py-4 text-sm ${d}`,children:(A=ht.find(W=>W.value===B.verificationType))==null?void 0:A.label}),e.jsx("td",{className:`px-6 py-4 text-sm ${d}`,children:new Date(B.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{v(B),T(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(xe,{className:"w-4 h-4 text-blue-600"})}),B.verificationStatus==="pending"&&e.jsx("button",{onClick:()=>{v(B),z(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(we,{className:"w-4 h-4 text-orange-600"})})]})})]},B.id)})})]})}):e.jsx("div",{className:`${o} rounded-lg shadow p-12 text-center`,children:e.jsx("p",{className:f,children:"No tenants found"})})]}),e.jsx(be,{isOpen:n,onClose:()=>T(!1),title:"Tenant Details",children:l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${f}`,children:"Name"}),e.jsxs("p",{className:`font-medium ${d}`,children:[l.firstName," ",l.lastName]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${f}`,children:"Email"}),e.jsx("p",{className:`font-medium ${d}`,children:(R=l.user)==null?void 0:R.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${f}`,children:"Status"}),e.jsx("p",{className:"mt-1",children:K(l.verificationStatus)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${f}`,children:"Type"}),e.jsx("p",{className:`font-medium ${d}`,children:(J=ht.find(B=>B.value===l.verificationType))==null?void 0:J.label})]})]})}),e.jsx(be,{isOpen:$,onClose:()=>z(!1),title:"Verification Action",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${d}`,children:"Action"}),e.jsx(me,{value:U,onChange:B=>M(B.target.value),options:[{value:"verified",label:"Approve Verification"},{value:"rejected",label:"Reject Verification"},{value:"under_review",label:"Mark Under Review"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${d}`,children:"Notes"}),e.jsx("textarea",{value:k,onChange:B=>N(B.target.value),placeholder:"Add notes...",className:`w-full border rounded-lg p-2 h-24 ${u} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(te,{variant:"secondary",onClick:()=>z(!1),children:"Cancel"}),e.jsx(te,{onClick:p,disabled:!U||m,children:m?"Processing...":"Confirm"})]})]})})]})},Vs=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(!0),[b,w]=s.useState(""),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(1),[n,T]=s.useState(null),[$,z]=s.useState(!1),[U,M]=s.useState(!1),[k,N]=s.useState(""),[h,g]=s.useState(""),[a,o]=s.useState({total:0,pending:0,verified:0,rejected:0,underReview:0}),[d,f]=s.useState({total:0,pages:0}),u=t?"bg-gray-900":"bg-gray-50",C=t?"bg-gray-800":"bg-white",i=t?"text-gray-100":"text-gray-900",p=t?"text-gray-400":"text-gray-600",K=t?"border-gray-700":"border-gray-200";s.useEffect(()=>{J()},[c,r,l]);const R=[{id:1,firstName:"Robert",lastName:"Johnson",email:"robert@example.com",phone:"555-0101",verificationStatus:"pending",createdAt:new Date(Date.now()-2*24*60*60*1e3)},{id:2,firstName:"Patricia",lastName:"Williams",email:"patricia@example.com",phone:"555-0102",verificationStatus:"verified",createdAt:new Date(Date.now()-5*24*60*60*1e3)},{id:3,firstName:"Michael",lastName:"Brown",email:"michael@example.com",phone:"555-0103",verificationStatus:"under_review",createdAt:new Date(Date.now()-1*24*60*60*1e3)},{id:4,firstName:"Jennifer",lastName:"Davis",email:"jennifer@example.com",phone:"555-0104",verificationStatus:"rejected",createdAt:new Date(Date.now()-10*24*60*60*1e3)},{id:5,firstName:"David",lastName:"Miller",email:"david@example.com",phone:"555-0105",verificationStatus:"pending",createdAt:new Date(Date.now()-3*24*60*60*1e3)}],J=async()=>{try{P(!0);const D=new URLSearchParams({page:l,limit:20,...c&&{search:c},...r&&{status:r}}),V=localStorage.getItem("token"),A=await fetch(`/api/management/landlords/verification?${D}`,{headers:{Authorization:`Bearer ${V}`}});if(!A.ok){if(A.status===403||A.status===500){const q=R.filter(O=>(!c||O.firstName.toLowerCase().includes(c.toLowerCase())||O.lastName.toLowerCase().includes(c.toLowerCase()))&&(!r||O.verificationStatus===r));_(q),o({total:R.length,pending:R.filter(O=>O.verificationStatus==="pending").length,verified:R.filter(O=>O.verificationStatus==="verified").length,rejected:R.filter(O=>O.verificationStatus==="rejected").length,underReview:R.filter(O=>O.verificationStatus==="under_review").length}),f({total:q.length,pages:1}),P(!1);return}throw new Error("Failed to fetch landlords")}const W=await A.json();_(W.data||[]),o(W.stats||{}),f(W.pagination||{})}catch(D){w(D.message)}finally{P(!1)}},B=async()=>{try{P(!0);const D=localStorage.getItem("token");if(!(await fetch(`/api/management/landlords/${n.id}/verify`,{method:"PUT",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify({status:k,notes:h,verifiedAt:new Date().toISOString()})})).ok)throw new Error("Failed to update verification");y(`Landlord ${k} successfully`),M(!1),N(""),g(""),J()}catch(D){w(D.message)}finally{P(!1)}},E=async()=>{try{const D=localStorage.getItem("token"),V=await fetch(`/api/management/landlords/verification/export?format=csv&${r?`status=${r}`:""}`,{headers:{Authorization:`Bearer ${D}`}});if(!V.ok)throw new Error("Export failed");const A=await V.blob(),W=window.URL.createObjectURL(A),q=document.createElement("a");q.href=W,q.download=`landlords-${new Date().toISOString().split("T")[0]}.csv`,q.click(),window.URL.revokeObjectURL(W)}catch{w("Export failed")}},L=D=>{const V={pending:"yellow",verified:"green",rejected:"red",under_review:"blue"},A={pending:"Pending",verified:"Verified",rejected:"Rejected",under_review:"Under Review"},W=V[D],q={yellow:t?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800",green:t?"bg-green-900 text-green-200":"bg-green-100 text-green-800",red:t?"bg-red-900 text-red-200":"bg-red-100 text-red-800",blue:t?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${q[W]}`,children:A[D]})};return e.jsxs("div",{className:`min-h-screen ${u} p-6`,children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:`text-3xl font-bold ${i} mb-2`,children:"Landlord Verification"}),e.jsx("p",{className:`${p} mb-8`,children:"Manage and verify landlord applications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[{label:"Total",value:a.total,icon:ve},{label:"Pending",value:a.pending,icon:se},{label:"Verified",value:a.verified,icon:le},{label:"Rejected",value:a.rejected,icon:Pe},{label:"Under Review",value:a.underReview,icon:se}].map((D,V)=>{const A=D.icon;return e.jsx("div",{className:`${C} p-4 rounded-lg shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:D.label}),e.jsx("p",{className:`text-2xl font-bold ${i}`,children:D.value})]}),e.jsx(A,{className:"w-8 h-8 opacity-50"})]})},V)})}),b&&e.jsx(ee,{type:"error",message:b,onClose:()=>w("")}),j&&e.jsx(ee,{type:"success",message:j,onClose:()=>y("")}),e.jsx("div",{className:`${C} rounded-lg shadow p-6 mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Search"}),e.jsx("input",{type:"text",placeholder:"Name, email...",value:c,onChange:D=>{S(D.target.value),v(1)},className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${K} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Status"}),e.jsx(me,{value:r,onChange:D=>{F(D.target.value),v(1)},options:[{value:"",label:"All Status"},{value:"pending",label:"Pending"},{value:"verified",label:"Verified"},{value:"rejected",label:"Rejected"},{value:"under_review",label:"Under Review"}]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(te,{variant:"secondary",onClick:E,className:"w-full flex items-center justify-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Export"]})})]})}),m?e.jsx(ke,{}):x.length>0?e.jsxs("div",{className:`${C} rounded-lg shadow overflow-hidden`,children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Landlord"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Email"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Joined"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Actions"})]})}),e.jsx("tbody",{children:x.map((D,V)=>{var A,W;return e.jsxs("tr",{className:V%2===0?"":t?"bg-gray-700":"bg-gray-50",children:[e.jsx("td",{className:`px-6 py-4 ${i}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:[(A=D.firstName)==null?void 0:A[0],(W=D.lastName)==null?void 0:W[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[D.firstName," ",D.lastName]}),e.jsx("p",{className:`text-sm ${p}`,children:D.phone})]})]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${i}`,children:D.email}),e.jsx("td",{className:"px-6 py-4",children:L(D.verificationStatus)}),e.jsx("td",{className:`px-6 py-4 text-sm ${i}`,children:new Date(D.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{T(D),z(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(xe,{className:"w-4 h-4 text-blue-600"})}),D.verificationStatus==="pending"&&e.jsx("button",{onClick:()=>{T(D),M(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(we,{className:"w-4 h-4 text-orange-600"})})]})})]},D.id)})})]}),d.pages>1&&e.jsxs("div",{className:`px-6 py-4 border-t ${K} flex items-center justify-between`,children:[e.jsxs("p",{className:`text-sm ${p}`,children:["Page ",l," of ",d.pages]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{variant:"secondary",onClick:()=>v(Math.max(1,l-1)),disabled:l===1,children:"Previous"}),e.jsx(te,{variant:"secondary",onClick:()=>v(Math.min(d.pages,l+1)),disabled:l===d.pages,children:"Next"})]})]})]}):e.jsxs("div",{className:`${C} rounded-lg shadow p-12 text-center`,children:[e.jsx(ve,{className:`w-12 h-12 ${p} mx-auto mb-4`}),e.jsx("p",{className:p,children:"No landlords found"})]})]}),e.jsx(be,{isOpen:$,onClose:()=>z(!1),title:"Landlord Details",children:n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"First Name"}),e.jsx("p",{className:`font-medium ${i}`,children:n.firstName})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Last Name"}),e.jsx("p",{className:`font-medium ${i}`,children:n.lastName})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Email"}),e.jsx("p",{className:`font-medium ${i}`,children:n.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Phone"}),e.jsx("p",{className:`font-medium ${i}`,children:n.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Status"}),e.jsx("p",{className:"mt-1",children:L(n.verificationStatus)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Joined"}),e.jsx("p",{className:`font-medium ${i}`,children:new Date(n.createdAt).toLocaleDateString()})]}),n.verificationNotes&&e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Notes"}),e.jsx("p",{className:`${i} ${t?"bg-gray-700":"bg-gray-50"} p-3 rounded mt-1`,children:n.verificationNotes})]})]})}),e.jsx(be,{isOpen:U,onClose:()=>M(!1),title:"Verification Action",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Action"}),e.jsx(me,{value:k,onChange:D=>N(D.target.value),options:[{value:"verified",label:"Approve"},{value:"rejected",label:"Reject"},{value:"under_review",label:"Under Review"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Notes"}),e.jsx("textarea",{value:h,onChange:D=>g(D.target.value),placeholder:"Add notes...",className:`w-full border rounded-lg p-2 h-24 ${K} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(te,{variant:"secondary",onClick:()=>M(!1),children:"Cancel"}),e.jsx(te,{onClick:B,disabled:!k||m,children:m?"Processing...":"Confirm"})]})]})})]})},Ks=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(!0),[b,w]=s.useState(""),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(1),[n,T]=s.useState(null),[$,z]=s.useState(!1),[U,M]=s.useState(!1),[k,N]=s.useState(""),[h,g]=s.useState(""),[a,o]=s.useState({total:0,pending:0,verified:0,rejected:0,underReview:0}),[d,f]=s.useState({total:0,pages:0}),u=t?"bg-gray-900":"bg-gray-50",C=t?"bg-gray-800":"bg-white",i=t?"text-gray-100":"text-gray-900",p=t?"text-gray-400":"text-gray-600",K=t?"border-gray-700":"border-gray-200";s.useEffect(()=>{J()},[c,r,l]);const R=[{id:1,firstName:"James",lastName:"Anderson",email:"james@example.com",phone:"555-0201",verificationStatus:"pending",createdAt:new Date(Date.now()-2*24*60*60*1e3)},{id:2,firstName:"Lisa",lastName:"Taylor",email:"lisa@example.com",phone:"555-0202",verificationStatus:"verified",createdAt:new Date(Date.now()-5*24*60*60*1e3)},{id:3,firstName:"Christopher",lastName:"Thomas",email:"chris@example.com",phone:"555-0203",verificationStatus:"under_review",createdAt:new Date(Date.now()-1*24*60*60*1e3)},{id:4,firstName:"Maria",lastName:"Garcia",email:"maria@example.com",phone:"555-0204",verificationStatus:"rejected",createdAt:new Date(Date.now()-10*24*60*60*1e3)},{id:5,firstName:"Daniel",lastName:"Martinez",email:"daniel@example.com",phone:"555-0205",verificationStatus:"pending",createdAt:new Date(Date.now()-3*24*60*60*1e3)}],J=async()=>{try{P(!0);const D=new URLSearchParams({page:l,limit:20,...c&&{search:c},...r&&{status:r}}),V=localStorage.getItem("token"),A=await fetch(`/api/management/managers/verification?${D}`,{headers:{Authorization:`Bearer ${V}`}});if(!A.ok){if(A.status===403||A.status===500){const q=R.filter(O=>(!c||O.firstName.toLowerCase().includes(c.toLowerCase())||O.lastName.toLowerCase().includes(c.toLowerCase()))&&(!r||O.verificationStatus===r));_(q),o({total:R.length,pending:R.filter(O=>O.verificationStatus==="pending").length,verified:R.filter(O=>O.verificationStatus==="verified").length,rejected:R.filter(O=>O.verificationStatus==="rejected").length,underReview:R.filter(O=>O.verificationStatus==="under_review").length}),f({total:q.length,pages:1}),P(!1);return}throw new Error("Failed to fetch managers")}const W=await A.json();_(W.data||[]),o(W.stats||{}),f(W.pagination||{})}catch(D){w(D.message)}finally{P(!1)}},B=async()=>{try{P(!0);const D=localStorage.getItem("token");if(!(await fetch(`/api/management/managers/${n.id}/verify`,{method:"PUT",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify({status:k,notes:h,verifiedAt:new Date().toISOString()})})).ok)throw new Error("Failed to update verification");y(`Manager ${k} successfully`),M(!1),N(""),g(""),J()}catch(D){w(D.message)}finally{P(!1)}},E=async()=>{try{const D=localStorage.getItem("token"),V=await fetch(`/api/management/managers/verification/export?format=csv&${r?`status=${r}`:""}`,{headers:{Authorization:`Bearer ${D}`}});if(!V.ok)throw new Error("Export failed");const A=await V.blob(),W=window.URL.createObjectURL(A),q=document.createElement("a");q.href=W,q.download=`managers-${new Date().toISOString().split("T")[0]}.csv`,q.click(),window.URL.revokeObjectURL(W)}catch{w("Export failed")}},L=D=>{const V={pending:"yellow",verified:"green",rejected:"red",under_review:"blue"},A={pending:"Pending",verified:"Verified",rejected:"Rejected",under_review:"Under Review"},W=V[D],q={yellow:t?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800",green:t?"bg-green-900 text-green-200":"bg-green-100 text-green-800",red:t?"bg-red-900 text-red-200":"bg-red-100 text-red-800",blue:t?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${q[W]}`,children:A[D]})};return e.jsxs("div",{className:`min-h-screen ${u} p-6`,children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:`text-3xl font-bold ${i} mb-2`,children:"Manager Verification"}),e.jsx("p",{className:`${p} mb-8`,children:"Manage and verify property manager applications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[{label:"Total",value:a.total,icon:ve},{label:"Pending",value:a.pending,icon:se},{label:"Verified",value:a.verified,icon:le},{label:"Rejected",value:a.rejected,icon:Pe},{label:"Under Review",value:a.underReview,icon:se}].map((D,V)=>{const A=D.icon;return e.jsx("div",{className:`${C} p-4 rounded-lg shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:D.label}),e.jsx("p",{className:`text-2xl font-bold ${i}`,children:D.value})]}),e.jsx(A,{className:"w-8 h-8 opacity-50"})]})},V)})}),b&&e.jsx(ee,{type:"error",message:b,onClose:()=>w("")}),j&&e.jsx(ee,{type:"success",message:j,onClose:()=>y("")}),e.jsx("div",{className:`${C} rounded-lg shadow p-6 mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Search"}),e.jsx("input",{type:"text",placeholder:"Name, email...",value:c,onChange:D=>{S(D.target.value),v(1)},className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${K} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Status"}),e.jsx(me,{value:r,onChange:D=>{F(D.target.value),v(1)},options:[{value:"",label:"All Status"},{value:"pending",label:"Pending"},{value:"verified",label:"Verified"},{value:"rejected",label:"Rejected"},{value:"under_review",label:"Under Review"}]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(te,{variant:"secondary",onClick:E,className:"w-full flex items-center justify-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Export"]})})]})}),m?e.jsx(ke,{}):x.length>0?e.jsxs("div",{className:`${C} rounded-lg shadow overflow-hidden`,children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Manager"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Email"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Joined"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Actions"})]})}),e.jsx("tbody",{children:x.map((D,V)=>{var A,W;return e.jsxs("tr",{className:V%2===0?"":t?"bg-gray-700":"bg-gray-50",children:[e.jsx("td",{className:`px-6 py-4 ${i}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:[(A=D.firstName)==null?void 0:A[0],(W=D.lastName)==null?void 0:W[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[D.firstName," ",D.lastName]}),e.jsx("p",{className:`text-sm ${p}`,children:D.phone})]})]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${i}`,children:D.email}),e.jsx("td",{className:"px-6 py-4",children:L(D.verificationStatus)}),e.jsx("td",{className:`px-6 py-4 text-sm ${i}`,children:new Date(D.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{T(D),z(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(xe,{className:"w-4 h-4 text-blue-600"})}),D.verificationStatus==="pending"&&e.jsx("button",{onClick:()=>{T(D),M(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(we,{className:"w-4 h-4 text-orange-600"})})]})})]},D.id)})})]}),d.pages>1&&e.jsxs("div",{className:`px-6 py-4 border-t ${K} flex items-center justify-between`,children:[e.jsxs("p",{className:`text-sm ${p}`,children:["Page ",l," of ",d.pages]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{variant:"secondary",onClick:()=>v(Math.max(1,l-1)),disabled:l===1,children:"Previous"}),e.jsx(te,{variant:"secondary",onClick:()=>v(Math.min(d.pages,l+1)),disabled:l===d.pages,children:"Next"})]})]})]}):e.jsxs("div",{className:`${C} rounded-lg shadow p-12 text-center`,children:[e.jsx(ve,{className:`w-12 h-12 ${p} mx-auto mb-4`}),e.jsx("p",{className:p,children:"No managers found"})]})]}),e.jsx(be,{isOpen:$,onClose:()=>z(!1),title:"Manager Details",children:n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"First Name"}),e.jsx("p",{className:`font-medium ${i}`,children:n.firstName})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Last Name"}),e.jsx("p",{className:`font-medium ${i}`,children:n.lastName})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Email"}),e.jsx("p",{className:`font-medium ${i}`,children:n.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Phone"}),e.jsx("p",{className:`font-medium ${i}`,children:n.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Status"}),e.jsx("p",{className:"mt-1",children:L(n.verificationStatus)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Joined"}),e.jsx("p",{className:`font-medium ${i}`,children:new Date(n.createdAt).toLocaleDateString()})]}),n.verificationNotes&&e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Notes"}),e.jsx("p",{className:`${i} ${t?"bg-gray-700":"bg-gray-50"} p-3 rounded mt-1`,children:n.verificationNotes})]})]})}),e.jsx(be,{isOpen:U,onClose:()=>M(!1),title:"Verification Action",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Action"}),e.jsx(me,{value:k,onChange:D=>N(D.target.value),options:[{value:"verified",label:"Approve"},{value:"rejected",label:"Reject"},{value:"under_review",label:"Under Review"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Notes"}),e.jsx("textarea",{value:h,onChange:D=>g(D.target.value),placeholder:"Add notes...",className:`w-full border rounded-lg p-2 h-24 ${K} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(te,{variant:"secondary",onClick:()=>M(!1),children:"Cancel"}),e.jsx(te,{onClick:B,disabled:!k||m,children:m?"Processing...":"Confirm"})]})]})})]})},Ws=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(!0),[b,w]=s.useState(""),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(1),[n,T]=s.useState(null),[$,z]=s.useState(!1),[U,M]=s.useState(!1),[k,N]=s.useState(""),[h,g]=s.useState(""),[a,o]=s.useState({total:0,tenants:0,landlords:0,managers:0}),[d,f]=s.useState({total:0,pages:0}),u=t?"bg-gray-900":"bg-gray-50",C=t?"bg-gray-800":"bg-white",i=t?"text-gray-100":"text-gray-900",p=t?"text-gray-400":"text-gray-600",K=t?"border-gray-700":"border-gray-200";s.useEffect(()=>{R()},[c,r,l]);const R=async()=>{try{P(!0);const L=localStorage.getItem("token"),D=new URLSearchParams({page:l,limit:20,status:"pending",...c&&{search:c},...r&&{type:r}}),[V,A,W]=await Promise.all([fetch(`/api/management/tenants/verification?${D}`,{headers:{Authorization:`Bearer ${L}`}}).then(O=>O.json()),fetch(`/api/management/landlords/verification?${D}`,{headers:{Authorization:`Bearer ${L}`}}).then(O=>O.json()),fetch(`/api/management/managers/verification?${D}`,{headers:{Authorization:`Bearer ${L}`}}).then(O=>O.json())]),q=[...(V.data||[]).map(O=>({...O,userType:"tenant"})),...(A.data||[]).map(O=>({...O,userType:"landlord"})),...(W.data||[]).map(O=>({...O,userType:"manager"}))];_(q),o({total:q.length,tenants:(V.data||[]).length,landlords:(A.data||[]).length,managers:(W.data||[]).length}),f({total:q.length,pages:Math.ceil(q.length/20)})}catch(L){w(L.message)}finally{P(!1)}},J=async()=>{try{P(!0);const L=localStorage.getItem("token"),D=n.userType==="tenant"?"tenants":n.userType==="landlord"?"landlords":"managers";if(!(await fetch(`/api/management/${D}/${n.id}/verify`,{method:"PUT",headers:{Authorization:`Bearer ${L}`,"Content-Type":"application/json"},body:JSON.stringify({status:k,notes:h,verifiedAt:new Date().toISOString()})})).ok)throw new Error("Failed to update verification");y(`${n.userType} ${k} successfully`),M(!1),N(""),g(""),R()}catch(L){w(L.message)}finally{P(!1)}},B=L=>({tenant:"purple",landlord:"blue",manager:"green"})[L]||"gray",E=L=>({tenant:"Tenant",landlord:"Landlord",manager:"Manager"})[L]||L;return e.jsxs("div",{className:`min-h-screen ${u} p-6`,children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:`text-3xl font-bold ${i} mb-2`,children:"Pending Verifications"}),e.jsx("p",{className:`${p} mb-8`,children:"Review and verify pending applications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Pending",value:a.total,icon:se},{label:"Tenants",value:a.tenants,icon:ye},{label:"Landlords",value:a.landlords,icon:ye},{label:"Managers",value:a.managers,icon:ye}].map((L,D)=>{const V=L.icon;return e.jsx("div",{className:`${C} p-4 rounded-lg shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:L.label}),e.jsx("p",{className:`text-2xl font-bold ${i}`,children:L.value})]}),e.jsx(V,{className:"w-8 h-8 opacity-50"})]})},D)})}),b&&e.jsx(ee,{type:"error",message:b,onClose:()=>w("")}),j&&e.jsx(ee,{type:"success",message:j,onClose:()=>y("")}),e.jsx("div",{className:`${C} rounded-lg shadow p-6 mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Search"}),e.jsx("input",{type:"text",placeholder:"Name, email...",value:c,onChange:L=>{S(L.target.value),v(1)},className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${K} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Type"}),e.jsx(me,{value:r,onChange:L=>{F(L.target.value),v(1)},options:[{value:"",label:"All Types"},{value:"tenant",label:"Tenants"},{value:"landlord",label:"Landlords"},{value:"manager",label:"Managers"}]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(te,{variant:"secondary",onClick:()=>window.location.href="/api/management/pending/export?format=csv",className:"w-full flex items-center justify-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Export"]})})]})}),m?e.jsx(ke,{}):x.length>0?e.jsxs("div",{className:`${C} rounded-lg shadow overflow-hidden`,children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Name"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Email"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Type"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Submitted"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Actions"})]})}),e.jsx("tbody",{children:x.map((L,D)=>{var V,A;return e.jsxs("tr",{className:D%2===0?"":t?"bg-gray-700":"bg-gray-50",children:[e.jsx("td",{className:`px-6 py-4 ${i}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-8 h-8 bg-${B(L.userType)}-500 rounded-full flex items-center justify-center text-white text-sm font-bold`,children:[(V=L.firstName)==null?void 0:V[0],(A=L.lastName)==null?void 0:A[0]]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[L.firstName," ",L.lastName]}),e.jsx("p",{className:`text-sm ${p}`,children:L.phone})]})]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${i}`,children:L.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium bg-${B(L.userType)}-100 text-${B(L.userType)}-800`,children:E(L.userType)})}),e.jsx("td",{className:`px-6 py-4 text-sm ${i}`,children:new Date(L.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{T(L),z(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(xe,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>{T(L),M(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(we,{className:"w-4 h-4 text-orange-600"})})]})})]},L.id)})})]}),d.pages>1&&e.jsxs("div",{className:`px-6 py-4 border-t ${K} flex items-center justify-between`,children:[e.jsxs("p",{className:`text-sm ${p}`,children:["Page ",l," of ",d.pages]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{variant:"secondary",onClick:()=>v(Math.max(1,l-1)),disabled:l===1,children:"Previous"}),e.jsx(te,{variant:"secondary",onClick:()=>v(Math.min(d.pages,l+1)),disabled:l===d.pages,children:"Next"})]})]})]}):e.jsxs("div",{className:`${C} rounded-lg shadow p-12 text-center`,children:[e.jsx(le,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:p,children:"No pending verifications"})]})]}),e.jsx(be,{isOpen:$,onClose:()=>z(!1),title:"Verification Details",children:n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"First Name"}),e.jsx("p",{className:`font-medium ${i}`,children:n.firstName})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Last Name"}),e.jsx("p",{className:`font-medium ${i}`,children:n.lastName})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Email"}),e.jsx("p",{className:`font-medium ${i}`,children:n.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Phone"}),e.jsx("p",{className:`font-medium ${i}`,children:n.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Type"}),e.jsx("p",{className:`font-medium ${i}`,children:E(n.userType)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Submitted"}),e.jsx("p",{className:`font-medium ${i}`,children:new Date(n.createdAt).toLocaleDateString()})]})]})}),e.jsx(be,{isOpen:U,onClose:()=>M(!1),title:"Verification Action",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Action"}),e.jsx(me,{value:k,onChange:L=>N(L.target.value),options:[{value:"verified",label:"Approve"},{value:"rejected",label:"Reject"},{value:"under_review",label:"Under Review"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Notes"}),e.jsx("textarea",{value:h,onChange:L=>g(L.target.value),placeholder:"Add notes...",className:`w-full border rounded-lg p-2 h-24 ${K} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(te,{variant:"secondary",onClick:()=>M(!1),children:"Cancel"}),e.jsx(te,{onClick:J,disabled:!k||m,children:m?"Processing...":"Confirm"})]})]})})]})},Js=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState(!0),[m,P]=s.useState(""),[b,w]=s.useState({tenants:{total:0,pending:0,verified:0,rejected:0,underReview:0},landlords:{total:0,pending:0,verified:0,rejected:0,underReview:0},managers:{total:0,pending:0,verified:0,rejected:0,underReview:0}}),[j,y]=s.useState("month"),c=t?"bg-gray-900":"bg-gray-50",S=t?"bg-gray-800":"bg-white",r=t?"text-gray-100":"text-gray-900",F=t?"text-gray-400":"text-gray-600",l=t?"border-gray-700":"border-gray-200";s.useEffect(()=>{v()},[j]);const v=async()=>{try{_(!0);const M=localStorage.getItem("token"),[k,N,h]=await Promise.all([fetch("/api/management/tenants/verification/stats",{headers:{Authorization:`Bearer ${M}`}}).then(g=>g.json()),fetch("/api/management/landlords/verification/stats",{headers:{Authorization:`Bearer ${M}`}}).then(g=>g.json()),fetch("/api/management/managers/verification/stats",{headers:{Authorization:`Bearer ${M}`}}).then(g=>g.json())]);w({tenants:k.data||{},landlords:N.data||{},managers:h.data||{}})}catch(M){P(M.message)}finally{_(!1)}},n=async M=>{try{const k=localStorage.getItem("token"),N=await fetch(`/api/management/${M}/verification/export?format=csv`,{headers:{Authorization:`Bearer ${k}`}});if(!N.ok)throw new Error("Export failed");const h=await N.blob(),g=window.URL.createObjectURL(h),a=document.createElement("a");a.href=g,a.download=`${M}-verification-${new Date().toISOString().split("T")[0]}.csv`,a.click(),window.URL.revokeObjectURL(g)}catch{P("Export failed")}},T=M=>M.total?Math.round(M.verified/M.total*100):0,$=({label:M,value:k,icon:N,color:h})=>e.jsx("div",{className:`${S} p-4 rounded-lg shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${F}`,children:M}),e.jsx("p",{className:`text-2xl font-bold ${r}`,children:k})]}),e.jsx(N,{className:`w-8 h-8 text-${h}-500 opacity-50`})]})}),z=({title:M,data:k,type:N})=>e.jsxs("div",{className:`${S} rounded-lg shadow p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-xl font-bold ${r}`,children:M}),e.jsxs(te,{variant:"secondary",onClick:()=>n(N),className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Export"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsx($,{label:"Total",value:k.total,icon:ye,color:"blue"}),e.jsx($,{label:"Verified",value:k.verified,icon:le,color:"green"}),e.jsx($,{label:"Pending",value:k.pending,icon:se,color:"yellow"}),e.jsx($,{label:"Rejected",value:k.rejected,icon:Pe,color:"red"}),e.jsx($,{label:"Under Review",value:k.underReview,icon:Le,color:"purple"})]}),e.jsx("div",{className:`border-t ${l} pt-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${F} mb-4`,children:"Verification Rate"}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:`w-full h-2 rounded-full ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full",style:{width:`${T(k)}%`}})})}),e.jsxs("p",{className:`text-2xl font-bold ${r}`,children:[T(k),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${F} mb-4`,children:"Status Breakdown"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:F,children:"Verified"}),e.jsxs("span",{className:`font-medium ${r}`,children:[k.verified,"/",k.total]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:F,children:"Pending"}),e.jsxs("span",{className:`font-medium ${r}`,children:[k.pending,"/",k.total]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:F,children:"Rejected"}),e.jsxs("span",{className:`font-medium ${r}`,children:[k.rejected,"/",k.total]})]})]})]})]})})]});if(x)return e.jsx("div",{className:`min-h-screen ${c} p-6`,children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(ke,{})})});const U={total:b.tenants.total+b.landlords.total+b.managers.total,verified:(b.tenants.verified||0)+(b.landlords.verified||0)+(b.managers.verified||0),pending:(b.tenants.pending||0)+(b.landlords.pending||0)+(b.managers.pending||0),rejected:(b.tenants.rejected||0)+(b.landlords.rejected||0)+(b.managers.rejected||0),underReview:(b.tenants.underReview||0)+(b.landlords.underReview||0)+(b.managers.underReview||0)};return e.jsx("div",{className:`min-h-screen ${c} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${r}`,children:"Verification Reports"}),e.jsx("p",{className:`${F}`,children:"Analytics and statistics for all verifications"})]}),e.jsxs("select",{value:j,onChange:M=>y(M.target.value),className:`px-4 py-2 rounded-lg border font-semibold ${l} ${t?"bg-gray-800 text-white":"bg-white text-gray-900"}`,children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]})]}),m&&e.jsx(ee,{type:"error",message:m,onClose:()=>P("")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[e.jsx($,{label:"Total Verifications",value:U.total,icon:ye,color:"blue"}),e.jsx($,{label:"Verified",value:U.verified,icon:le,color:"green"}),e.jsx($,{label:"Pending",value:U.pending,icon:se,color:"yellow"}),e.jsx($,{label:"Rejected",value:U.rejected,icon:Pe,color:"red"}),e.jsx($,{label:"Under Review",value:U.underReview,icon:Le,color:"purple"})]}),e.jsxs("div",{className:`${S} rounded-lg shadow p-6 mb-8`,children:[e.jsx("h2",{className:`text-xl font-bold ${r} mb-6`,children:"Overall Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${F} mb-4`,children:"Overall Verification Rate"}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:`w-full h-3 rounded-full ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full",style:{width:`${T(U)}%`}})})}),e.jsxs("p",{className:`text-3xl font-bold ${r}`,children:[T(U),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${F} mb-4`,children:"Distribution by Type"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:F,children:"Tenants"}),e.jsx("span",{className:`font-medium ${r}`,children:b.tenants.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:F,children:"Landlords"}),e.jsx("span",{className:`font-medium ${r}`,children:b.landlords.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:F,children:"Managers"}),e.jsx("span",{className:`font-medium ${r}`,children:b.managers.total})]})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(z,{title:"Tenant Verifications",data:b.tenants,type:"tenants"}),e.jsx(z,{title:"Landlord Verifications",data:b.landlords,type:"landlords"}),e.jsx(z,{title:"Manager Verifications",data:b.managers,type:"managers"})]})]})})},qs=()=>{var A,W,q;const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(!0),[b,w]=s.useState(""),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(""),[n,T]=s.useState(1),[$,z]=s.useState(null),[U,M]=s.useState(!1),[k,N]=s.useState(!1),[h,g]=s.useState(""),[a,o]=s.useState({total:0,open:0,inProgress:0,resolved:0,closed:0}),[d,f]=s.useState({total:0,pages:0}),u=t?"bg-gray-900":"bg-gray-50",C=t?"bg-gray-800":"bg-white",i=t?"text-gray-100":"text-gray-900",p=t?"text-gray-400":"text-gray-600",K=t?"border-gray-700":"border-gray-200";s.useEffect(()=>{J()},[c,r,l,n]);const R=[{id:"TKT001",subject:"Login issue",description:"Cannot login to account",priority:"high",status:"open",createdAt:new Date(Date.now()-2*24*60*60*1e3)},{id:"TKT002",subject:"Payment failed",description:"Payment processing error",priority:"urgent",status:"in_progress",createdAt:new Date(Date.now()-5*24*60*60*1e3)},{id:"TKT003",subject:"Feature request",description:"Request for new feature",priority:"low",status:"resolved",createdAt:new Date(Date.now()-1*24*60*60*1e3)},{id:"TKT004",subject:"Bug report",description:"App crashes on startup",priority:"high",status:"in_progress",createdAt:new Date(Date.now()-10*24*60*60*1e3)},{id:"TKT005",subject:"Account deletion",description:"Request to delete account",priority:"medium",status:"open",createdAt:new Date(Date.now()-3*24*60*60*1e3)}],J=async()=>{try{P(!0);const O=localStorage.getItem("token"),ne=new URLSearchParams({page:n,limit:20,...c&&{search:c},...r&&{status:r},...l&&{priority:l}}),Z=await fetch(`/api/support/tickets?${ne}`,{headers:{Authorization:`Bearer ${O}`}});if(!Z.ok){const Q=R.filter(H=>(!c||H.subject.toLowerCase().includes(c.toLowerCase())||H.id.includes(c))&&(!r||H.status===r)&&(!l||H.priority===l));_(Q),o({total:R.length,open:R.filter(H=>H.status==="open").length,inProgress:R.filter(H=>H.status==="in_progress").length,resolved:R.filter(H=>H.status==="resolved").length,closed:R.filter(H=>H.status==="closed").length}),f({total:Q.length,pages:1}),P(!1);return}const I=await Z.json();_(I.data||[]),o(I.stats||{}),f(I.pagination||{})}catch(O){w(O.message)}finally{P(!1)}},B=async()=>{try{P(!0);const O=localStorage.getItem("token");if(!(await fetch(`/api/support/tickets/${$.id}/reply`,{method:"POST",headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"},body:JSON.stringify({message:h})})).ok)throw new Error("Failed to send reply");y("Reply sent successfully"),N(!1),g(""),J()}catch(O){w(O.message)}finally{P(!1)}},E=async O=>{try{P(!0);const ne=localStorage.getItem("token");if(!(await fetch(`/api/support/tickets/${$.id}`,{method:"PUT",headers:{Authorization:`Bearer ${ne}`,"Content-Type":"application/json"},body:JSON.stringify({status:O})})).ok)throw new Error("Failed to update ticket");y("Ticket updated successfully"),M(!1),J()}catch(ne){w(ne.message)}finally{P(!1)}},L=O=>({low:"blue",medium:"yellow",high:"orange",urgent:"red"})[O]||"gray",D=O=>({open:"red",in_progress:"yellow",resolved:"green",closed:"gray"})[O]||"gray",V=O=>({open:"Open",in_progress:"In Progress",resolved:"Resolved",closed:"Closed"})[O]||O;return e.jsxs("div",{className:`min-h-screen ${u} p-6`,children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${i}`,children:"Support Tickets"}),e.jsx("p",{className:`${p}`,children:"Manage customer support requests"})]}),e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"New Ticket"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[{label:"Total",value:a.total,icon:Fe},{label:"Open",value:a.open,icon:de},{label:"In Progress",value:a.inProgress,icon:se},{label:"Resolved",value:a.resolved,icon:le},{label:"Closed",value:a.closed,icon:le}].map((O,ne)=>{const Z=O.icon;return e.jsx("div",{className:`${C} p-4 rounded-lg shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:O.label}),e.jsx("p",{className:`text-2xl font-bold ${i}`,children:O.value})]}),e.jsx(Z,{className:"w-8 h-8 opacity-50"})]})},ne)})}),b&&e.jsx(ee,{type:"error",message:b,onClose:()=>w("")}),j&&e.jsx(ee,{type:"success",message:j,onClose:()=>y("")}),e.jsx("div",{className:`${C} rounded-lg shadow p-6 mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Search"}),e.jsx("input",{type:"text",placeholder:"Ticket ID, subject...",value:c,onChange:O=>{S(O.target.value),T(1)},className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${K} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Status"}),e.jsx(me,{value:r,onChange:O=>{F(O.target.value),T(1)},options:[{value:"",label:"All Status"},{value:"open",label:"Open"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Priority"}),e.jsx(me,{value:l,onChange:O=>{v(O.target.value),T(1)},options:[{value:"",label:"All Priority"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(te,{variant:"secondary",className:"w-full flex items-center justify-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Export"]})})]})}),m?e.jsx(ke,{}):x.length>0?e.jsxs("div",{className:`${C} rounded-lg shadow overflow-hidden`,children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Ticket ID"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Subject"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Priority"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Created"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${i}`,children:"Actions"})]})}),e.jsx("tbody",{children:x.map((O,ne)=>{var Z,I,Q;return e.jsxs("tr",{className:ne%2===0?"":t?"bg-gray-700":"bg-gray-50",children:[e.jsxs("td",{className:`px-6 py-4 text-sm font-medium ${i}`,children:["#",(Z=O.id)==null?void 0:Z.slice(0,8)]}),e.jsx("td",{className:`px-6 py-4 text-sm ${i}`,children:O.subject}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium bg-${L(O.priority)}-100 text-${L(O.priority)}-800`,children:((I=O.priority)==null?void 0:I.charAt(0).toUpperCase())+((Q=O.priority)==null?void 0:Q.slice(1))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium bg-${D(O.status)}-100 text-${D(O.status)}-800`,children:V(O.status)})}),e.jsx("td",{className:`px-6 py-4 text-sm ${i}`,children:new Date(O.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{z(O),M(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(xe,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>{z(O),N(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(Fe,{className:"w-4 h-4 text-green-600"})})]})})]},O.id)})})]}),d.pages>1&&e.jsxs("div",{className:`px-6 py-4 border-t ${K} flex items-center justify-between`,children:[e.jsxs("p",{className:`text-sm ${p}`,children:["Page ",n," of ",d.pages]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{variant:"secondary",onClick:()=>T(Math.max(1,n-1)),disabled:n===1,children:"Previous"}),e.jsx(te,{variant:"secondary",onClick:()=>T(Math.min(d.pages,n+1)),disabled:n===d.pages,children:"Next"})]})]})]}):e.jsxs("div",{className:`${C} rounded-lg shadow p-12 text-center`,children:[e.jsx(Fe,{className:`w-12 h-12 ${p} mx-auto mb-4`}),e.jsx("p",{className:p,children:"No tickets found"})]})]}),e.jsx(be,{isOpen:U,onClose:()=>M(!1),title:"Ticket Details",children:$&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Ticket ID"}),e.jsxs("p",{className:`font-medium ${i}`,children:["#",(A=$.id)==null?void 0:A.slice(0,8)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Status"}),e.jsx("p",{className:`font-medium ${i}`,children:V($.status)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Subject"}),e.jsx("p",{className:`font-medium ${i}`,children:$.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Description"}),e.jsx("p",{className:`${i} ${t?"bg-gray-700":"bg-gray-50"} p-3 rounded mt-1`,children:$.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Priority"}),e.jsx("p",{className:`font-medium ${i}`,children:((W=$.priority)==null?void 0:W.charAt(0).toUpperCase())+((q=$.priority)==null?void 0:q.slice(1))})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${p}`,children:"Created"}),e.jsx("p",{className:`font-medium ${i}`,children:new Date($.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t border-gray-300",children:[e.jsx(te,{variant:"secondary",onClick:()=>M(!1),children:"Close"}),e.jsx(me,{value:$.status,onChange:O=>E(O.target.value),options:[{value:"open",label:"Open"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]})]})]})}),e.jsx(be,{isOpen:k,onClose:()=>N(!1),title:"Reply to Ticket",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("p",{className:`text-sm ${p} mb-2`,children:["Ticket: ",$==null?void 0:$.subject]})}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${i}`,children:"Message"}),e.jsx("textarea",{value:h,onChange:O=>g(O.target.value),placeholder:"Type your reply...",className:`w-full border rounded-lg p-3 h-32 ${K} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(te,{variant:"secondary",onClick:()=>N(!1),children:"Cancel"}),e.jsx(te,{onClick:B,disabled:!h||m,children:m?"Sending...":"Send Reply"})]})]})})]})},Hs=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState(null),[m,P]=s.useState(""),[b,w]=s.useState([]),j=s.useRef(null),y=[{id:1,name:"Sarah Johnson",status:"online",avatar:"SJ",lastMessage:"Thanks for your help!",updatedAt:new Date(Date.now()-5*60*1e3),messages:[{id:1,message:"Hi, I need help with my account",isOwn:!1,createdAt:new Date(Date.now()-30*60*1e3)},{id:2,message:"Sure, what seems to be the issue?",isOwn:!0,createdAt:new Date(Date.now()-28*60*1e3)},{id:3,message:"I cannot reset my password",isOwn:!1,createdAt:new Date(Date.now()-25*60*1e3)},{id:4,message:"Let me help you with that. Check your email for reset link",isOwn:!0,createdAt:new Date(Date.now()-20*60*1e3)},{id:5,message:"Thanks for your help!",isOwn:!1,createdAt:new Date(Date.now()-5*60*1e3)}]},{id:2,name:"Mike Chen",status:"online",avatar:"MC",lastMessage:"When will the feature be available?",updatedAt:new Date(Date.now()-15*60*1e3),messages:[{id:1,message:"Hi, do you have any updates on the new feature?",isOwn:!1,createdAt:new Date(Date.now()-45*60*1e3)},{id:2,message:"Yes, we are working on it",isOwn:!0,createdAt:new Date(Date.now()-40*60*1e3)},{id:3,message:"When will the feature be available?",isOwn:!1,createdAt:new Date(Date.now()-15*60*1e3)}]}];s.useEffect(()=>{var r;(r=j.current)==null||r.scrollIntoView({behavior:"smooth"})},[b]);const c=r=>{_(r),w(r.messages)},S=()=>{if(!m.trim()||!x)return;const r={id:b.length+1,message:m,isOwn:!0,createdAt:new Date};w([...b,r]),P("")};return e.jsxs("div",{className:`h-screen flex ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsxs("div",{className:`w-80 ${t?"bg-slate-900/50 border-slate-800":"bg-white/80 border-slate-200"} border-r backdrop-blur-xl flex flex-col`,children:[e.jsxs("div",{className:`p-6 border-b ${t?"border-slate-800 bg-gradient-to-r from-blue-900/20 to-slate-900":"border-slate-200 bg-gradient-to-r from-blue-50 to-white"}`,children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"} mb-4`,children:"Live Chat"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-slate-400"}`}),e.jsx("input",{type:"text",placeholder:"Search conversations...",className:`w-full pl-10 pr-4 py-2 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-slate-800 text-white placeholder-slate-500":"bg-slate-100 text-slate-900 placeholder-slate-400"}`})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 p-3",children:y.map(r=>e.jsx("div",{onClick:()=>c(r),className:`p-4 rounded-xl cursor-pointer transition-all ${(x==null?void 0:x.id)===r.id?t?"bg-blue-900/30 border-blue-700":"bg-blue-50 border-blue-300":t?"hover:bg-slate-800/50":"hover:bg-slate-50"} border ${t?"border-slate-700":"border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-sm relative ${t?"bg-gradient-to-br from-blue-600 to-blue-700":"bg-gradient-to-br from-blue-500 to-blue-600"}`,children:[r.avatar,e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-slate-900"}`,children:r.name}),e.jsx("p",{className:`text-sm truncate ${t?"text-slate-400":"text-slate-600"}`,children:r.lastMessage})]}),e.jsx("p",{className:"text-xs whitespace-nowrap text-slate-500",children:new Date(r.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},r.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`p-6 border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-sm relative ${t?"bg-gradient-to-br from-blue-600 to-blue-700":"bg-gradient-to-br from-blue-500 to-blue-600"}`,children:[x.avatar,e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold text-lg ${t?"text-white":"text-slate-900"}`,children:x.name}),e.jsxs("p",{className:`text-sm flex items-center gap-1 ${t?"text-green-400":"text-green-600"}`,children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Active now"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-800":"hover:bg-slate-100"}`,children:e.jsx(Ie,{className:`w-5 h-5 ${t?"text-slate-400":"text-slate-600"}`})}),e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-800":"hover:bg-slate-100"}`,children:e.jsx(yt,{className:`w-5 h-5 ${t?"text-slate-400":"text-slate-600"}`})}),e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-800":"hover:bg-slate-100"}`,children:e.jsx(Nt,{className:`w-5 h-5 ${t?"text-slate-400":"text-slate-600"}`})})]})]}),e.jsxs("div",{className:`flex-1 overflow-y-auto p-6 space-y-4 ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[b.map(r=>e.jsx("div",{className:`flex ${r.isOwn?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs px-5 py-3 rounded-2xl shadow-sm ${r.isOwn?t?"bg-gradient-to-r from-blue-600 to-blue-700 text-white":"bg-gradient-to-r from-blue-500 to-blue-600 text-white":t?"bg-slate-800 text-slate-100":"bg-white text-slate-900 border border-slate-200"}`,children:[e.jsx("p",{className:"break-words",children:r.message}),e.jsx("p",{className:`text-xs mt-2 ${r.isOwn?"text-blue-100":t?"text-slate-400":"text-slate-600"}`,children:new Date(r.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},r.id)),e.jsx("div",{ref:j})]}),e.jsx("div",{className:`p-6 border-t ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-800 text-blue-400":"hover:bg-slate-100 text-blue-500"}`,children:e.jsx(vt,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:m,onChange:r=>P(r.target.value),onKeyPress:r=>r.key==="Enter"&&S(),placeholder:"Type a message...",className:`flex-1 px-4 py-3 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-slate-800 text-white placeholder-slate-500":"bg-white text-slate-900 placeholder-slate-400 border border-slate-200"}`}),e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-800 text-slate-400":"hover:bg-slate-100 text-slate-600"}`,children:e.jsx(wt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:S,disabled:!m.trim(),className:`p-2 rounded-full transition-colors ${m.trim()?t?"text-blue-400 hover:bg-slate-800":"text-blue-500 hover:bg-slate-100":t?"text-slate-600":"text-slate-400"}`,children:e.jsx(st,{className:"w-5 h-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 ${t?"bg-slate-800/50":"bg-white/50"} backdrop-blur-xl`,children:e.jsx(Qe,{className:`w-12 h-12 ${t?"text-slate-600":"text-slate-400"}`})}),e.jsx("p",{className:`text-xl font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"Select a conversation"}),e.jsx("p",{className:`text-sm mt-2 ${t?"text-slate-500":"text-slate-600"}`,children:"Choose a user to start chatting"})]})})})]})},Gs=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState(""),[m,P]=s.useState(""),[b,w]=s.useState(null),[j,y]=s.useState(!1),[c,S]=s.useState(!1),[r,F]=s.useState({title:"",category:"",content:""}),l=[{id:1,title:"How to Reset Your Password",category:"Account",description:"Step-by-step guide to reset your password",content:"To reset your password: 1. Click on Forgot Password 2. Enter your email 3. Check your email for reset link 4. Follow the link and create new password",views:1250,updatedAt:new Date(Date.now()-2*24*60*60*1e3)},{id:2,title:"Getting Started with the Platform",category:"Getting Started",description:"Learn the basics of using our platform",content:"Welcome to our platform! Here are the basic steps to get started...",views:2340,updatedAt:new Date(Date.now()-5*24*60*60*1e3)},{id:3,title:"Payment Methods Explained",category:"Payments",description:"Understanding different payment options",content:"We support multiple payment methods including credit cards, bank transfers, and digital wallets...",views:1890,updatedAt:new Date(Date.now()-1*24*60*60*1e3)},{id:4,title:"Troubleshooting Login Issues",category:"Support",description:"Common login problems and solutions",content:"If you cannot login, try these solutions...",views:3120,updatedAt:new Date(Date.now()-3*24*60*60*1e3)},{id:5,title:"Profile Settings Guide",category:"Account",description:"Manage your profile and preferences",content:"Access your profile settings to update personal information...",views:980,updatedAt:new Date(Date.now()-7*24*60*60*1e3)},{id:6,title:"Security Best Practices",category:"Security",description:"Keep your account secure",content:"Follow these security tips to protect your account...",views:2150,updatedAt:new Date(Date.now()-10*24*60*60*1e3)}],v=["Account","Getting Started","Payments","Support","Security"],n=l.filter($=>(!x||$.title.toLowerCase().includes(x.toLowerCase()))&&(!m||$.category===m)),T=()=>{r.title&&r.category&&r.content&&(S(!1),F({title:"",category:"",content:""}))};return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-950":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-900/50":"border-slate-200 bg-white/40"} backdrop-blur-xl sticky top-0 z-10`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Knowledge Base"}),e.jsx("p",{className:`text-sm mt-2 ${t?"text-slate-400":"text-slate-600"}`,children:"Help articles and documentation"})]}),e.jsxs("button",{onClick:()=>S(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition flex items-center gap-2 font-semibold shadow-lg hover:shadow-xl",children:[e.jsx(re,{className:"w-5 h-5"})," New Article"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("div",{className:`${t?"bg-slate-900/50 border-slate-800":"bg-white/80 border-slate-200"} border rounded-xl shadow-lg p-6 mb-8 backdrop-blur-xl`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Search Articles"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-slate-400"}`}),e.jsx("input",{type:"text",placeholder:"Search...",value:x,onChange:$=>_($.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Category"}),e.jsxs("select",{value:m,onChange:$=>P($.target.value),className:`w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-slate-800 border-slate-700 text-white":"bg-white border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"",children:"All Categories"}),v.map($=>e.jsx("option",{value:$,children:$},$))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:[n.length," articles found"]})})]})}),n.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map($=>e.jsxs("div",{className:`${t?"bg-slate-900/50 border-slate-800 hover:border-blue-700/50":"bg-white/80 border-slate-200 hover:border-blue-300"} border rounded-xl shadow-lg hover:shadow-xl transition-all p-6 backdrop-blur-xl group`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t?"bg-blue-900/30":"bg-blue-50"}`,children:e.jsx(rt,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-semibold ${t?"bg-slate-800 text-slate-300":"bg-slate-100 text-slate-700"}`,children:$.category})]}),e.jsx("h3",{className:`text-lg font-bold ${t?"text-white":"text-slate-900"} mb-2 group-hover:text-blue-600 transition`,children:$.title}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"} mb-4 line-clamp-2`,children:$.description}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",style:{borderColor:t?"#334155":"#e2e8f0"},children:[e.jsxs("span",{className:"text-xs text-slate-500",children:[$.views.toLocaleString()," views"]}),e.jsx("button",{onClick:()=>{w($),y(!0)},className:`p-2 rounded-lg transition ${t?"hover:bg-slate-800 text-blue-400":"hover:bg-slate-100 text-blue-600"}`,children:e.jsx(qt,{className:"w-4 h-4"})})]})]},$.id))}):e.jsxs("div",{className:`${t?"bg-slate-900/50 border-slate-800":"bg-white/80 border-slate-200"} border rounded-xl shadow-lg p-12 text-center backdrop-blur-xl`,children:[e.jsx(rt,{className:`w-16 h-16 mx-auto mb-4 ${t?"text-slate-600":"text-slate-400"}`}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"No articles found"}),e.jsx("p",{className:`text-sm mt-2 ${t?"text-slate-500":"text-slate-600"}`,children:"Try adjusting your search or filters"})]})]}),j&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-900":"bg-white"} rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`border-b ${t?"border-slate-800 bg-slate-800/50":"border-slate-200 bg-slate-50"} p-6 flex items-center justify-between sticky top-0`,children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:b.title}),e.jsx("button",{onClick:()=>y(!1),className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-semibold ${t?"text-slate-400":"text-slate-600"}`,children:"Category"}),e.jsx("p",{className:`mt-1 px-3 py-1 rounded-full inline-block text-sm font-semibold ${t?"bg-blue-900/30 text-blue-400":"bg-blue-50 text-blue-700"}`,children:b.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-semibold ${t?"text-slate-400":"text-slate-600"}`,children:"Content"}),e.jsx("p",{className:`mt-2 p-4 rounded-lg ${t?"bg-slate-800 text-slate-200":"bg-slate-50 text-slate-900"}`,children:b.content})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-4 border-t",style:{borderColor:t?"#334155":"#e2e8f0"},children:[e.jsxs("span",{className:t?"text-slate-400":"text-slate-600",children:[b.views.toLocaleString()," views"]}),e.jsxs("span",{className:t?"text-slate-400":"text-slate-600",children:["Updated: ",new Date(b.updatedAt).toLocaleDateString()]})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-900":"bg-white"} rounded-2xl shadow-2xl max-w-2xl w-full`,children:[e.jsxs("div",{className:`border-b ${t?"border-slate-800 bg-gradient-to-r from-blue-900/20 to-slate-900":"border-slate-200 bg-gradient-to-r from-blue-50 to-white"} p-6 flex items-center justify-between`,children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Create New Article"}),e.jsx("button",{onClick:()=>S(!1),className:`p-2 rounded-lg transition ${t?"hover:bg-slate-700":"hover:bg-slate-100"}`,children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Title"}),e.jsx("input",{type:"text",value:r.title,onChange:$=>F({...r,title:$.target.value}),placeholder:"Article title...",className:`w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Category"}),e.jsxs("select",{value:r.category,onChange:$=>F({...r,category:$.target.value}),className:`w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-slate-800 border-slate-700 text-white":"bg-white border-slate-300 text-slate-900"}`,children:[e.jsx("option",{value:"",children:"Select category..."}),v.map($=>e.jsx("option",{value:$,children:$},$))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Content"}),e.jsx("textarea",{value:r.content,onChange:$=>F({...r,content:$.target.value}),placeholder:"Article content...",rows:"6",className:`w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-slate-800 border-slate-700 text-white placeholder-slate-500":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",style:{borderColor:t?"#334155":"#e2e8f0"},children:[e.jsx("button",{onClick:()=>S(!1),className:`px-4 py-2 rounded-lg font-semibold transition ${t?"bg-slate-800 text-white hover:bg-slate-700":"bg-slate-200 text-slate-900 hover:bg-slate-300"}`,children:"Cancel"}),e.jsx("button",{onClick:T,disabled:!r.title||!r.category||!r.content,className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-blue-800 transition disabled:opacity-50",children:"Create Article"})]})]})]})})]})},Ys=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(!0),[b,w]=s.useState(""),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(null),[n,T]=s.useState(!1),[$,z]=s.useState({total:0,critical:0,high:0,medium:0,low:0}),U=t?"bg-gray-900":"bg-gray-50",M=t?"bg-gray-800":"bg-white",k=t?"text-gray-100":"text-gray-900",N=t?"text-gray-400":"text-gray-600",h=t?"border-gray-700":"border-gray-200";s.useEffect(()=>{g()},[j,c,r]);const g=async()=>{try{P(!0);const o=localStorage.getItem("token"),d=new URLSearchParams({...j&&{search:j},...c&&{severity:c},...r&&{status:r}}),f=await fetch(`/api/support/issues?${d}`,{headers:{Authorization:`Bearer ${o}`}});if(!f.ok)throw new Error("Failed to fetch issues");const u=await f.json();_(u.data||[]),z(u.stats||{})}catch(o){w(o.message)}finally{P(!1)}},a=o=>({critical:"red",high:"orange",medium:"yellow",low:"blue"})[o]||"gray";return e.jsxs("div",{className:`min-h-screen ${U} p-6`,children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${k}`,children:"Support Issues"}),e.jsx("p",{className:`${N}`,children:"Track and manage system issues"})]}),e.jsxs(te,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"Report Issue"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[{label:"Total",value:$.total,icon:de},{label:"Critical",value:$.critical,icon:de},{label:"High",value:$.high,icon:Le},{label:"Medium",value:$.medium,icon:de},{label:"Low",value:$.low,icon:de}].map((o,d)=>{const f=o.icon;return e.jsx("div",{className:`${M} p-4 rounded-lg shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${N}`,children:o.label}),e.jsx("p",{className:`text-2xl font-bold ${k}`,children:o.value})]}),e.jsx(f,{className:"w-8 h-8 opacity-50"})]})},d)})}),b&&e.jsx(ee,{type:"error",message:b,onClose:()=>w("")}),e.jsx("div",{className:`${M} rounded-lg shadow p-6 mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${k}`,children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search issues...",value:j,onChange:o=>y(o.target.value),className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${h} ${t?"bg-gray-700 text-white":"bg-white"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${k}`,children:"Severity"}),e.jsx(me,{value:c,onChange:o=>S(o.target.value),options:[{value:"",label:"All Severity"},{value:"critical",label:"Critical"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${k}`,children:"Status"}),e.jsx(me,{value:r,onChange:o=>F(o.target.value),options:[{value:"",label:"All Status"},{value:"open",label:"Open"},{value:"investigating",label:"Investigating"},{value:"resolved",label:"Resolved"}]})]})]})}),m?e.jsx(ke,{}):x.length>0?e.jsx("div",{className:`${M} rounded-lg shadow overflow-hidden`,children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${k}`,children:"Title"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${k}`,children:"Severity"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${k}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${k}`,children:"Reported"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${k}`,children:"Actions"})]})}),e.jsx("tbody",{children:x.map((o,d)=>{var f,u;return e.jsxs("tr",{className:d%2===0?"":t?"bg-gray-700":"bg-gray-50",children:[e.jsx("td",{className:`px-6 py-4 text-sm ${k}`,children:o.title}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium bg-${a(o.severity)}-100 text-${a(o.severity)}-800`,children:((f=o.severity)==null?void 0:f.charAt(0).toUpperCase())+((u=o.severity)==null?void 0:u.slice(1))})}),e.jsx("td",{className:`px-6 py-4 text-sm ${k}`,children:o.status}),e.jsx("td",{className:`px-6 py-4 text-sm ${k}`,children:new Date(o.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{v(o),T(!0)},className:`p-2 rounded ${t?"hover:bg-gray-600":"hover:bg-gray-100"}`,children:e.jsx(xe,{className:"w-4 h-4 text-blue-600"})})})]},o.id)})})]})}):e.jsxs("div",{className:`${M} rounded-lg shadow p-12 text-center`,children:[e.jsx(de,{className:`w-12 h-12 ${N} mx-auto mb-4`}),e.jsx("p",{className:N,children:"No issues found"})]})]}),e.jsx(be,{isOpen:n,onClose:()=>T(!1),title:"Issue Details",children:l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${N}`,children:"Title"}),e.jsx("p",{className:`font-medium ${k}`,children:l.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${N}`,children:"Description"}),e.jsx("p",{className:`${k} ${t?"bg-gray-700":"bg-gray-50"} p-3 rounded mt-1`,children:l.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${N}`,children:"Severity"}),e.jsx("p",{className:`font-medium ${k}`,children:l.severity})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${N}`,children:"Status"}),e.jsx("p",{className:`font-medium ${k}`,children:l.status})]})]})]})})]})},Qs=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState(!0),[m,P]=s.useState(""),[b,w]=s.useState({totalTickets:0,avgResolutionTime:0,satisfactionRate:0,activeAgents:0,openTickets:0,resolvedTickets:0}),[j,y]=s.useState("month"),c=t?"bg-gray-900":"bg-gray-50",S=t?"bg-gray-800":"bg-white",r=t?"text-gray-100":"text-gray-900",F=t?"text-gray-400":"text-gray-600";s.useEffect(()=>{l()},[j]);const l=async()=>{try{_(!0);const n=localStorage.getItem("token"),T=await fetch(`/api/support/reports?period=${j}`,{headers:{Authorization:`Bearer ${n}`}});if(!T.ok)throw new Error("Failed to fetch reports");const $=await T.json();w($.data||{})}catch(n){P(n.message)}finally{_(!1)}},v=({label:n,value:T,icon:$,color:z})=>e.jsx("div",{className:`${S} p-6 rounded-lg shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${F}`,children:n}),e.jsx("p",{className:`text-3xl font-bold ${r} mt-2`,children:T})]}),e.jsx($,{className:`w-12 h-12 text-${z}-500 opacity-50`})]})});return x?e.jsx("div",{className:`min-h-screen ${c} p-6`,children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(ke,{})})}):e.jsx("div",{className:`min-h-screen ${c} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${r}`,children:"Support Reports"}),e.jsx("p",{className:`${F}`,children:"Analytics and performance metrics"})]}),e.jsxs("select",{value:j,onChange:n=>y(n.target.value),className:`px-4 py-2 rounded-lg border font-semibold ${t?"bg-gray-800 text-white border-gray-700":"bg-white text-gray-900 border-gray-200"}`,children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]})]}),m&&e.jsx(ee,{type:"error",message:m,onClose:()=>P("")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(v,{label:"Total Tickets",value:b.totalTickets,icon:ze,color:"blue"}),e.jsx(v,{label:"Avg Resolution Time",value:`${b.avgResolutionTime}h`,icon:se,color:"orange"}),e.jsx(v,{label:"Satisfaction Rate",value:`${b.satisfactionRate}%`,icon:Le,color:"green"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(v,{label:"Active Agents",value:b.activeAgents,icon:ye,color:"purple"}),e.jsx(v,{label:"Open Tickets",value:b.openTickets,icon:de,color:"red"}),e.jsx(v,{label:"Resolved Tickets",value:b.resolvedTickets,icon:le,color:"green"})]}),e.jsxs("div",{className:`${S} rounded-lg shadow p-6`,children:[e.jsx("h2",{className:`text-xl font-bold ${r} mb-6`,children:"Performance Overview"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:F,children:"Ticket Resolution Rate"}),e.jsxs("span",{className:`font-bold ${r}`,children:[b.satisfactionRate,"%"]})]}),e.jsx("div",{className:`w-full h-3 rounded-full ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-3 rounded-full",style:{width:`${b.satisfactionRate}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:F,children:"Agent Utilization"}),e.jsx("span",{className:`font-bold ${r}`,children:"75%"})]}),e.jsx("div",{className:`w-full h-3 rounded-full ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full",style:{width:"75%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:F,children:"First Response Time"}),e.jsx("span",{className:`font-bold ${r}`,children:"2.5 hours"})]}),e.jsx("div",{className:`w-full h-3 rounded-full ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-3 rounded-full",style:{width:"60%"}})})]})]})]})]})})},Zs=[{id:1,name:"James Kipchoge",email:"james.kipchoge@example.com",phone:"+254-722-123456",license_number:"DL/KE/001",status:"active",rating:4.8},{id:2,name:"Mary Wanjiru",email:"mary.wanjiru@example.com",phone:"+254-733-234567",license_number:"DL/KE/002",status:"active",rating:4.9}],Xs=()=>{var o,d;const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(null),[n,T]=s.useState(!1),[$,z]=s.useState(!1),[U,M]=s.useState({name:"",email:"",phone:"",license_number:"",license_expiry:"",vehicle_type:"",vehicle_number:"",insurance_number:"",address:"",status:"active"});s.useEffect(()=>{k()},[c,r]);const k=async()=>{try{w(!0);const f=localStorage.getItem("token"),u=new URLSearchParams({limit:50,...c&&{search:c},...r&&{status:r}}),C=await fetch(`/api/transportation/drivers?${u}`,{headers:{Authorization:`Bearer ${f}`}});if(!C.ok)throw new Error("Failed to fetch drivers");const i=await C.json();_(i.data||[])}catch{_(Zs),P({total:2,active:2,on_trip:0,avg_rating:4.85})}finally{w(!1)}},N=async()=>{if(!U.name||!U.email||!U.phone||!U.license_number||!U.vehicle_type||!U.vehicle_number){y("Please fill all required fields");return}try{const f=localStorage.getItem("token");if(!(await fetch("/api/transportation/drivers",{method:"POST",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify(U)})).ok)throw new Error("Failed to add driver");M({name:"",email:"",phone:"",license_number:"",license_expiry:"",vehicle_type:"",vehicle_number:"",insurance_number:"",address:"",status:"active"}),z(!1),k()}catch(f){y(f.message)}},h=f=>{v(f),T(!0)},g=f=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",on_trip:"bg-blue-100 text-blue-800"})[f]||"bg-gray-100 text-gray-800",a=x.filter(f=>{const u=f.name.toLowerCase().includes(c.toLowerCase())||f.email.toLowerCase().includes(c.toLowerCase()),C=!r||f.status===r;return u&&C});return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Drivers"}),e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Manage your transportation drivers"})]}),e.jsxs("button",{onClick:()=>z(!0),className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-semibold transition-all",children:[e.jsx(re,{className:"w-5 h-5"})," Add Driver"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Total Drivers"}),e.jsx("p",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:m.total})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:m.active})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"On Trip"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:m.on_trip})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Avg Rating"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:((o=m.avg_rating)==null?void 0:o.toFixed(1))||"N/A"})]})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-4 rounded-xl shadow mb-6 flex gap-4 border`,children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-gray-400"}`}),e.jsx("input",{type:"text",placeholder:"Search drivers...",value:c,onChange:f=>S(f.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100"}`})]}),e.jsxs("select",{value:r,onChange:f=>F(f.target.value),className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"on_trip",children:"On Trip"})]})]}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(f=>{var u,C;return e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} rounded-xl shadow border p-6 hover:shadow-lg transition-all`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-orange-600 to-orange-700 flex items-center justify-center text-white font-bold",children:(u=f.name)==null?void 0:u.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:f.name}),e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-gray-600"}`,children:f.license_number})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${g(f.status)}`,children:f.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:`flex items-center gap-2 text-sm ${t?"text-slate-300":"text-gray-700"}`,children:[e.jsx(Ie,{className:"w-4 h-4 text-orange-600"})," ",f.phone]}),e.jsxs("p",{className:`flex items-center gap-2 text-sm ${t?"text-slate-300":"text-gray-700"}`,children:[e.jsx(jt,{className:"w-4 h-4 text-orange-600"})," ",f.email]}),e.jsxs("p",{className:`flex items-center gap-2 text-sm ${t?"text-slate-300":"text-gray-700"}`,children:[e.jsx(_e,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})," ",((C=f.rating)==null?void 0:C.toFixed(1))||"N/A"]})]}),e.jsx("button",{onClick:()=>h(f),className:"w-full px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold hover:from-orange-700 hover:to-orange-800 transition-all",children:"View Details"})]},f.id)})}):e.jsx("div",{className:`${t?"bg-slate-800":"bg-white"} rounded-xl p-12 text-center`,children:e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"No drivers found"})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-950 rounded-2xl shadow-2xl max-w-md w-full border border-slate-800",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-2xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Add New Driver"}),e.jsx("button",{onClick:()=>z(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"border-b border-slate-700 pb-4",children:[e.jsx("p",{className:"text-xs font-bold text-orange-400 uppercase mb-3",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:U.name,onChange:f=>M({...U,name:f.target.value}),placeholder:"John Smith",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:U.email,onChange:f=>M({...U,email:f.target.value}),placeholder:"john@example.com",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",value:U.phone,onChange:f=>M({...U,phone:f.target.value}),placeholder:"+1-555-0101",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"Address"}),e.jsx("input",{type:"text",value:U.address,onChange:f=>M({...U,address:f.target.value}),placeholder:"123 Main St, City",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"})]})]})]}),e.jsxs("div",{className:"border-b border-slate-700 pb-4",children:[e.jsx("p",{className:"text-xs font-bold text-orange-400 uppercase mb-3",children:"License Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"License Number *"}),e.jsx("input",{type:"text",value:U.license_number,onChange:f=>M({...U,license_number:f.target.value}),placeholder:"DL123456",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"License Expiry"}),e.jsx("input",{type:"date",value:U.license_expiry,onChange:f=>M({...U,license_expiry:f.target.value}),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"})]})]})]}),e.jsxs("div",{className:"border-b border-slate-700 pb-4",children:[e.jsx("p",{className:"text-xs font-bold text-orange-400 uppercase mb-3",children:"Vehicle Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"Vehicle Type *"}),e.jsxs("select",{value:U.vehicle_type,onChange:f=>M({...U,vehicle_type:f.target.value}),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm",children:[e.jsx("option",{value:"",children:"Select vehicle type"}),e.jsx("option",{value:"sedan",children:"Sedan"}),e.jsx("option",{value:"suv",children:"SUV"}),e.jsx("option",{value:"van",children:"Van"}),e.jsx("option",{value:"truck",children:"Truck"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"Vehicle Number *"}),e.jsx("input",{type:"text",value:U.vehicle_number,onChange:f=>M({...U,vehicle_number:f.target.value}),placeholder:"ABC-1234",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-1",children:"Insurance Number"}),e.jsx("input",{type:"text",value:U.insurance_number,onChange:f=>M({...U,insurance_number:f.target.value}),placeholder:"INS123456",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-orange-400 mb-2",children:"Status"}),e.jsxs("select",{value:U.status,onChange:f=>M({...U,status:f.target.value}),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"px-6 pb-6 flex gap-3",children:[e.jsx("button",{onClick:N,className:"flex-1 px-4 py-2.5 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold hover:from-orange-700 hover:to-orange-800 transition-all",children:"Add Driver"}),e.jsx("button",{onClick:()=>z(!1),className:"flex-1 px-4 py-2.5 rounded-lg bg-slate-800 text-slate-300 font-semibold hover:bg-slate-700 transition-all border border-slate-700",children:"Cancel"})]})]})}),n&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-950 rounded-2xl shadow-2xl max-w-md w-full border border-slate-800",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-2xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:l.name}),e.jsx("button",{onClick:()=>T(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-400 font-semibold mb-1",children:"Phone"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-400 font-semibold mb-1",children:"Email"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-400 font-semibold mb-1",children:"License Number"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.license_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-400 font-semibold mb-1",children:"Rating"}),e.jsxs("p",{className:t?"text-slate-300":"text-gray-700",children:[((d=l.rating)==null?void 0:d.toFixed(1))||"N/A"," â­"]})]})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx("button",{onClick:()=>T(!1),className:"w-full px-4 py-2.5 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold hover:from-orange-700 hover:to-orange-800 transition-all",children:"Close"})})]})})]})})},ea=[{id:"BK001",passenger_name:"Peter Omondi",pickup_location:"Nairobi CBD",dropoff_location:"Jomo Kenyatta Airport",fare:2500,status:"completed",driver_name:"James Kipchoge",driver_phone:"+254-722-123456",vehicle_number:"KCA-123A",created_at:new Date(Date.now()-864e5).toISOString()},{id:"BK002",passenger_name:"Grace Muthoni",pickup_location:"Westlands",dropoff_location:"Karen",fare:1800,status:"in_progress",driver_name:"Mary Wanjiru",driver_phone:"+254-733-234567",vehicle_number:"KCB-456B",created_at:new Date(Date.now()-36e5).toISOString()},{id:"BK003",passenger_name:"David Kiplagat",pickup_location:"Mombasa Road",dropoff_location:"Thika",fare:1200,status:"pending",driver_name:null,driver_phone:null,vehicle_number:null,created_at:new Date().toISOString()},{id:"BK004",passenger_name:"Amina Hassan",pickup_location:"Kilimani",dropoff_location:"Nairobi Hospital",fare:950,status:"completed",driver_name:"James Kipchoge",driver_phone:"+254-722-123456",vehicle_number:"KCA-123A",created_at:new Date(Date.now()-1728e5).toISOString()},{id:"BK005",passenger_name:"Samuel Kariuki",pickup_location:"Upper Hill",dropoff_location:"Parklands",fare:1500,status:"accepted",driver_name:"Mary Wanjiru",driver_phone:"+254-733-234567",vehicle_number:"KCB-456B",created_at:new Date(Date.now()-72e5).toISOString()}],ta=()=>{var h,g;const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(null),[n,T]=s.useState(!1);s.useEffect(()=>{$()},[c,r]);const $=async()=>{try{w(!0);const a=localStorage.getItem("token"),o=new URLSearchParams({limit:50,...c&&{search:c},...r&&{status:r}}),d=await fetch(`/api/transportation/bookings?${o}`,{headers:{Authorization:`Bearer ${a}`}});if(!d.ok)throw new Error("Failed to fetch bookings");const f=await d.json();_(f.data||[])}catch{_(ea),P({total:5,completed:2,pending:1,total_revenue:200})}finally{w(!1)}},z=a=>{v(a),T(!0)},U=async(a,o)=>{try{const d=localStorage.getItem("token");if(!(await fetch(`/api/transportation/bookings/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({status:o})})).ok)throw new Error("Failed to update booking");$(),T(!1)}catch(d){y(d.message)}},M=a=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-blue-100 text-blue-800",in_progress:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",k=a=>({pending:e.jsx(se,{className:"w-4 h-4"}),accepted:e.jsx(le,{className:"w-4 h-4"}),in_progress:e.jsx(se,{className:"w-4 h-4"}),completed:e.jsx(le,{className:"w-4 h-4"}),cancelled:e.jsx(Pe,{className:"w-4 h-4"})})[a],N=x.filter(a=>{const o=a.passenger_name.toLowerCase().includes(c.toLowerCase())||a.id.includes(c),d=!r||a.status===r;return o&&d});return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Bookings"}),e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Manage all transportation bookings"})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:m.total})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:m.completed})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:m.pending})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:["$",((h=m.total_revenue)==null?void 0:h.toFixed(2))||"0"]})]})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-4 rounded-xl shadow mb-6 flex gap-4 border`,children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-gray-400"}`}),e.jsx("input",{type:"text",placeholder:"Search by name or booking ID...",value:c,onChange:a=>S(a.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100"}`})]}),e.jsxs("select",{value:r,onChange:a=>F(a.target.value),className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"accepted",children:"Accepted"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):N.length>0?e.jsx("div",{className:"space-y-4",children:N.map(a=>{var o;return e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} rounded-xl shadow border p-6 hover:shadow-lg transition-all`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:a.passenger_name}),e.jsxs("p",{className:`text-xs ${t?"text-slate-400":"text-gray-600"}`,children:[e.jsx(Ue,{className:"w-3 h-3 inline mr-1"}),new Date(a.created_at).toLocaleDateString()," at ",new Date(a.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1 ${M(a.status)}`,children:[k(a.status)," ",a.status]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-gray-600"}`,children:"Pickup"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:a.pickup_location})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-gray-600"}`,children:"Dropoff"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:a.dropoff_location})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ee,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-gray-600"}`,children:"Fare"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["$",((o=a.fare)==null?void 0:o.toFixed(2))||"0"]})]})]})]}),a.driver_name&&e.jsxs("div",{className:`p-3 rounded-lg mb-4 ${t?"bg-slate-700 border-slate-600":"bg-gray-50 border-gray-200"} border`,children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Driver Assigned"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:a.driver_name}),e.jsxs("p",{className:`text-sm flex items-center gap-1 ${t?"text-slate-400":"text-gray-600"}`,children:[e.jsx(Ie,{className:"w-3 h-3"})," ",a.driver_phone]})]}),e.jsxs("div",{className:`text-right ${t?"text-slate-400":"text-gray-600"}`,children:[e.jsx("p",{className:"text-xs",children:"Vehicle"}),e.jsx("p",{className:"font-semibold",children:a.vehicle_number})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>z(a),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold hover:from-orange-700 hover:to-orange-800 transition-all",children:"View Details"})})]},a.id)})}):e.jsx("div",{className:`${t?"bg-slate-800":"bg-white"} rounded-xl p-12 text-center`,children:e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"No bookings found"})}),n&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-950 rounded-2xl shadow-2xl max-w-2xl w-full border border-slate-800 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-2xl flex justify-between items-center sticky top-0",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Booking Details"}),e.jsx("button",{onClick:()=>T(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Passenger"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.passenger_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Booking ID"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.id})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Pickup Location"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.pickup_location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Dropoff Location"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.dropoff_location})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Fare"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",((g=l.fare)==null?void 0:g.toFixed(2))||"0"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Status"}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold inline-flex items-center gap-1 ${M(l.status)}`,children:[k(l.status)," ",l.status]})]})]}),l.driver_name&&e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-slate-800 border-slate-700":"bg-gray-50 border-gray-200"} border`,children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-2",children:"Driver Information"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:l.driver_name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:l.driver_phone}),l.vehicle_number&&e.jsxs("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:["Vehicle: ",l.vehicle_number]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Booked At"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:new Date(l.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"px-6 pb-6 flex gap-3 border-t border-slate-700",children:[l.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>U(l.id,"accepted"),className:"flex-1 px-4 py-2.5 rounded-lg bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold hover:from-green-700 hover:to-green-800 transition-all flex items-center justify-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"})," Accept"]}),e.jsxs("button",{onClick:()=>U(l.id,"cancelled"),className:"flex-1 px-4 py-2.5 rounded-lg bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold hover:from-red-700 hover:to-red-800 transition-all flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"})," Cancel"]})]}),e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2.5 rounded-lg bg-slate-800 text-slate-300 font-semibold hover:bg-slate-700 transition-all border border-slate-700",children:"Close"})]})]})})]})})},sa=[{id:1,driver_name:"James Kipchoge",driver_phone:"+254-722-123456",driver_id:1,passenger_name:"Peter Omondi",pickup_location:"Nairobi CBD",dropoff_location:"Jomo Kenyatta Airport",latitude:-1.3195,longitude:36.9271,status:"in_progress",created_at:new Date(Date.now()-12e5).toISOString()},{id:2,driver_name:"Mary Wanjiru",driver_phone:"+254-733-234567",driver_id:2,passenger_name:"Grace Muthoni",pickup_location:"Westlands",dropoff_location:"Karen",latitude:-1.2921,longitude:36.8025,status:"in_progress",created_at:new Date(Date.now()-6e5).toISOString()},{id:3,driver_name:"James Kipchoge",driver_phone:"+254-722-123456",driver_id:1,passenger_name:"David Kiplagat",pickup_location:"Mombasa Road",dropoff_location:"Thika",latitude:-1.25,longitude:36.75,status:"accepted",created_at:new Date(Date.now()-3e5).toISOString()}],aa=()=>{var F,l;const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState("");s.useEffect(()=>{c();const v=setInterval(c,5e3);return()=>clearInterval(v)},[]);const c=async()=>{try{const v=localStorage.getItem("token"),n=await fetch("/api/transportation/tracking",{headers:{Authorization:`Bearer ${v}`}});if(!n.ok)throw new Error("Failed to fetch tracking data");const T=await n.json();_(T.data||[])}catch{_(sa)}finally{w(!1)}},S=v=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-blue-100 text-blue-800",in_progress:"bg-green-100 text-green-800"})[v]||"bg-gray-100 text-gray-800",r=v=>({pending:"bg-yellow-500",accepted:"bg-blue-500",in_progress:"bg-green-500"})[v]||"bg-gray-500";return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Live Tracking"}),e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Monitor active trips in real-time"})]}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border mb-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Active Trips"}),e.jsx("p",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:x.length})]}),e.jsx("div",{className:`p-4 rounded-full ${r("in_progress")} animate-pulse`,children:e.jsx(Me,{className:"w-8 h-8 text-white"})})]})}),e.jsx("div",{className:`${t?"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-700":"bg-gradient-to-br from-blue-50 to-blue-100"} rounded-xl shadow mb-6 overflow-hidden border`,children:e.jsx("div",{className:"w-full h-80 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pe,{className:`w-16 h-16 mx-auto mb-4 ${t?"text-orange-500":"text-orange-600"}`}),e.jsx("p",{className:`text-xl font-semibold ${t?"text-white":"text-gray-900"}`,children:"Live Map View"}),e.jsxs("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:["Showing ",x.length," active trips across Kenya"]})]})})}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):x.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:x.map(v=>{var n,T;return e.jsxs("div",{onClick:()=>P(v),className:`${t?"bg-slate-800 border-slate-700":"bg-white"} rounded-xl shadow border hover:shadow-lg transition-all cursor-pointer overflow-hidden ${(m==null?void 0:m.id)===v.id?"ring-2 ring-orange-500":""}`,children:[e.jsx("div",{className:`h-1 ${r(v.status)}`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:v.driver_name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:v.passenger_name})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${S(v.status)}`,children:v.status})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pe,{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400",children:"Pickup"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:v.pickup_location})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(it,{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400",children:"Dropoff"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:v.dropoff_location})]})]})]}),e.jsxs("div",{className:`p-3 rounded-lg mb-4 ${t?"bg-slate-700 border-slate-600":"bg-gray-50 border-gray-200"} border`,children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Current Location"}),e.jsxs("p",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"}`,children:[(n=v.latitude)==null?void 0:n.toFixed(4),", ",(T=v.longitude)==null?void 0:T.toFixed(4)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:`w-4 h-4 ${t?"text-slate-400":"text-gray-600"}`}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:v.driver_phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:`w-4 h-4 ${t?"text-slate-400":"text-gray-600"}`}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:new Date(v.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]})]},v.id)})}):e.jsxs("div",{className:`${t?"bg-slate-800":"bg-white"} p-12 rounded-xl shadow text-center mb-8`,children:[e.jsx(de,{className:`w-12 h-12 mx-auto mb-4 ${t?"text-slate-400":"text-gray-400"}`}),e.jsx("p",{className:`text-lg ${t?"text-slate-400":"text-gray-600"}`,children:"No active trips at the moment"})]}),m&&e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} rounded-xl shadow border p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Trip Details"}),e.jsx("button",{onClick:()=>P(null),className:`p-2 rounded-lg ${t?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Driver"}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:m.driver_name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:m.driver_phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Passenger"}),e.jsx("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:m.passenger_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Current Location"}),e.jsxs("p",{className:`text-lg font-semibold ${t?"text-white":"text-gray-900"}`,children:[(F=m.latitude)==null?void 0:F.toFixed(4),", ",(l=m.longitude)==null?void 0:l.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-semibold ${S(m.status)}`,children:m.status})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-2",children:"Route"}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-slate-700 border-slate-600":"bg-gray-50 border-gray-200"} border space-y-2`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-green-600"}),e.jsxs("p",{className:`text-sm ${t?"text-slate-300":"text-gray-700"}`,children:["From: ",m.pickup_location]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"w-4 h-4 text-red-600"}),e.jsxs("p",{className:`text-sm ${t?"text-slate-300":"text-gray-700"}`,children:["To: ",m.dropoff_location]})]})]})]})]})]})]})})},la=[{id:1,model:"Toyota Hiace",vehicle_number:"KCA-123A",registration_number:"KCA123A",year:2022,status:"active",maintenance_date:"2024-06-15",notes:"Nairobi - Mombasa route"},{id:2,model:"Nissan Caravan",vehicle_number:"KCB-456B",registration_number:"KCB456B",year:2021,status:"active",maintenance_date:"2024-07-20",notes:"Nairobi - Kisumu route"},{id:3,model:"Toyota Probox",vehicle_number:"KCC-789C",registration_number:"KCC789C",year:2023,status:"maintenance",maintenance_date:"2024-05-10",notes:"Engine service at Nairobi"},{id:4,model:"Isuzu NPR",vehicle_number:"KCD-012D",registration_number:"KCD012D",year:2020,status:"active",maintenance_date:"2024-08-05",notes:"Cargo transport - Mombasa"},{id:5,model:"Toyota Quantum",vehicle_number:"KCE-345E",registration_number:"KCE345E",year:2022,status:"inactive",maintenance_date:"2024-09-12",notes:"Awaiting repairs in Nairobi"}],ra=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(null),[n,T]=s.useState(!1);s.useEffect(()=>{$()},[c,r]);const $=async()=>{try{w(!0);const h=localStorage.getItem("token"),g=new URLSearchParams({limit:50,...c&&{search:c},...r&&{status:r}}),a=await fetch(`/api/transportation/fleet?${g}`,{headers:{Authorization:`Bearer ${h}`}});if(!a.ok)throw new Error("Failed to fetch vehicles");const o=await a.json();_(o.data||[])}catch{_(la),P({total:5,active:3,maintenance:1,inactive:1})}finally{w(!1)}},z=h=>{v(h),T(!0)},U=async(h,g)=>{try{const a=localStorage.getItem("token");if(!(await fetch(`/api/transportation/fleet/${h}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({status:g})})).ok)throw new Error("Failed to update vehicle");$(),T(!1)}catch(a){y(a.message)}},M=h=>({active:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800",inactive:"bg-red-100 text-red-800"})[h]||"bg-gray-100 text-gray-800",k=h=>({active:e.jsx(le,{className:"w-5 h-5 text-green-600"}),maintenance:e.jsx(nt,{className:"w-5 h-5 text-yellow-600"}),inactive:e.jsx(Mt,{className:"w-5 h-5 text-red-600"})})[h]||e.jsx(Be,{className:"w-5 h-5"}),N=x.filter(h=>{const g=h.model.toLowerCase().includes(c.toLowerCase())||h.vehicle_number.includes(c),a=!r||h.status===r;return g&&a});return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Fleet Management"}),e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Manage your vehicle fleet"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-semibold transition-all",children:[e.jsx(re,{className:"w-5 h-5"})," Add Vehicle"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Total Vehicles"}),e.jsx("p",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:m.total})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:m.active})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Maintenance"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:m.maintenance})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Inactive"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:m.inactive})]})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-4 rounded-xl shadow mb-6 flex gap-4 border`,children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-gray-400"}`}),e.jsx("input",{type:"text",placeholder:"Search vehicles...",value:c,onChange:h=>S(h.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100"}`})]}),e.jsxs("select",{value:r,onChange:h=>F(h.target.value),className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):N.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(h=>e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} rounded-xl shadow border hover:shadow-lg transition-all overflow-hidden`,children:[e.jsx("div",{className:"p-6 bg-gradient-to-r from-orange-600 to-orange-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-8 h-8 text-white"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:h.model}),e.jsx("p",{className:"text-xs text-orange-100",children:h.vehicle_number})]})]}),k(h.status)]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Registration"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:h.registration_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Year"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:h.year})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-orange-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${M(h.status)}`,children:h.status})]}),h.maintenance_date&&e.jsxs("div",{className:`p-3 rounded-lg ${t?"bg-slate-700 border-slate-600":"bg-gray-50 border-gray-200"} border`,children:[e.jsxs("p",{className:"text-xs font-semibold text-orange-400 mb-1 flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3 h-3"})," Next Maintenance"]}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:new Date(h.maintenance_date).toLocaleDateString()})]}),e.jsx("button",{onClick:()=>z(h),className:"w-full mt-4 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold hover:from-orange-700 hover:to-orange-800 transition-all",children:"View Details"})]})]},h.id))}):e.jsx("div",{className:`${t?"bg-slate-800":"bg-white"} rounded-xl p-12 text-center`,children:e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"No vehicles found"})}),n&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-950 rounded-2xl shadow-2xl max-w-2xl w-full border border-slate-800 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-2xl flex justify-between items-center sticky top-0",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:l.model}),e.jsx("button",{onClick:()=>T(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Vehicle Number"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.vehicle_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Registration"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.registration_number})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Year"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.year})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${M(l.status)}`,children:l.status})]})]}),l.maintenance_date&&e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-slate-800 border-slate-700":"bg-gray-50 border-gray-200"} border`,children:[e.jsxs("p",{className:"text-xs text-orange-400 font-semibold mb-1 flex items-center gap-1",children:[e.jsx(Ue,{className:"w-3 h-3"})," Next Maintenance"]}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:new Date(l.maintenance_date).toLocaleDateString()})]}),l.notes&&e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-slate-800 border-slate-700":"bg-gray-50 border-gray-200"} border`,children:[e.jsx("p",{className:"text-xs text-orange-400 font-semibold mb-1",children:"Notes"}),e.jsx("p",{className:t?"text-slate-300":"text-gray-700",children:l.notes})]})]}),e.jsxs("div",{className:"px-6 pb-6 flex gap-3 border-t border-slate-700",children:[l.status!=="maintenance"&&e.jsxs("button",{onClick:()=>U(l.id,"maintenance"),className:"flex-1 px-4 py-2.5 rounded-lg bg-gradient-to-r from-yellow-600 to-yellow-700 text-white font-semibold hover:from-yellow-700 hover:to-yellow-800 transition-all flex items-center justify-center gap-2",children:[e.jsx(nt,{className:"w-4 h-4"})," Maintenance"]}),e.jsx("button",{onClick:()=>U(l.id,l.status==="active"?"inactive":"active"),className:"flex-1 px-4 py-2.5 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold hover:from-orange-700 hover:to-orange-800 transition-all",children:l.status==="active"?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2.5 rounded-lg bg-slate-800 text-slate-300 font-semibold hover:bg-slate-700 transition-all border border-slate-700",children:"Close"})]})]})})]})})},na=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState([]),[j,y]=s.useState(!0),[c,S]=s.useState(""),[r,F]=s.useState("month"),[l,v]=s.useState("earnings"),[n,T]=s.useState("desc"),[$,z]=s.useState("");s.useEffect(()=>{U(),M(),k()},[r,l,n,$]);const U=async()=>{try{y(!0);const g=localStorage.getItem("token"),a=new URLSearchParams({period:r,limit:50}),o=await fetch(`/api/transportation/earnings?${a}`,{headers:{Authorization:`Bearer ${g}`}});if(!o.ok)throw new Error("Failed to fetch earnings");const d=await o.json();_(d.data||[])}catch(g){console.error("Earnings fetch error:",g),_([])}finally{y(!1)}},M=async()=>{try{const g=localStorage.getItem("token"),a=new URLSearchParams({period:r}),o=await fetch(`/api/transportation/earnings/stats?${a}`,{headers:{Authorization:`Bearer ${g}`}});if(!o.ok)throw new Error("Failed to fetch stats");const d=await o.json();P(d.data||{total_earnings:0,total_trips:0,avg_fare:0,max_fare:0})}catch(g){console.error("Stats fetch error:",g),P({total_earnings:0,total_trips:0,avg_fare:0,max_fare:0})}},k=async()=>{try{const g=localStorage.getItem("token"),a=new URLSearchParams({period:r}),o=await fetch(`/api/transportation/earnings/chart?${a}`,{headers:{Authorization:`Bearer ${g}`}});if(!o.ok)throw new Error("Failed to fetch chart data");const d=await o.json();w(d.data||[])}catch(g){console.error("Chart data fetch error:",g),w([])}},N=x.filter(g=>{var a;return(a=g.name)==null?void 0:a.toLowerCase().includes($.toLowerCase())}).sort((g,a)=>{let o=g[l],d=a[l];return l==="earnings"&&(o=g.total_earnings||0,d=a.total_earnings||0),n==="desc"?d-o:o-d}),h=g=>{l===g?T(n==="desc"?"asc":"desc"):(v(g),T("desc"))};return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[c&&e.jsx(ee,{type:"error",message:c,onClose:()=>S("")}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Earnings"}),e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Track driver earnings and revenue"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:r,onChange:g=>F(g.target.value),className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-800 text-white border-slate-700":"bg-white text-gray-900 border-gray-200"} border`,children:[e.jsx("option",{value:"day",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsxs("button",{className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold hover:from-orange-700 hover:to-orange-800 transition-all flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"})," Export"]})]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Total Earnings"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["KES ",(m.total_earnings||0).toLocaleString()]})]}),e.jsx(Ee,{className:"w-12 h-12 text-green-500 opacity-20"})]})}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Total Trips"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:m.total_trips||0})]}),e.jsx(we,{className:"w-12 h-12 text-blue-500 opacity-20"})]})}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Avg Fare"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["KES ",(m.avg_fare||0).toLocaleString()]})]}),e.jsx(ze,{className:"w-12 h-12 text-purple-500 opacity-20"})]})}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"Max Fare"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:["KES ",(m.max_fare||0).toLocaleString()]})]}),e.jsx(Le,{className:"w-12 h-12 text-orange-500 opacity-20"})]})})]}),b.length>0&&e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} p-6 rounded-xl shadow border mb-8`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Earnings Trend"}),e.jsx("div",{className:"h-64 flex items-end justify-around gap-2",children:b.map((g,a)=>{var f;const o=Math.max(...b.map(u=>u.earnings||0)),d=o>0?g.earnings/o*100:0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full flex items-end justify-center h-48",children:e.jsx("div",{className:"w-full bg-gradient-to-t from-orange-600 to-orange-500 rounded-t-lg transition-all hover:from-orange-700 hover:to-orange-600",style:{height:`${d}%`},title:`KES ${g.earnings||0}`})}),e.jsx("p",{className:`text-xs mt-2 text-center ${t?"text-slate-400":"text-gray-600"}`,children:((f=g.period)==null?void 0:f.slice(0,3))||"N/A"})]},a)})})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white"} rounded-xl shadow border overflow-hidden`,children:[e.jsxs("div",{className:"p-6 border-b border-slate-700 flex justify-between items-center",children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Top Earners"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(tt,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search driver...",value:$,onChange:g=>z(g.target.value),className:`pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900"}`})]})})]}),j?e.jsx("div",{className:"p-12 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto"})}):x.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-slate-700":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"Driver"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"} cursor-pointer hover:text-orange-500`,onClick:()=>h("trips"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Trips ",l==="trips"&&e.jsx(We,{className:"w-4 h-4"})]})}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"} cursor-pointer hover:text-orange-500`,onClick:()=>h("earnings"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Earnings ",l==="earnings"&&e.jsx(We,{className:"w-4 h-4"})]})}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"} cursor-pointer hover:text-orange-500`,onClick:()=>h("avg_rating"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Rating ",l==="avg_rating"&&e.jsx(We,{className:"w-4 h-4"})]})})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-slate-700":"divide-gray-200"}`,children:N.map((g,a)=>e.jsxs("tr",{className:t?"hover:bg-slate-700":"hover:bg-gray-50",children:[e.jsx("td",{className:`px-6 py-4 ${t?"text-white":"text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-orange-600 to-orange-700 flex items-center justify-center text-white font-bold",children:a+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g.name||"N/A"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:g.phone||"N/A"})]})]})}),e.jsx("td",{className:`px-6 py-4 ${t?"text-slate-300":"text-gray-600"}`,children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t?"bg-slate-700":"bg-gray-100"}`,children:g.trips||0})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["KES ",(g.total_earnings||0).toLocaleString()]})}),e.jsx("td",{className:`px-6 py-4 ${t?"text-slate-300":"text-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"â­"}),(g.avg_rating||0).toFixed(1)]})})]},g.id))})]})}):e.jsx("div",{className:"p-12 text-center",children:e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"No earnings data available"})})]})]})})},oa=[{id:1,sender_name:"James Kipchoge",sender_email:"james@example.com",subject:"Trip Update",body:"Hi, I wanted to discuss the upcoming trip...",created_at:new Date(Date.now()-36e5).toISOString(),is_read:!1,recipient_id:1},{id:2,sender_name:"Mary Wanjiru",sender_email:"mary@example.com",subject:"Schedule Change",body:"Can we reschedule our meeting for tomorrow?",created_at:new Date(Date.now()-72e5).toISOString(),is_read:!0,recipient_id:2}],ia=[{id:1,sender_name:"James Kipchoge",body:"Hi, I wanted to discuss the upcoming trip...",created_at:new Date(Date.now()-36e5).toISOString()},{id:2,sender_name:"James Kipchoge",body:"Are you available next week?",created_at:new Date(Date.now()-18e5).toISOString()}],da=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState([]),[b,w]=s.useState(null),[j,y]=s.useState(!0),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(""),[n,T]=s.useState(!1),[$,z]=s.useState(""),[U,M]=s.useState(""),k=s.useRef(null);s.useEffect(()=>{N()},[r]),s.useEffect(()=>{var u;(u=k.current)==null||u.scrollIntoView({behavior:"smooth"})},[m]);const N=async()=>{try{y(!0);const u=localStorage.getItem("token"),C=new URLSearchParams({limit:50,...r&&{search:r}}),i=await fetch(`/api/communication/messages?${C}`,{headers:{Authorization:`Bearer ${u}`}});if(!i.ok)throw new Error("Failed to fetch conversations");const p=await i.json();_(p.data||[])}catch{_(oa)}finally{y(!1)}},h=async u=>{try{const C=localStorage.getItem("token"),i=await fetch(`/api/communication/messages/${u}`,{headers:{Authorization:`Bearer ${C}`}});if(!i.ok)throw new Error("Failed to fetch message");const p=await i.json();P(Array.isArray(p.data)?p.data:[p.data])}catch{P(ia)}},g=u=>{w(u),h(u.id)},a=async()=>{if(!l.trim()||!b)return;const u={id:Date.now(),sender_name:"You",body:l,created_at:new Date().toISOString()};P([...m,u]),v("");try{const C=localStorage.getItem("token");if(!(await fetch("/api/communication/messages",{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({recipient_id:b.recipient_id,subject:b.subject,body:l})})).ok)throw new Error("Failed to send message");N()}catch(C){console.error("Send error:",C)}},o=async()=>{if(!$||!U){S("Please fill all fields");return}try{const u=localStorage.getItem("token");if(!(await fetch("/api/communication/messages",{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({recipient_id:$,subject:U,body:""})})).ok)throw new Error("Failed to create conversation");z(""),M(""),T(!1),N()}catch(u){S(u.message)}},d=u=>(u==null?void 0:u.split(" ").map(C=>C[0]).join("").toUpperCase())||"?",f=u=>{const C=new Date,i=new Date(u),p=C-i,K=Math.floor(p/6e4),R=Math.floor(p/36e5),J=Math.floor(p/864e5);return K<1?"now":K<60?`${K}m`:R<24?`${R}h`:J<7?`${J}d`:i.toLocaleDateString()};return e.jsxs("div",{className:`h-screen flex ${t?"bg-slate-900":"bg-gray-50"}`,children:[c&&e.jsx(ee,{type:"error",message:c,onClose:()=>S("")}),e.jsxs("div",{className:`w-96 ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} border-r flex flex-col`,children:[e.jsxs("div",{className:`p-4 border-b ${t?"border-slate-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Messages"}),e.jsx("button",{onClick:()=>T(!0),className:`p-2 rounded-full transition-colors ${t?"bg-slate-700 hover:bg-slate-600 text-orange-400":"bg-gray-100 hover:bg-gray-200 text-orange-600"}`,children:e.jsx(re,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-gray-400"}`}),e.jsx("input",{type:"text",placeholder:"Search conversations...",value:r,onChange:u=>F(u.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(fe,{className:"w-6 h-6 animate-spin text-orange-600"})}):x.length>0?x.map(u=>{var C;return e.jsx("div",{onClick:()=>g(u),className:`p-4 cursor-pointer transition-all border-b ${t?"border-slate-700":"border-gray-100"} ${(b==null?void 0:b.id)===u.id?t?"bg-slate-700":"bg-orange-50":t?"hover:bg-slate-700":"hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0 bg-gradient-to-r from-orange-600 to-orange-700",children:d(u.sender_name)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:u.sender_name}),e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-gray-500"}`,children:f(u.created_at)})]}),e.jsx("p",{className:`text-sm truncate ${t?"text-slate-400":"text-gray-600"}`,children:u.subject}),e.jsx("p",{className:`text-xs truncate ${t?"text-slate-500":"text-gray-500"}`,children:(C=u.body)==null?void 0:C.slice(0,40)})]}),!u.is_read&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500 flex-shrink-0"})]})},u.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(Qe,{className:`w-12 h-12 mb-3 ${t?"text-slate-600":"text-gray-300"}`}),e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"No conversations"})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:b?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`p-4 border-b ${t?"border-slate-700 bg-slate-800":"border-gray-200 bg-white"} flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold bg-gradient-to-r from-orange-600 to-orange-700",children:d(b.sender_name)}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:b.sender_name}),e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-gray-600"}`,children:b.sender_email})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-700 text-slate-400":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-700 text-slate-400":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(yt,{className:"w-5 h-5"})}),e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-700 text-slate-400":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(Nt,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:`flex-1 overflow-y-auto p-4 space-y-4 ${t?"bg-slate-900":"bg-white"}`,children:[m.length>0?m.map(u=>{const C=u.sender_name==="You";return e.jsxs("div",{className:`flex items-start gap-3 ${C?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold flex-shrink-0 ${C?"bg-gradient-to-r from-blue-600 to-blue-700":"bg-gradient-to-r from-orange-600 to-orange-700"}`,children:d(u.sender_name)}),e.jsxs("div",{className:C?"text-right":"",children:[e.jsx("p",{className:`text-xs font-semibold mb-1 ${t?"text-slate-400":"text-gray-600"}`,children:u.sender_name}),e.jsx("div",{className:`max-w-xs px-4 py-2 rounded-2xl ${C?t?"bg-blue-600":"bg-blue-500":t?"bg-slate-800":"bg-gray-100"}`,children:e.jsx("p",{className:C?"text-white":t?"text-slate-200":"text-gray-900",children:u.body})}),e.jsx("p",{className:`text-xs mt-1 ${t?"text-slate-500":"text-gray-500"}`,children:new Date(u.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},u.id)}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:t?"text-slate-400":"text-gray-600",children:"No messages yet"})}),e.jsx("div",{ref:k})]}),e.jsx("div",{className:`p-4 border-t ${t?"border-slate-700 bg-slate-800":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-700 text-orange-500":"hover:bg-gray-100 text-orange-600"}`,children:e.jsx(vt,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",value:l,onChange:u=>v(u.target.value),onKeyPress:u=>u.key==="Enter"&&a(),placeholder:"Type a message...",className:`flex-1 px-4 py-2 rounded-full focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`}),e.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"hover:bg-slate-700 text-slate-400":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(wt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:a,disabled:!l.trim(),className:`p-2 rounded-full transition-colors ${l.trim()?t?"text-orange-500 hover:bg-slate-700":"text-orange-600 hover:bg-gray-100":t?"text-slate-600":"text-gray-400"}`,children:e.jsx(st,{className:"w-5 h-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 bg-gradient-to-r from-orange-600 to-orange-700",children:e.jsx(Qe,{className:"w-10 h-10 text-white"})}),e.jsx("p",{className:`text-lg font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Select a conversation to start messaging"})]})})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-950 rounded-2xl shadow-2xl max-w-md w-full border border-slate-800",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-2xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Start New Message"}),e.jsx("button",{onClick:()=>T(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Recipient ID"}),e.jsx("input",{type:"text",value:$,onChange:u=>z(u.target.value),placeholder:"Enter recipient ID",className:"w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-orange-400 mb-2",children:"Subject"}),e.jsx("input",{type:"text",value:U,onChange:u=>M(u.target.value),placeholder:"Message subject",className:"w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"})]})]}),e.jsxs("div",{className:"px-6 pb-6 flex gap-3",children:[e.jsx("button",{onClick:o,disabled:!$.trim()||!U.trim(),className:"flex-1 px-4 py-2.5 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white font-semibold hover:from-orange-700 hover:to-orange-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Create"}),e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2.5 rounded-lg bg-slate-800 text-slate-300 font-semibold hover:bg-slate-700 transition-all border border-slate-700",children:"Cancel"})]})]})})]})},Je=[{id:1,title:"System Maintenance",content:"Scheduled maintenance on Friday 10 PM - 2 AM. Services will be unavailable during this period.",status:"published",priority:"high",author_name:"Admin",created_at:new Date(Date.now()-864e5).toISOString()},{id:2,title:"New Payment Methods Available",content:"We now support M-Pesa and PayPal for all transactions. Update your payment preferences in settings.",status:"published",priority:"medium",author_name:"Finance Team",created_at:new Date(Date.now()-1728e5).toISOString()},{id:3,title:"Q4 Performance Review",content:"Quarterly performance reviews will be conducted next month. Please prepare your reports.",status:"draft",priority:"medium",author_name:"HR",created_at:new Date(Date.now()-2592e5).toISOString()},{id:4,title:"Security Update Required",content:"Please update your password for enhanced security. Use the settings page to change your password.",status:"published",priority:"high",author_name:"Security Team",created_at:new Date(Date.now()-3456e5).toISOString()},{id:5,title:"New Feature: Real-time Tracking",content:"Track your shipments in real-time with our new tracking feature. Available in the Tracking section.",status:"published",priority:"low",author_name:"Product Team",created_at:new Date(Date.now()-432e6).toISOString()}],ca=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(1),[n,T]=s.useState(null),[$,z]=s.useState(!1),[U,M]=s.useState(!1),[k,N]=s.useState({}),[h,g]=s.useState({title:"",content:"",status:"draft",priority:"medium"});s.useEffect(()=>{a(),o()},[c,r,l]);const a=async()=>{try{w(!0);const R=localStorage.getItem("token"),J=new URLSearchParams({page:l,limit:12,...c&&{search:c},...r&&{status:r}}),B=await fetch(`/api/communication/announcements?${J}`,{headers:{Authorization:`Bearer ${R}`}});if(!B.ok)throw new Error("Failed to fetch announcements");const E=await B.json();_(E.data||[]),N(E.pagination||{})}catch{_(Je),N({page:1,limit:12,total:Je.length})}finally{w(!1)}},o=async()=>{try{const R=localStorage.getItem("token"),J=await fetch("/api/communication/announcements/stats/summary",{headers:{Authorization:`Bearer ${R}`}});if(!J.ok)throw new Error("Failed to fetch stats");const B=await J.json();P(B.data)}catch{P({total:Je.length,published:4,draft:1,high_priority:2})}},d=async R=>{T(R),z(!0)},f=R=>{g(R),T(R),M(!0)},u=async()=>{if(!h.title||!h.content){y("Please fill all required fields");return}try{const R=localStorage.getItem("token"),J=n?"PUT":"POST",B=n?`/api/communication/announcements/${n.id}`:"/api/communication/announcements";if(!(await fetch(B,{method:J,headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"},body:JSON.stringify(h)})).ok)throw new Error("Failed to save announcement");g({title:"",content:"",status:"draft",priority:"medium"}),T(null),M(!1),a(),o()}catch(R){y(R.message)}},C=async R=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{const J=localStorage.getItem("token");if(!(await fetch(`/api/communication/announcements/${R}`,{method:"DELETE",headers:{Authorization:`Bearer ${J}`}})).ok)throw new Error("Failed to delete announcement");a(),o(),z(!1)}catch(J){y(J.message)}},i=R=>{const J={draft:{bg:t?"bg-slate-700":"bg-gray-100",text:t?"text-slate-300":"text-gray-700",badge:"bg-slate-500"},published:{bg:t?"bg-green-900":"bg-green-50",text:t?"text-green-300":"text-green-700",badge:"bg-green-500"},archived:{bg:t?"bg-red-900":"bg-red-50",text:t?"text-red-300":"text-red-700",badge:"bg-red-500"}};return J[R]||J.draft},p=R=>({low:t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800",medium:t?"bg-yellow-900 text-yellow-300":"bg-yellow-100 text-yellow-800",high:t?"bg-red-900 text-red-300":"bg-red-100 text-red-800"})[R]||"bg-gray-100 text-gray-800",K=R=>({draft:e.jsx(se,{className:"w-4 h-4"}),published:e.jsx(le,{className:"w-4 h-4"}),archived:e.jsx(de,{className:"w-4 h-4"})})[R]||e.jsx(Ve,{className:"w-4 h-4"});return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Announcements"}),e.jsx("p",{className:`mt-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Create and manage company announcements"})]}),e.jsxs("button",{onClick:()=>{T(null),g({title:"",content:"",status:"draft",priority:"medium"}),M(!0)},className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-medium transition-all",children:[e.jsx(re,{className:"w-5 h-5"})," New Announcement"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Total"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-gray-900"}`,children:m.total})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Published"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-green-500",children:m.published})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Drafts"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-yellow-500",children:m.draft})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"High Priority"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.high_priority})]})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-4 rounded-xl shadow-sm border mb-8 flex gap-4`,children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-gray-400"}`}),e.jsx("input",{type:"text",placeholder:"Search announcements...",value:c,onChange:R=>{S(R.target.value),v(1)},className:`w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("select",{value:r,onChange:R=>{F(R.target.value),v(1)},className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):x.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:x.map(R=>{const J=i(R.status);return e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-sm border overflow-hidden hover:shadow-lg transition-all group`,children:[e.jsxs("div",{className:`p-6 ${J.bg} border-b ${t?"border-slate-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:`w-5 h-5 ${J.text}`}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${p(R.priority)}`,children:R.priority})]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1 ${J.bg} ${J.text}`,children:[K(R.status),R.status]})]}),e.jsx("h3",{className:`text-lg font-bold ${J.text} line-clamp-2`,children:R.title})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:`text-sm line-clamp-3 mb-4 ${t?"text-slate-400":"text-gray-600"}`,children:R.content}),e.jsxs("div",{className:`flex items-center gap-2 text-xs ${t?"text-slate-500":"text-gray-500"} mb-4`,children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:R.author_name}),e.jsx("span",{children:"â€¢"}),e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(R.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>d(R),className:"flex-1 px-3 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 text-sm font-medium flex items-center justify-center gap-2 transition-all",children:[e.jsx(xe,{className:"w-4 h-4"})," View"]}),e.jsxs("button",{onClick:()=>f(R),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-all ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:[e.jsx(Oe,{className:"w-4 h-4"})," Edit"]}),e.jsx("button",{onClick:()=>C(R.id),className:"px-3 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 text-sm font-medium transition-all",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]})]},R.id)})}):e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-12 rounded-xl shadow-sm border text-center`,children:[e.jsx(Ve,{className:`w-12 h-12 mx-auto mb-4 ${t?"text-slate-600":"text-gray-400"}`}),e.jsx("p",{className:`text-lg ${t?"text-slate-400":"text-gray-600"}`,children:"No announcements found"})]}),k.total>0&&e.jsxs("div",{className:"flex justify-between items-center mt-8",children:[e.jsxs("p",{className:t?"text-slate-400":"text-gray-600",children:["Page ",k.page," of ",Math.ceil(k.total/k.limit)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(Math.max(1,l-1)),disabled:l===1,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white disabled:opacity-50 hover:from-orange-700 hover:to-orange-800 transition-all",children:"Previous"}),e.jsx("button",{onClick:()=>v(l+1),disabled:l>=Math.ceil(k.total/k.limit),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white disabled:opacity-50 hover:from-orange-700 hover:to-orange-800 transition-all",children:"Next"})]})]}),$&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-2xl w-full max-h-96 overflow-y-auto border`,children:[e.jsxs("div",{className:`p-6 border-b ${t?"border-slate-700":"border-gray-200"} flex justify-between items-start bg-gradient-to-r from-orange-600 to-orange-700`,children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:n.title}),e.jsx("button",{onClick:()=>z(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${i(n.status).bg} ${i(n.status).text}`,children:n.status}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${p(n.priority)}`,children:n.priority})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium mb-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Content"}),e.jsx("p",{className:`${t?"text-slate-300":"text-gray-700"} whitespace-pre-wrap`,children:n.content})]}),e.jsxs("div",{className:`grid grid-cols-2 gap-4 pt-4 border-t ${t?"border-slate-700":"border-gray-200"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Author"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:n.author_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Created"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:new Date(n.created_at).toLocaleString()})]})]})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:()=>{f(n),z(!1)},className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Edit"}),e.jsx("button",{onClick:()=>z(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Close"})]})]})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-2xl w-full max-h-96 overflow-y-auto border`,children:[e.jsxs("div",{className:`p-6 border-b ${t?"border-slate-700":"border-gray-200"} flex justify-between items-start bg-gradient-to-r from-orange-600 to-orange-700`,children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:n?"Edit Announcement":"New Announcement"}),e.jsx("button",{onClick:()=>M(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Title"}),e.jsx("input",{type:"text",value:h.title,onChange:R=>g({...h,title:R.target.value}),placeholder:"Announcement title",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Content"}),e.jsx("textarea",{value:h.content,onChange:R=>g({...h,content:R.target.value}),placeholder:"Announcement content",rows:"6",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Status"}),e.jsxs("select",{value:h.status,onChange:R=>g({...h,status:R.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Priority"}),e.jsxs("select",{value:h.priority,onChange:R=>g({...h,priority:R.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:u,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Save"}),e.jsx("button",{onClick:()=>M(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Cancel"})]})]})})]})})},qe=[{id:1,title:"New Message",message:"You have a new message from James Kipchoge",type:"message",is_read:!1,created_at:new Date(Date.now()-36e5).toISOString()},{id:2,title:"System Maintenance",message:"Scheduled maintenance on Friday 10 PM - 2 AM",type:"announcement",is_read:!1,created_at:new Date(Date.now()-72e5).toISOString()},{id:3,title:"Payment Received",message:"Payment of KES 5,000 received from tenant",type:"alert",is_read:!0,created_at:new Date(Date.now()-864e5).toISOString()},{id:4,title:"Property Update",message:"Your property listing has been updated successfully",type:"system",is_read:!0,created_at:new Date(Date.now()-1728e5).toISOString()},{id:5,title:"Booking Confirmed",message:"Your booking for property #123 has been confirmed",type:"message",is_read:!0,created_at:new Date(Date.now()-2592e5).toISOString()}],xa=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(1),[n,T]=s.useState({});s.useEffect(()=>{$(),z();const a=setInterval($,1e4);return()=>clearInterval(a)},[c,r,l]);const $=async()=>{try{w(!0);const a=localStorage.getItem("token"),o=new URLSearchParams({page:l,limit:10,...c&&{type:c},...r&&{read:r}}),d=await fetch(`/api/communication/notifications?${o}`,{headers:{Authorization:`Bearer ${a}`}});if(!d.ok)throw new Error("Failed to fetch notifications");const f=await d.json();_(f.data||[]),T(f.pagination||{})}catch{_(qe),T({page:1,limit:10,total:qe.length})}finally{w(!1)}},z=async()=>{try{const a=localStorage.getItem("token"),o=await fetch("/api/communication/notifications/stats/summary",{headers:{Authorization:`Bearer ${a}`}});if(!o.ok)throw new Error("Failed to fetch stats");const d=await o.json();P(d.data)}catch{P({total:qe.length,unread:2,types:4})}},U=async a=>{try{const o=localStorage.getItem("token");if(!(await fetch(`/api/communication/notifications/${a}/read`,{method:"PUT",headers:{Authorization:`Bearer ${o}`}})).ok)throw new Error("Failed to mark as read");$()}catch(o){y(o.message)}},M=async()=>{try{const a=localStorage.getItem("token");if(!(await fetch("/api/communication/notifications/read-all",{method:"PUT",headers:{Authorization:`Bearer ${a}`}})).ok)throw new Error("Failed to mark all as read");$()}catch(a){y(a.message)}},k=async a=>{try{const o=localStorage.getItem("token");if(!(await fetch(`/api/communication/notifications/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}})).ok)throw new Error("Failed to delete notification");$()}catch(o){y(o.message)}},N=a=>({message:e.jsx(Ke,{className:"w-5 h-5"}),announcement:e.jsx(de,{className:"w-5 h-5"}),alert:e.jsx(we,{className:"w-5 h-5"}),system:e.jsx(Ht,{className:"w-5 h-5"})})[a]||e.jsx(Ke,{className:"w-5 h-5"}),h=a=>({message:t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800",announcement:t?"bg-yellow-900 text-yellow-300":"bg-yellow-100 text-yellow-800",alert:t?"bg-red-900 text-red-300":"bg-red-100 text-red-800",system:t?"bg-slate-700 text-slate-300":"bg-gray-100 text-gray-800"})[a]||"bg-gray-100 text-gray-800",g=a=>({message:"text-blue-500",announcement:"text-yellow-500",alert:"text-red-500",system:"text-slate-500"})[a]||"text-slate-500";return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Notifications"}),e.jsx("p",{className:`mt-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Stay updated with your notifications"})]}),e.jsxs("button",{onClick:M,className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-medium transition-all",children:[e.jsx(le,{className:"w-5 h-5"})," Mark All Read"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Total"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-gray-900"}`,children:m.total})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Unread"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.unread})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Types"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.types})]})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-4 rounded-xl shadow-sm border mb-6 flex gap-4`,children:[e.jsxs("select",{value:c,onChange:a=>{S(a.target.value),v(1)},className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"message",children:"Message"}),e.jsx("option",{value:"announcement",children:"Announcement"}),e.jsx("option",{value:"alert",children:"Alert"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsxs("select",{value:r,onChange:a=>{F(a.target.value),v(1)},className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"false",children:"Unread"}),e.jsx("option",{value:"true",children:"Read"})]})]}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):x.length>0?e.jsx("div",{className:"space-y-3",children:x.map(a=>e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-4 rounded-xl shadow-sm border hover:shadow-lg transition-all ${a.is_read?"":"border-l-4 border-orange-500"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:`mt-1 p-2 rounded-lg ${t?"bg-slate-700":"bg-gray-100"}`,children:e.jsx("div",{className:g(a.type),children:N(a.type)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h3",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:a.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(a.type)}`,children:a.type}),!a.is_read&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t?"bg-orange-900 text-orange-300":"bg-orange-100 text-orange-800"}`,children:"New"})]}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:a.message}),e.jsx("p",{className:`text-xs ${t?"text-slate-500":"text-gray-500"} mt-2`,children:new Date(a.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[!a.is_read&&e.jsx("button",{onClick:()=>U(a.id),className:`p-2 rounded-lg transition-colors ${t?"hover:bg-slate-700 text-green-500":"hover:bg-gray-100 text-green-600"}`,title:"Mark as read",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>k(a.id),className:`p-2 rounded-lg transition-colors ${t?"hover:bg-slate-700 text-red-500":"hover:bg-gray-100 text-red-600"}`,title:"Delete",children:e.jsx(Ne,{className:"w-5 h-5"})})]})]})},a.id))}):e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-12 rounded-xl shadow-sm border text-center`,children:[e.jsx(Ke,{className:`w-12 h-12 mx-auto mb-4 ${t?"text-slate-600":"text-gray-400"}`}),e.jsx("p",{className:`text-lg ${t?"text-slate-400":"text-gray-600"}`,children:"No notifications"})]}),n.total>0&&e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsxs("p",{className:t?"text-slate-400":"text-gray-600",children:["Page ",n.page," of ",Math.ceil(n.total/n.limit)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(Math.max(1,l-1)),disabled:l===1,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white disabled:opacity-50 hover:from-orange-700 hover:to-orange-800 transition-all",children:"Previous"}),e.jsx("button",{onClick:()=>v(l+1),disabled:l>=Math.ceil(n.total/n.limit),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white disabled:opacity-50 hover:from-orange-700 hover:to-orange-800 transition-all",children:"Next"})]})]})]})})},He=[{id:1,name:"Welcome Email",type:"email",subject:"Welcome to StaySpot",content:"Welcome to our platform! We are excited to have you on board."},{id:2,name:"Payment Reminder",type:"email",subject:"Payment Due Reminder",content:"This is a reminder that your payment is due on the specified date."},{id:3,name:"Booking Confirmation",type:"sms",subject:"",content:"Your booking has been confirmed. Booking ID: {booking_id}"},{id:4,name:"Maintenance Alert",type:"push",subject:"",content:"Maintenance scheduled for your property on {date}"},{id:5,name:"Password Reset",type:"email",subject:"Reset Your Password",content:"Click the link below to reset your password: {reset_link}"}],ma=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(1),[n,T]=s.useState(null),[$,z]=s.useState(!1),[U,M]=s.useState(!1),[k,N]=s.useState({}),[h,g]=s.useState({name:"",type:"email",subject:"",content:""});s.useEffect(()=>{a(),o()},[c,r,l]);const a=async()=>{try{w(!0);const p=localStorage.getItem("token"),K=new URLSearchParams({page:l,limit:10,...c&&{search:c},...r&&{type:r}}),R=await fetch(`/api/communication/templates?${K}`,{headers:{Authorization:`Bearer ${p}`}});if(!R.ok)throw new Error("Failed to fetch templates");const J=await R.json();_(J.data||[]),N(J.pagination||{})}catch{_(He),N({page:1,limit:10,total:He.length})}finally{w(!1)}},o=async()=>{try{const p=localStorage.getItem("token"),K=await fetch("/api/communication/templates/stats/summary",{headers:{Authorization:`Bearer ${p}`}});if(!K.ok)throw new Error("Failed to fetch stats");const R=await K.json();P(R.data)}catch{P({total:He.length,types:3})}},d=p=>{T(p),z(!0)},f=async()=>{if(!h.name||!h.content){y("Please fill all required fields");return}try{const p=localStorage.getItem("token"),K=n?"PUT":"POST",R=n?`/api/communication/templates/${n.id}`:"/api/communication/templates";if(!(await fetch(R,{method:K,headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify(h)})).ok)throw new Error("Failed to save template");g({name:"",type:"email",subject:"",content:""}),T(null),M(!1),a()}catch(p){y(p.message)}},u=async p=>{if(window.confirm("Delete this template?"))try{const K=localStorage.getItem("token");if(!(await fetch(`/api/communication/templates/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${K}`}})).ok)throw new Error("Failed to delete template");a(),z(!1)}catch(K){y(K.message)}},C=p=>{T(null),g({name:`${p.name} (Copy)`,type:p.type,subject:p.subject,content:p.content}),M(!0)},i=p=>({email:t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800",sms:t?"bg-green-900 text-green-300":"bg-green-100 text-green-800",push:t?"bg-purple-900 text-purple-300":"bg-purple-100 text-purple-800"})[p]||"bg-gray-100 text-gray-800";return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Templates"}),e.jsx("p",{className:`mt-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Manage message templates"})]}),e.jsxs("button",{onClick:()=>{T(null),g({name:"",type:"email",subject:"",content:""}),M(!0)},className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-medium transition-all",children:[e.jsx(re,{className:"w-5 h-5"})," New Template"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Total Templates"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-gray-900"}`,children:m.total})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Types"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.types})]})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-4 rounded-xl shadow-sm border mb-6 flex gap-4`,children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-gray-400"}`}),e.jsx("input",{type:"text",placeholder:"Search templates...",value:c,onChange:p=>{S(p.target.value),v(1)},className:`w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("select",{value:r,onChange:p=>{F(p.target.value),v(1)},className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"push",children:"Push"})]})]}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):x.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:x.map(p=>e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-sm border overflow-hidden hover:shadow-lg transition-all`,children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-600 to-orange-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-white"}),e.jsx("h3",{className:"font-semibold text-white",children:p.name})]})}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${i(p.type)}`,children:p.type})]}),e.jsxs("div",{className:"p-4",children:[p.subject&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-gray-600"}`,children:"Subject"}),e.jsx("p",{className:`text-sm font-medium ${t?"text-white":"text-gray-900"} truncate`,children:p.subject})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:`text-xs ${t?"text-slate-400":"text-gray-600"}`,children:"Preview"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"} line-clamp-2`,children:p.content})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>d(p),className:"flex-1 px-3 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 text-sm font-medium flex items-center justify-center gap-1 transition-all",children:[e.jsx(xe,{className:"w-4 h-4"})," View"]}),e.jsxs("button",{onClick:()=>{T(p),g(p),M(!0)},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-1 transition-all ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:[e.jsx(Oe,{className:"w-4 h-4"})," Edit"]}),e.jsx("button",{onClick:()=>C(p),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${t?"text-orange-400 hover:bg-slate-700":"text-orange-600 hover:bg-gray-100"}`,children:e.jsx($t,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(p.id),className:"px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 text-sm font-medium transition-all",children:e.jsx(Ne,{className:"w-4 h-4"})})]})]})]},p.id))}):e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-12 rounded-xl shadow-sm border text-center`,children:[e.jsx(je,{className:`w-12 h-12 mx-auto mb-4 ${t?"text-slate-600":"text-gray-400"}`}),e.jsx("p",{className:`text-lg ${t?"text-slate-400":"text-gray-600"}`,children:"No templates found"})]}),k.total>0&&e.jsxs("div",{className:"flex justify-between items-center mt-8",children:[e.jsxs("p",{className:t?"text-slate-400":"text-gray-600",children:["Page ",k.page," of ",Math.ceil(k.total/k.limit)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(Math.max(1,l-1)),disabled:l===1,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white disabled:opacity-50 hover:from-orange-700 hover:to-orange-800 transition-all",children:"Previous"}),e.jsx("button",{onClick:()=>v(l+1),disabled:l>=Math.ceil(k.total/k.limit),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white disabled:opacity-50 hover:from-orange-700 hover:to-orange-800 transition-all",children:"Next"})]})]}),U&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-2xl w-full border`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:n?"Edit Template":"New Template"}),e.jsx("button",{onClick:()=>M(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Name"}),e.jsx("input",{type:"text",value:h.name,onChange:p=>g({...h,name:p.target.value}),placeholder:"Template name",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Type"}),e.jsxs("select",{value:h.type,onChange:p=>g({...h,type:p.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"push",children:"Push"})]})]}),h.type==="email"&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Subject"}),e.jsx("input",{type:"text",value:h.subject,onChange:p=>g({...h,subject:p.target.value}),placeholder:"Email subject",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Content"}),e.jsx("textarea",{value:h.content,onChange:p=>g({...h,content:p.target.value}),placeholder:"Template content",rows:"6",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:f,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Save"}),e.jsx("button",{onClick:()=>M(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Cancel"})]})]})}),$&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-2xl w-full border`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:n.name}),e.jsx("button",{onClick:()=>z(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"Type"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium mt-1 ${i(n.type)}`,children:n.type})]}),n.subject&&e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"Subject"}),e.jsx("p",{className:`font-medium mt-1 ${t?"text-white":"text-gray-900"}`,children:n.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"Content"}),e.jsx("div",{className:`p-4 rounded-lg mt-1 ${t?"bg-slate-700":"bg-gray-100"}`,children:e.jsx("p",{className:`${t?"text-slate-300":"text-gray-700"} whitespace-pre-wrap`,children:n.content})})]})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:()=>{z(!1),T(n),g(n),M(!0)},className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Edit"}),e.jsx("button",{onClick:()=>z(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Close"})]})]})})]})})},Ge=[{id:1,action:"send",user_name:"James Kipchoge",user_id:"user-001",details:"Message sent to Mary Wanjiru",created_at:new Date(Date.now()-36e5).toISOString()},{id:2,action:"publish",user_name:"Admin",user_id:"user-002",details:"Announcement published: System Maintenance",created_at:new Date(Date.now()-72e5).toISOString()},{id:3,action:"delete",user_name:"Mary Wanjiru",user_id:"user-003",details:"Template deleted: Old Email",created_at:new Date(Date.now()-864e5).toISOString()},{id:4,action:"update",user_name:"Finance Team",user_id:"user-004",details:"Notification updated: Payment Reminder",created_at:new Date(Date.now()-1728e5).toISOString()},{id:5,action:"send",user_name:"Peter Omondi",user_id:"user-005",details:"Bulk message sent to 50 users",created_at:new Date(Date.now()-2592e5).toISOString()},{id:6,action:"publish",user_name:"Admin",user_id:"user-002",details:"Announcement published: New Features",created_at:new Date(Date.now()-3456e5).toISOString()}],ha=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState([]),[j,y]=s.useState(!0),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(1),[n,T]=s.useState({});s.useEffect(()=>{$(),z(),U()},[r,l]);const $=async()=>{try{y(!0);const N=localStorage.getItem("token"),h=new URLSearchParams({page:l,limit:10,...r&&{action:r}}),g=await fetch(`/api/communication/logs?${h}`,{headers:{Authorization:`Bearer ${N}`}});if(!g.ok)throw new Error("Failed to fetch logs");const a=await g.json();_(a.data||[]),T(a.pagination||{})}catch{_(Ge),T({page:1,limit:10,total:Ge.length})}finally{y(!1)}},z=async()=>{try{const N=localStorage.getItem("token"),h=await fetch("/api/communication/logs/stats/summary",{headers:{Authorization:`Bearer ${N}`}});if(!h.ok)throw new Error("Failed to fetch stats");const g=await h.json();P(g.data)}catch{P({total:Ge.length,actions:4,users:5})}},U=async()=>{try{const N=localStorage.getItem("token"),h=await fetch("/api/communication/logs/stats/by-action",{headers:{Authorization:`Bearer ${N}`}});if(!h.ok)throw new Error("Failed to fetch action stats");const g=await h.json();w(g.data||[])}catch{w([{action:"send",count:3},{action:"publish",count:2},{action:"delete",count:1},{action:"update",count:1}])}},M=N=>({send:t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800",publish:t?"bg-green-900 text-green-300":"bg-green-100 text-green-800",delete:t?"bg-red-900 text-red-300":"bg-red-100 text-red-800",update:t?"bg-yellow-900 text-yellow-300":"bg-yellow-100 text-yellow-800"})[N]||"bg-gray-100 text-gray-800",k=N=>({send:"ðŸ“¤",publish:"ðŸ“¢",delete:"ðŸ—‘ï¸",update:"âœï¸"})[N]||"ðŸ“‹";return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[c&&e.jsx(ee,{type:"error",message:c,onClose:()=>S("")}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Activity Logs"}),e.jsx("p",{className:`mt-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Track all communication activities"})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Total Activities"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-gray-900"}`,children:m.total})]}),e.jsx(Me,{className:`w-12 h-12 ${t?"text-orange-600":"text-orange-500"} opacity-20`})]})}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Action Types"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.actions})]}),e.jsx(ze,{className:`w-12 h-12 ${t?"text-orange-600":"text-orange-500"} opacity-20`})]})}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Active Users"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.users})]}),e.jsx(Re,{className:`w-12 h-12 ${t?"text-orange-600":"text-orange-500"} opacity-20`})]})})]}),b.length>0&&e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border mb-8`,children:[e.jsx("h2",{className:`text-lg font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Activities by Type"}),e.jsx("div",{className:"space-y-3",children:b.map(N=>{const h=Math.max(...b.map(a=>a.count)),g=N.count/h*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:`text-sm font-medium ${t?"text-slate-300":"text-gray-700"}`,children:[k(N.action)," ",N.action]}),e.jsx("span",{className:`text-sm font-bold ${t?"text-slate-300":"text-gray-700"}`,children:N.count})]}),e.jsx("div",{className:`w-full h-2 rounded-full ${t?"bg-slate-700":"bg-gray-200"}`,children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-orange-500 to-orange-600",style:{width:`${g}%`}})})]},N.action)})})]}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-4 rounded-xl shadow-sm border mb-6`,children:e.jsxs("select",{value:r,onChange:N=>{F(N.target.value),v(1)},className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"send",children:"Send"}),e.jsx("option",{value:"publish",children:"Publish"}),e.jsx("option",{value:"delete",children:"Delete"}),e.jsx("option",{value:"update",children:"Update"})]})}),j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-sm border overflow-hidden`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-slate-700":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"Action"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"User"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"Details"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"Timestamp"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-slate-700":"divide-gray-200"}`,children:x.map(N=>{var h;return e.jsxs("tr",{className:t?"hover:bg-slate-700":"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M(N.action)}`,children:[k(N.action)," ",N.action]})}),e.jsx("td",{className:`px-6 py-4 ${t?"text-slate-300":"text-gray-700"}`,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.user_name}),e.jsx("p",{className:`text-sm ${t?"text-slate-500":"text-gray-500"}`,children:(h=N.user_id)==null?void 0:h.slice(0,8)})]})}),e.jsx("td",{className:`px-6 py-4 ${t?"text-slate-400":"text-gray-600"}`,children:e.jsx("p",{className:"text-sm",children:N.details||"N/A"})}),e.jsx("td",{className:`px-6 py-4 ${t?"text-slate-400":"text-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:new Date(N.created_at).toLocaleString()})]})})]},N.id)})})]})}),n.total>0&&e.jsxs("div",{className:`px-6 py-4 border-t ${t?"border-slate-700":"border-gray-200"} flex justify-between items-center`,children:[e.jsxs("p",{className:t?"text-slate-400":"text-gray-600",children:["Page ",n.page," of ",Math.ceil(n.total/n.limit)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(Math.max(1,l-1)),disabled:l===1,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white disabled:opacity-50 hover:from-orange-700 hover:to-orange-800 transition-all",children:"Previous"}),e.jsx("button",{onClick:()=>v(l+1),disabled:l>=Math.ceil(n.total/n.limit),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white disabled:opacity-50 hover:from-orange-700 hover:to-orange-800 transition-all",children:"Next"})]})]})]})]})})},ga=[{id:1,name:"James Kipchoge",email:"james@stayspot.com",roles:"Admin, Manager"},{id:2,name:"Mary Wanjiru",email:"mary@stayspot.com",roles:"Editor"},{id:3,name:"Peter Omondi",email:"peter@stayspot.com",roles:"Viewer"}],ua=[{id:1,name:"Admin",description:"Full system access",permissions:["create","read","update","delete"]},{id:2,name:"Manager",description:"Manage properties and users",permissions:["create","read","update"]},{id:3,name:"Editor",description:"Edit content",permissions:["read","update"]}],pa=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState("roles"),[m,P]=s.useState([]),[b,w]=s.useState([]),[j,y]=s.useState(!0),[c,S]=s.useState(""),[r,F]=s.useState(""),[l,v]=s.useState(null),[n,T]=s.useState(!1),[$,z]=s.useState({name:"",description:"",permissions:[]}),[U,M]=s.useState([]);s.useEffect(()=>{k()},[x]);const k=async()=>{try{y(!0);const g=localStorage.getItem("token");if(x==="roles"){const a=await fetch("/api/security/roles",{headers:{Authorization:`Bearer ${g}`}});if(!a.ok)throw new Error("Failed to fetch roles");const o=await a.json();P(o.data||[])}else if(x==="users"){const a=await fetch("/api/security/user-roles",{headers:{Authorization:`Bearer ${g}`}});if(!a.ok)throw new Error("Failed to fetch users");const o=await a.json();w(o.data||[])}}catch{x==="roles"?P(ua):w(ga)}finally{y(!1)}},N=async()=>{if(!$.name){S("Role name is required");return}try{const g=localStorage.getItem("token"),a=l?"PUT":"POST",o=l?`/api/security/roles/${l.id}`:"/api/security/roles";if(!(await fetch(o,{method:a,headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify($)})).ok)throw new Error("Failed to save role");z({name:"",description:"",permissions:[]}),v(null),T(!1),k()}catch(g){S(g.message)}},h=async g=>{if(window.confirm("Are you sure?"))try{const a=localStorage.getItem("token");if(!(await fetch(`/api/security/roles/${g}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok)throw new Error("Failed to delete role");k()}catch(a){S(a.message)}};return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[c&&e.jsx(ee,{type:"error",message:c,onClose:()=>S("")}),e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Permissions"}),e.jsx("p",{className:`mt-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Manage roles and access control"})]}),x==="roles"&&e.jsxs("button",{onClick:()=>{v(null),z({name:"",description:"",permissions:[]}),T(!0)},className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-medium transition-all",children:[e.jsx(re,{className:"w-5 h-5"})," New Role"]})]}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-sm border`,children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:["roles","users"].map(g=>e.jsxs("button",{onClick:()=>{_(g),F("")},className:`flex-1 px-6 py-4 font-medium whitespace-nowrap ${x===g?"border-b-2 border-orange-600 text-orange-600":t?"text-slate-400 hover:text-slate-300":"text-gray-600 hover:text-gray-900"}`,children:[g==="roles"&&e.jsx(De,{className:"w-5 h-5 inline mr-2"}),g==="users"&&e.jsx(ye,{className:"w-5 h-5 inline mr-2"}),g.charAt(0).toUpperCase()+g.slice(1)]},g))}),e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:`absolute left-3 top-3 w-5 h-5 ${t?"text-slate-500":"text-gray-400"}`}),e.jsx("input",{type:"text",placeholder:x==="roles"?"Search roles...":"Search users...",value:r,onChange:g=>F(g.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]})}),e.jsx("div",{className:"p-6",children:j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):x==="roles"?e.jsx("div",{className:"space-y-3",children:m.map(g=>e.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-slate-700 border-slate-600":"bg-gray-50 border-gray-200"} flex items-center justify-between`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:g.name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:g.description}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[g.permissions&&g.permissions.slice(0,3).map((a,o)=>e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-orange-100 text-orange-800",children:a},o)),g.permissions&&g.permissions.length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-gray-200 text-gray-800",children:["+",g.permissions.length-3]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{v(g),z(g),T(!0)},className:`p-2 rounded-lg transition-colors ${t?"text-orange-400 hover:bg-slate-600":"text-orange-600 hover:bg-gray-100"}`,children:e.jsx(Oe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>h(g.id),className:`p-2 rounded-lg transition-colors ${t?"text-red-400 hover:bg-slate-600":"text-red-600 hover:bg-gray-100"}`,children:e.jsx(Ne,{className:"w-5 h-5"})})]})]},g.id))}):e.jsx("div",{className:"space-y-3",children:b.map(g=>e.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-slate-700 border-slate-600":"bg-gray-50 border-gray-200"} flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("input",{type:"checkbox",checked:U.includes(g.id),onChange:a=>M(a.target.checked?[...U,g.id]:U.filter(o=>o!==g.id)),className:"w-4 h-4 rounded"}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:g.name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:g.email})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.roles&&g.roles.split(",").map((a,o)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:a.trim()},o))})]},g.id))})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-md w-full border`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:l?"Edit Role":"New Role"}),e.jsx("button",{onClick:()=>T(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("input",{type:"text",value:$.name,onChange:g=>z({...$,name:g.target.value}),placeholder:"Role name",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`}),e.jsx("textarea",{value:$.description,onChange:g=>z({...$,description:g.target.value}),placeholder:"Description",rows:"2",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:N,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Save Role"}),e.jsx("button",{onClick:()=>T(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Cancel"})]})]})})]})})},gt=[{id:1,action:"create",user_name:"James Kipchoge",resource_type:"Property",ip_address:"192.168.1.1",created_at:new Date(Date.now()-36e5).toISOString()},{id:2,action:"update",user_name:"Mary Wanjiru",resource_type:"User",ip_address:"192.168.1.2",created_at:new Date(Date.now()-72e5).toISOString()},{id:3,action:"delete",user_name:"Admin",resource_type:"Payment",ip_address:"192.168.1.3",created_at:new Date(Date.now()-864e5).toISOString()},{id:4,action:"view",user_name:"Peter Omondi",resource_type:"Report",ip_address:"192.168.1.4",created_at:new Date(Date.now()-1728e5).toISOString()},{id:5,action:"login",user_name:"Grace Muthoni",resource_type:"User",ip_address:"192.168.1.5",created_at:new Date(Date.now()-2592e5).toISOString()}],ba=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState([]),[m,P]=s.useState(null),[b,w]=s.useState(!0),[j,y]=s.useState(""),[c,S]=s.useState(""),[r,F]=s.useState(1),[l,v]=s.useState(null),[n,T]=s.useState(!1);s.useEffect(()=>{$(),z()},[c,r]);const $=async()=>{try{w(!0);const k=localStorage.getItem("token"),N=new URLSearchParams({page:r,limit:20,...c&&{action:c}}),h=await fetch(`/api/security/audit?${N}`,{headers:{Authorization:`Bearer ${k}`}});if(!h.ok)throw new Error("Failed to fetch audit logs");const g=await h.json();_(g.data||[])}catch{_(gt)}finally{w(!1)}},z=async()=>{try{const k=localStorage.getItem("token"),N=await fetch("/api/security/audit/stats/summary",{headers:{Authorization:`Bearer ${k}`}});if(!N.ok)throw new Error("Failed to fetch stats");const h=await N.json();P(h.data)}catch{P({total_logs:gt.length,active_users:5,resource_types:4,action_types:5})}},U=k=>{v(k),T(!0)},M=k=>({create:t?"bg-green-900 text-green-300":"bg-green-100 text-green-800",update:t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800",delete:t?"bg-red-900 text-red-300":"bg-red-100 text-red-800",view:t?"bg-slate-700 text-slate-300":"bg-gray-100 text-gray-800",login:t?"bg-purple-900 text-purple-300":"bg-purple-100 text-purple-800"})[k]||"bg-gray-100 text-gray-800";return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Audit Logs"}),e.jsx("p",{className:`mt-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Track all system activities and changes"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-medium transition-all",children:[e.jsx(ce,{className:"w-5 h-5"})," Export"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Total Logs"}),e.jsx("p",{className:`text-3xl font-bold mt-2 ${t?"text-white":"text-gray-900"}`,children:m.total_logs})]}),e.jsx(Me,{className:"w-12 h-12 opacity-20"})]})}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Active Users"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.active_users})]}),e.jsx(ye,{className:"w-12 h-12 opacity-20"})]})}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Resource Types"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.resource_types})]}),e.jsx(De,{className:"w-12 h-12 opacity-20"})]})}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-6 rounded-xl shadow-sm border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-slate-400":"text-gray-600"}`,children:"Action Types"}),e.jsx("p",{className:"text-3xl font-bold mt-2 text-orange-500",children:m.action_types})]}),e.jsx(we,{className:"w-12 h-12 opacity-20"})]})})]}),e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} p-4 rounded-xl shadow-sm border mb-8`,children:e.jsxs("select",{value:c,onChange:k=>{S(k.target.value),F(1)},className:`px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"",children:"All Actions"}),e.jsx("option",{value:"create",children:"Create"}),e.jsx("option",{value:"update",children:"Update"}),e.jsx("option",{value:"delete",children:"Delete"}),e.jsx("option",{value:"view",children:"View"}),e.jsx("option",{value:"login",children:"Login"})]})}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(fe,{className:"w-8 h-8 animate-spin text-orange-600"})}):e.jsx("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-sm border overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-slate-700":"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"Date & Time"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"User"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"Action"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"Resource"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"IP Address"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-700"}`,children:"Action"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-slate-700":"divide-gray-200"}`,children:x.map(k=>e.jsxs("tr",{className:t?"hover:bg-slate-700":"hover:bg-gray-50",children:[e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),new Date(k.created_at).toLocaleString()]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-gray-700"}`,children:k.user_name||"System"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${M(k.action)}`,children:k.action})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-gray-700"}`,children:k.resource_type}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-gray-700"}`,children:k.ip_address||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>U(k),className:`p-2 rounded-lg transition-colors ${t?"text-orange-400 hover:bg-slate-700":"text-orange-600 hover:bg-gray-100"}`,children:e.jsx(xe,{className:"w-5 h-5"})})})]},k.id))})]})})}),n&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-md w-full border`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Audit Log Details"}),e.jsx("button",{onClick:()=>T(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium mb-1 ${t?"text-slate-400":"text-gray-600"}`,children:"User"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:l.user_name||"System"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium mb-1 ${t?"text-slate-400":"text-gray-600"}`,children:"Action"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${M(l.action)}`,children:l.action})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium mb-1 ${t?"text-slate-400":"text-gray-600"}`,children:"Resource Type"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:l.resource_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium mb-1 ${t?"text-slate-400":"text-gray-600"}`,children:"IP Address"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:l.ip_address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium mb-1 ${t?"text-slate-400":"text-gray-600"}`,children:"Timestamp"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:new Date(l.created_at).toLocaleString()})]})]}),e.jsx("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"}`,children:e.jsx("button",{onClick:()=>T(!1),className:"w-full px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Close"})})]})})]})})},fa=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState("overview"),[m,P]=s.useState(""),[b,w]=s.useState(!1),[j,y]=s.useState({backup_type:"full",description:""}),c=async()=>{try{const r=localStorage.getItem("token");if(!(await fetch("/api/security/data/backups",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)throw new Error("Failed to create backup");y({backup_type:"full",description:""}),w(!1)}catch(r){P(r.message)}},S=[{label:"Total Users",value:"156",icon:"ðŸ‘¥"},{label:"Properties",value:"42",icon:"ðŸ "},{label:"Storage Used",value:"2.4 GB",icon:"ðŸ’¾"},{label:"Last Backup",value:"2 hours ago",icon:"â±ï¸"}];return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[m&&e.jsx(ee,{type:"error",message:m,onClose:()=>P("")}),e.jsx("div",{className:"flex justify-between items-start mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Data Management"}),e.jsx("p",{className:`mt-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Manage backups, exports, and data settings"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:S.map((r,F)=>e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("span",{className:"text-2xl",children:r.icon})}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:r.label}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-gray-900"}`,children:r.value})]},F))}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-sm border`,children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:["overview","backups","exports"].map(r=>e.jsx("button",{onClick:()=>_(r),className:`flex-1 px-6 py-4 font-medium whitespace-nowrap ${x===r?"border-b-2 border-orange-600 text-orange-600":t?"text-slate-400 hover:text-slate-300":"text-gray-600 hover:text-gray-900"}`,children:r.charAt(0).toUpperCase()+r.slice(1)},r))}),e.jsxs("div",{className:"p-6",children:[x==="overview"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`text-lg ${t?"text-slate-300":"text-gray-700"}`,children:"Data management overview and statistics"}),e.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition",children:[e.jsx(re,{className:"w-5 h-5 inline mr-2"})," Create Backup"]})]}),x==="backups"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition",children:[e.jsx(re,{className:"w-5 h-5 inline mr-2"})," Create Backup"]}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"No backups yet"})]}),x==="exports"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition",children:[e.jsx(ce,{className:"w-5 h-5 inline mr-2"})," Export Data"]}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"No exports yet"})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-md w-full border`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Create Backup"}),e.jsx("button",{onClick:()=>w(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("select",{value:j.backup_type,onChange:r=>y({...j,backup_type:r.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"full",children:"Full Backup"}),e.jsx("option",{value:"incremental",children:"Incremental Backup"})]}),e.jsx("textarea",{value:j.description,onChange:r=>y({...j,description:r.target.value}),placeholder:"Optional description",rows:"3",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:c,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Create"}),e.jsx("button",{onClick:()=>w(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Cancel"})]})]})})]})})},ja=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState("overview"),[m,P]=s.useState(""),[b,w]=s.useState(!1),[j,y]=s.useState(""),[c,S]=s.useState({name:"",description:""}),r=async()=>{try{const l=localStorage.getItem("token");let v="";if(j==="standard"?v="/api/security/compliance/standards":j==="certification"&&(v="/api/security/compliance/certifications"),!(await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw new Error("Failed to create");S({name:"",description:""}),w(!1)}catch(l){P(l.message)}},F=[{label:"Standards",value:"8",icon:"ðŸ“‹"},{label:"Active Certifications",value:"5",icon:"ðŸ†"},{label:"Completed Audits",value:"12",icon:"âœ…"},{label:"Open Violations",value:"2",icon:"âš ï¸"}];return e.jsx("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[m&&e.jsx(ee,{type:"error",message:m,onClose:()=>P("")}),e.jsx("div",{className:"flex justify-between items-start mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Compliance Management"}),e.jsx("p",{className:`mt-2 ${t?"text-slate-400":"text-gray-600"}`,children:"Track standards, certifications, and audits"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:F.map((l,v)=>e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("span",{className:"text-2xl",children:l.icon})}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:l.label}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-gray-900"}`,children:l.value})]},v))}),e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-sm border`,children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:["overview","standards","certifications","audits"].map(l=>e.jsx("button",{onClick:()=>_(l),className:`flex-1 px-6 py-4 font-medium whitespace-nowrap ${x===l?"border-b-2 border-orange-600 text-orange-600":t?"text-slate-400 hover:text-slate-300":"text-gray-600 hover:text-gray-900"}`,children:l.charAt(0).toUpperCase()+l.slice(1)},l))}),e.jsxs("div",{className:"p-6",children:[x==="overview"&&e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:`text-lg ${t?"text-slate-300":"text-gray-700"}`,children:"Compliance overview and status"})}),x==="standards"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>{y("standard"),w(!0)},className:"px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition",children:[e.jsx(re,{className:"w-5 h-5 inline mr-2"})," Add Standard"]}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"No standards added yet"})]}),x==="certifications"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>{y("certification"),w(!0)},className:"px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition",children:[e.jsx(re,{className:"w-5 h-5 inline mr-2"})," Add Certification"]}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"No certifications added yet"})]}),x==="audits"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition",children:[e.jsx(re,{className:"w-5 h-5 inline mr-2"})," Create Audit"]}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"No audits yet"})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-md w-full border`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-xl flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[j==="standard"&&"Add Standard",j==="certification"&&"Add Certification"]}),e.jsx("button",{onClick:()=>w(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Name",value:c.name,onChange:l=>S({...c,name:l.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`}),e.jsx("textarea",{placeholder:"Description",value:c.description,onChange:l=>S({...c,description:l.target.value}),rows:"3",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Create"}),e.jsx("button",{onClick:()=>w(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Cancel"})]})]})})]})})},ya=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState("general"),[m,P]=s.useState(!0),[b,w]=s.useState(""),[j,y]=s.useState(""),[c,S]=s.useState(null),[r,F]=s.useState({company_name:"",company_email:"",company_phone:"",timezone:"UTC",language:"en",currency:"USD"}),[l,v]=s.useState({email_alerts:!0,sms_alerts:!1,push_notifications:!0,digest_frequency:"daily"}),[n,T]=s.useState({two_factor_auth:!1,session_timeout:30,ip_whitelist:[],password_policy:{}}),[$,z]=s.useState([]),[U,M]=s.useState([]),[k,N]=s.useState([]),[h,g]=s.useState([]),[a,o]=s.useState(!1),[d,f]=s.useState(!1),[u,C]=s.useState(""),[i,p]=s.useState(""),[K,R]=s.useState({primary_color:"#3B82F6",secondary_color:"#8B5CF6",accent_color:"#EC4899",font_family:"Inter"}),[J,B]=s.useState({smtp_host:"",smtp_port:587,from_email:"",from_name:""}),[E,L]=s.useState({auto_backup:!0,backup_frequency:"daily",retention_days:30});s.useEffect(()=>{D()},[x]);const D=async()=>{try{P(!0);const I=localStorage.getItem("token");if(x==="general"){const H=await fetch("/api/settings/company",{headers:{Authorization:`Bearer ${I}`}});H.ok&&F((await H.json()).data)}else if(x==="notifications"){const H=await fetch("/api/settings/notifications",{headers:{Authorization:`Bearer ${I}`}});H.ok&&v((await H.json()).data)}else if(x==="security"){const H=await fetch("/api/settings/security",{headers:{Authorization:`Bearer ${I}`}});H.ok&&T((await H.json()).data)}else if(x==="dashboard"){const H=await fetch("/api/settings/dashboard/widgets",{headers:{Authorization:`Bearer ${I}`}});H.ok&&z((await H.json()).data)}else if(x==="integrations"){const H=await fetch("/api/settings/integrations",{headers:{Authorization:`Bearer ${I}`}});H.ok&&M((await H.json()).data)}else if(x==="api"){const H=await fetch("/api/settings/api-keys",{headers:{Authorization:`Bearer ${I}`}});H.ok&&N((await H.json()).data)}else if(x==="webhooks"){const H=await fetch("/api/settings/webhooks",{headers:{Authorization:`Bearer ${I}`}});H.ok&&g((await H.json()).data)}const Q=await fetch("/api/settings/stats",{headers:{Authorization:`Bearer ${I}`}});Q.ok&&S((await Q.json()).data)}catch(I){w(I.message)}finally{P(!1)}},V=async()=>{try{const I=localStorage.getItem("token");if(!(await fetch("/api/settings/company",{method:"PUT",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw new Error("Failed to save");y("Company settings saved"),setTimeout(()=>y(""),3e3)}catch(I){w(I.message)}},A=async()=>{try{const I=localStorage.getItem("token");if(!(await fetch("/api/settings/notifications",{method:"PUT",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Failed to save");y("Notification settings saved"),setTimeout(()=>y(""),3e3)}catch(I){w(I.message)}},W=async()=>{try{const I=localStorage.getItem("token");if(!(await fetch("/api/settings/security",{method:"PUT",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to save");y("Security settings saved"),setTimeout(()=>y(""),3e3)}catch(I){w(I.message)}},q=async()=>{if(!u){w("API key name required");return}try{const I=localStorage.getItem("token");if(!(await fetch("/api/settings/api-keys",{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify({name:u})})).ok)throw new Error("Failed to create");C(""),o(!1),D(),y("API key created"),setTimeout(()=>y(""),3e3)}catch(I){w(I.message)}},O=async I=>{if(window.confirm("Delete this API key?"))try{const Q=localStorage.getItem("token");if(!(await fetch(`/api/settings/api-keys/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${Q}`}})).ok)throw new Error("Failed to delete");D()}catch(Q){w(Q.message)}},ne=async()=>{if(!i||webhookEvents.length===0){w("URL and events required");return}try{const I=localStorage.getItem("token");if(!(await fetch("/api/settings/webhooks",{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify({url:i,events:webhookEvents})})).ok)throw new Error("Failed to create");p(""),setWebhookEvents([]),f(!1),D(),y("Webhook created"),setTimeout(()=>y(""),3e3)}catch(I){w(I.message)}},Z=async I=>{if(window.confirm("Delete this webhook?"))try{const Q=localStorage.getItem("token");if(!(await fetch(`/api/settings/webhooks/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${Q}`}})).ok)throw new Error("Failed to delete");D()}catch(Q){w(Q.message)}};return e.jsx("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"} p-6`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[b&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${t?"bg-red-900/20 text-red-400":"bg-red-100 text-red-800"}`,children:b}),j&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${t?"bg-green-900/20 text-green-400":"bg-green-100 text-green-800"}`,children:j}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-4xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Settings"}),e.jsx("p",{className:`mt-2 ${t?"text-gray-400":"text-gray-600"}`,children:"Customize your dashboard and manage integrations"})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-4 rounded-lg border ${t?"border-gray-700":"border-gray-200"}`,children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"API Keys"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.total_api_keys})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-4 rounded-lg border ${t?"border-gray-700":"border-gray-200"}`,children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Active Webhooks"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.active_webhooks})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} p-4 rounded-lg border ${t?"border-gray-700":"border-gray-200"}`,children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Integrations"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c.enabled_integrations})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm border ${t?"border-gray-700":"border-gray-200"}`,children:[e.jsx("div",{className:"flex border-b overflow-x-auto",children:["general","themes","notifications","security","email","backup","integrations","api","webhooks"].map(I=>e.jsx("button",{onClick:()=>_(I),className:`flex-1 px-6 py-4 font-medium whitespace-nowrap ${x===I?"border-b-2 border-blue-600 text-blue-600":t?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900"}`,children:I.charAt(0).toUpperCase()+I.slice(1)},I))}),e.jsx("div",{className:"p-6",children:m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x==="general"?e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Company Name"}),e.jsx("input",{type:"text",value:r.company_name,onChange:I=>F({...r,company_name:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Email"}),e.jsx("input",{type:"email",value:r.company_email,onChange:I=>F({...r,company_email:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Phone"}),e.jsx("input",{type:"tel",value:r.company_phone,onChange:I=>F({...r,company_phone:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Timezone"}),e.jsxs("select",{value:r.timezone,onChange:I=>F({...r,timezone:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{children:"UTC"}),e.jsx("option",{children:"EST"}),e.jsx("option",{children:"CST"}),e.jsx("option",{children:"PST"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Language"}),e.jsxs("select",{value:r.language,onChange:I=>F({...r,language:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Currency"}),e.jsxs("select",{value:r.currency,onChange:I=>F({...r,currency:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]}),e.jsxs("button",{onClick:V,className:"w-full px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," Save Changes"]})]}):x==="notifications"?e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.email_alerts,onChange:I=>v({...l,email_alerts:I.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:t?"text-gray-300":"text-gray-700",children:"Email Alerts"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.sms_alerts,onChange:I=>v({...l,sms_alerts:I.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:t?"text-gray-300":"text-gray-700",children:"SMS Alerts"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.push_notifications,onChange:I=>v({...l,push_notifications:I.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:t?"text-gray-300":"text-gray-700",children:"Push Notifications"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Digest Frequency"}),e.jsxs("select",{value:l.digest_frequency,onChange:I=>v({...l,digest_frequency:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{value:"instant",children:"Instant"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"})]})]}),e.jsxs("button",{onClick:A,className:"w-full px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," Save Changes"]})]}):x==="security"?e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.two_factor_auth,onChange:I=>T({...n,two_factor_auth:I.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:t?"text-gray-300":"text-gray-700",children:"Two-Factor Authentication"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Session Timeout (minutes)"}),e.jsx("input",{type:"number",value:n.session_timeout,onChange:I=>T({...n,session_timeout:parseInt(I.target.value)}),min:"5",max:"1440",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})]}),e.jsxs("button",{onClick:W,className:"w-full px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," Save Changes"]})]}):x==="themes"?e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-4 ${t?"text-gray-300":"text-gray-700"}`,children:"Color Scheme"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:"Primary"}),e.jsx("input",{type:"color",value:K.primary_color,onChange:I=>R({...K,primary_color:I.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:"Secondary"}),e.jsx("input",{type:"color",value:K.secondary_color,onChange:I=>R({...K,secondary_color:I.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:"Accent"}),e.jsx("input",{type:"color",value:K.accent_color,onChange:I=>R({...K,accent_color:I.target.value}),className:"w-full h-10 rounded-lg cursor-pointer"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Font Family"}),e.jsxs("select",{value:K.font_family,onChange:I=>R({...K,font_family:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"Poppins",children:"Poppins"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"Playfair",children:"Playfair Display"})]})]}),e.jsxs("button",{onClick:V,className:"w-full px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," Save Theme"]})]}):x==="email"?e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"SMTP Host"}),e.jsx("input",{type:"text",value:J.smtp_host,onChange:I=>B({...J,smtp_host:I.target.value}),placeholder:"smtp.gmail.com",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"From Email"}),e.jsx("input",{type:"email",value:J.from_email,onChange:I=>B({...J,from_email:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"From Name"}),e.jsx("input",{type:"text",value:J.from_name,onChange:I=>B({...J,from_name:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})]}),e.jsxs("button",{onClick:V,className:"w-full px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," Save Email Settings"]})]}):x==="backup"?e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.auto_backup,onChange:I=>L({...E,auto_backup:I.target.checked}),className:"w-4 h-4 rounded"}),e.jsx("span",{className:t?"text-gray-300":"text-gray-700",children:"Enable Automatic Backups"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Backup Frequency"}),e.jsxs("select",{value:E.backup_frequency,onChange:I=>L({...E,backup_frequency:I.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`,children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Retention Days"}),e.jsx("input",{type:"number",value:E.retention_days,onChange:I=>L({...E,retention_days:parseInt(I.target.value)}),min:"7",max:"365",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})]}),e.jsxs("button",{onClick:V,className:"w-full px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," Save Backup Settings"]})]}):x==="integrations"?e.jsx("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:e.jsx("p",{className:t?"text-gray-300":"text-gray-700",children:"Integration management coming soon"})}):x==="dashboard"?e.jsx("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:e.jsx("p",{className:t?"text-gray-300":"text-gray-700",children:"Dashboard customization coming soon"})}):x==="api"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"})," Create API Key"]}),k.map(I=>e.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:I.name}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:[I.key_prefix,"..."]})]}),e.jsx("button",{onClick:()=>O(I.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg",children:e.jsx(Ne,{className:"w-5 h-5"})})]},I.id))]}):x==="webhooks"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"})," Create Webhook"]}),h.map(I=>e.jsxs("div",{className:`p-4 rounded-lg border ${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:I.url}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:I.active?"Active":"Inactive"})]}),e.jsx("button",{onClick:()=>Z(I.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg",children:e.jsx(Ne,{className:"w-5 h-5"})})]},I.id))]}):e.jsx("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:e.jsx("p",{className:t?"text-gray-300":"text-gray-700",children:"Coming soon"})})})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-lg max-w-md w-full`,children:[e.jsxs("div",{className:`p-6 border-b ${t?"border-gray-700":"border-gray-200"} flex justify-between items-start`,children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Create API Key"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsx("input",{type:"text",placeholder:"API Key Name",value:u,onChange:I=>C(I.target.value),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`})}),e.jsxs("div",{className:`p-6 border-t ${t?"border-gray-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:q,className:"flex-1 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"Create"}),e.jsx("button",{onClick:()=>o(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium`,children:"Cancel"})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-lg max-w-md w-full`,children:[e.jsxs("div",{className:`p-6 border-b ${t?"border-gray-700":"border-gray-200"} flex justify-between items-start`,children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Create Webhook"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("input",{type:"url",placeholder:"Webhook URL",value:i,onChange:I=>p(I.target.value),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 text-white":"bg-gray-100"}`}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Events"}),["user.created","user.updated","payment.completed","order.placed"].map(I=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:webhookEvents.includes(I),onChange:Q=>setWebhookEvents(Q.target.checked?[...webhookEvents,I]:webhookEvents.filter(H=>H!==I)),className:"w-4 h-4 rounded"}),e.jsx("span",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:I})]},I))]})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-gray-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:ne,className:"flex-1 px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"Create"}),e.jsx("button",{onClick:()=>f(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium`,children:"Cancel"})]})]})})]})})},va=()=>{const{isDarkMode:t}=ae(),[x,_]=s.useState(""),[m,P]=s.useState("all"),[b,w]=s.useState(null),[j,y]=s.useState(""),[c,S]=s.useState(!1),[r,F]=s.useState(!1),[l,v]=s.useState({name:"",type:"report",permission:"view"}),[n,T]=s.useState({email:"",role:"viewer"}),$=[{label:"Shared Reports",value:"24",icon:"ðŸ“Š"},{label:"Active Collaborators",value:"12",icon:"ðŸ‘¥"},{label:"Shared Dashboards",value:"8",icon:"ðŸ“ˆ"},{label:"Pending Invites",value:"3",icon:"ðŸ“§"}],z=[{id:"SHR-001",name:"Monthly Revenue Report",type:"report",sharedWith:"Sarah Johnson, Mike Brown",permission:"view",date:"2024-01-15",link:"https://stayspot.com/share/abc123"},{id:"SHR-002",name:"Q1 Analytics Dashboard",type:"dashboard",sharedWith:"Finance Team (5)",permission:"edit",date:"2024-01-14",link:"https://stayspot.com/share/def456"},{id:"SHR-003",name:"Property Verification Data",type:"data",sharedWith:"Verification Team (3)",permission:"view",date:"2024-01-13",link:"https://stayspot.com/share/ghi789"}],U=[{id:"TM-001",name:"Sarah Johnson",email:"sarah@stayspot.com",role:"Finance Manager",status:"active"},{id:"TM-002",name:"Mike Brown",email:"mike@stayspot.com",role:"Operations Lead",status:"active"},{id:"TM-003",name:"Emma Davis",email:"emma@stayspot.com",role:"Support Manager",status:"active"},{id:"TM-004",name:"Robert Wilson",email:"robert@stayspot.com",role:"Analyst",status:"pending"}],M=a=>({view:t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800",edit:t?"bg-green-900 text-green-300":"bg-green-100 text-green-800",admin:t?"bg-red-900 text-red-300":"bg-red-100 text-red-800"})[a],k=a=>({report:"ðŸ“Š",dashboard:"ðŸ“ˆ",data:"ðŸ“"})[a]||"ðŸ“„",N=(a,o)=>{navigator.clipboard.writeText(a),w(o),setTimeout(()=>w(null),2e3)},h=async()=>{if(!l.name){y("Please enter a name");return}try{const a=localStorage.getItem("token");if(!(await fetch("/api/sharing/share",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Failed to share");v({name:"",type:"report",permission:"view"}),S(!1)}catch(a){y(a.message)}},g=async()=>{if(!n.email){y("Please enter an email");return}try{const a=localStorage.getItem("token");if(!(await fetch("/api/sharing/invite",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to send invite");T({email:"",role:"viewer"}),F(!1)}catch(a){y(a.message)}};return e.jsxs("div",{className:`min-h-screen ${t?"bg-slate-900":"bg-gray-50"}`,children:[j&&e.jsx(ee,{type:"error",message:j,onClose:()=>y("")}),e.jsx("div",{className:`border-b ${t?"border-slate-800 bg-slate-800":"border-gray-200 bg-white"}`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-600 to-orange-700 rounded-lg",children:e.jsx(bt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Sharing & Collaboration"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:"Share reports and collaborate with team members"})]})]}),e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition",children:[e.jsx(re,{className:"w-5 h-5"})," Share New"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:$.map((a,o)=>e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("span",{className:"text-2xl",children:a.icon})}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:a.label}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-gray-900"}`,children:a.value})]},o))}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Shared Items"}),e.jsxs("button",{className:`px-4 py-2 rounded-lg border flex items-center gap-2 ${t?"bg-slate-800 border-slate-700 text-white hover:bg-slate-700":"bg-gray-50 border-gray-300 text-gray-900 hover:bg-gray-100"}`,children:[e.jsx(ce,{className:"w-5 h-5"})," Export"]})]}),e.jsx("div",{className:`rounded-xl shadow p-6 border mb-6 ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search shared items...",value:x,onChange:a=>_(a.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-700 border-slate-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`})]}),e.jsxs("select",{value:m,onChange:a=>P(a.target.value),className:`px-4 py-2 rounded-lg border ${t?"bg-slate-700 border-slate-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"report",children:"Reports"}),e.jsx("option",{value:"dashboard",children:"Dashboards"}),e.jsx("option",{value:"data",children:"Data"})]})]})}),e.jsx("div",{className:`rounded-xl shadow border overflow-hidden ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${t?"bg-slate-700 border-slate-600":"bg-gray-50 border-gray-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-900"}`,children:"Item"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-900"}`,children:"Type"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-900"}`,children:"Shared With"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-900"}`,children:"Permission"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-900"}`,children:"Date"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${t?"text-slate-300":"text-gray-900"}`,children:"Actions"})]})}),e.jsx("tbody",{children:z.map((a,o)=>e.jsxs("tr",{className:`border-b ${t?"border-slate-700 hover:bg-slate-700":"border-gray-200 hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:k(a.type)}),e.jsx("span",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:a.name})]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t?"bg-slate-700 text-slate-300":"bg-gray-200 text-gray-800"}`,children:a.type.charAt(0).toUpperCase()+a.type.slice(1)})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-400":"text-gray-600"}`,children:a.sharedWith}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${M(a.permission)}`,children:a.permission.charAt(0).toUpperCase()+a.permission.slice(1)})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-400":"text-gray-600"}`,children:a.date}),e.jsxs("td",{className:"px-6 py-4 text-sm flex gap-2",children:[e.jsx("button",{onClick:()=>N(a.link,a.id),className:`p-2 rounded hover:bg-slate-700 ${t?"text-slate-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:b===a.id?e.jsx(le,{className:"w-4 h-4 text-green-600"}):e.jsx($t,{className:"w-4 h-4"})}),e.jsx("button",{className:`p-2 rounded hover:bg-slate-700 ${t?"text-slate-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{className:`p-2 rounded hover:bg-slate-700 ${t?"text-slate-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:e.jsx(Ne,{className:"w-4 h-4"})})]})]},o))})]})})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Team Members"}),e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition",children:[e.jsx(re,{className:"w-5 h-5"})," Invite Member"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:U.map((a,o)=>e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:a.name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:a.email})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${a.status==="active"?t?"bg-green-900 text-green-300":"bg-green-100 text-green-800":t?"bg-yellow-900 text-yellow-300":"bg-yellow-100 text-yellow-800"}`,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]}),e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"}`,children:["Role: ",e.jsx("span",{className:"font-semibold",children:a.role})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 ${t?"bg-slate-700 hover:bg-slate-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"}`,children:[e.jsx(xe,{className:"w-4 h-4"})," View"]}),e.jsxs("button",{className:`flex-1 px-3 py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 ${t?"bg-slate-700 hover:bg-slate-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"}`,children:[e.jsx(Ye,{className:"w-4 h-4"})," Edit"]})]})]},o))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"Sharing Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Gt,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:`font-bold text-lg ${t?"text-white":"text-gray-900"}`,children:"Public Sharing"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-5 h-5 rounded"}),e.jsx("span",{className:`text-sm font-semibold ${t?"text-slate-300":"text-gray-900"}`,children:"Enable public sharing"})]})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Xe,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:`font-bold text-lg ${t?"text-white":"text-gray-900"}`,children:"Password Protection"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded"}),e.jsx("span",{className:`text-sm font-semibold ${t?"text-slate-300":"text-gray-900"}`,children:"Enable password protection"})]})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(se,{className:"w-6 h-6 text-orange-600"}),e.jsx("h3",{className:`font-bold text-lg ${t?"text-white":"text-gray-900"}`,children:"Link Expiration"})]}),e.jsxs("select",{className:`w-full px-3 py-2 rounded-lg border text-sm ${t?"bg-slate-700 border-slate-600 text-white":"bg-gray-50 border-gray-300 text-gray-900"}`,children:[e.jsx("option",{children:"Never expires"}),e.jsx("option",{children:"7 days"}),e.jsx("option",{children:"30 days"}),e.jsx("option",{children:"90 days"})]})]}),e.jsxs("div",{className:`rounded-xl shadow p-6 border ${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ye,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:`font-bold text-lg ${t?"text-white":"text-gray-900"}`,children:"Activity Log"})]}),e.jsx("button",{className:`w-full px-4 py-2 rounded-lg text-sm font-semibold ${t?"bg-slate-700 hover:bg-slate-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"}`,children:"View Activity Log"})]})]})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-md w-full border`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Share New Item"}),e.jsx("button",{onClick:()=>S(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("input",{type:"text",value:l.name,onChange:a=>v({...l,name:a.target.value}),placeholder:"Item name",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`}),e.jsxs("select",{value:l.type,onChange:a=>v({...l,type:a.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"report",children:"Report"}),e.jsx("option",{value:"dashboard",children:"Dashboard"}),e.jsx("option",{value:"data",children:"Data"})]}),e.jsxs("select",{value:l.permission,onChange:a=>v({...l,permission:a.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"view",children:"View Only"}),e.jsx("option",{value:"edit",children:"Edit"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:h,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Share"}),e.jsx("button",{onClick:()=>S(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Cancel"})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-slate-800 border-slate-700":"bg-white border-gray-200"} rounded-xl shadow-lg max-w-md w-full border`,children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Invite Team Member"}),e.jsx("button",{onClick:()=>F(!1),className:"text-orange-200 hover:text-white transition-colors",children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("input",{type:"email",value:n.email,onChange:a=>T({...n,email:a.target.value}),placeholder:"Email address",className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white placeholder-slate-500":"bg-gray-100 text-gray-900 placeholder-gray-500"}`}),e.jsxs("select",{value:n.role,onChange:a=>T({...n,role:a.target.value}),className:`w-full px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 ${t?"bg-slate-700 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("option",{value:"viewer",children:"Viewer"}),e.jsx("option",{value:"editor",children:"Editor"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{className:`p-6 border-t ${t?"border-slate-700":"border-gray-200"} flex gap-3`,children:[e.jsx("button",{onClick:g,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-orange-600 to-orange-700 text-white hover:from-orange-700 hover:to-orange-800 font-medium transition-all",children:"Send Invite"}),e.jsx("button",{onClick:()=>F(!1),className:`flex-1 px-4 py-2 rounded-lg ${t?"bg-slate-700 text-white hover:bg-slate-600":"bg-gray-200 text-gray-900 hover:bg-gray-300"} font-medium transition-all`,children:"Cancel"})]})]})})]})},Na=()=>{const{isDarkMode:t}=he(),[x,_]=s.useState(!1),[m,P]=s.useState(""),[b,w]=s.useState("All"),[j,y]=s.useState([{id:1,name:"John Smith",role:"Landlord",email:"john@example.com",phone:"+1-555-0101",amount:5e3,status:"pending",date:"2024-01-15",property:"Sunset Apartments",method:"bank_transfer",automatic:!1,frequency:null},{id:2,name:"Sarah Johnson",role:"Property Manager",email:"sarah@example.com",phone:"+1-555-0102",amount:3500,status:"completed",date:"2024-01-14",property:"Downtown Lofts",method:"credit_card",automatic:!0,frequency:"monthly"},{id:3,name:"Mike Davis",role:"Landlord",email:"mike@example.com",phone:"+1-555-0103",amount:2800,status:"pending",date:"2024-01-13",property:"Riverside Complex",method:"check",automatic:!1,frequency:null}]),[c,S]=s.useState({name:"",role:"Landlord",email:"",phone:"",amount:"",property:"",description:"",method:"bank_transfer",automatic:!1,frequency:"monthly"}),r=[{value:"bank_transfer",label:"Bank Transfer",icon:"ðŸ¦"},{value:"credit_card",label:"Credit Card",icon:"ðŸ’³"},{value:"check",label:"Check",icon:"âœ“"},{value:"ach",label:"ACH Transfer",icon:"ðŸ“„"},{value:"paypal",label:"PayPal",icon:"ðŸ…¿ï¸"},{value:"mpesa",label:"M-Pesa",icon:"ðŸ“±"}],F=[{value:"once",label:"One Time"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"annually",label:"Annually"}],l=["All","Landlord","Property Manager","Maintenance Staff","Other"],v=d=>{const{name:f,value:u}=d.target;S(C=>({...C,[f]:u}))},n=d=>{d.preventDefault();const f={id:j.length+1,...c,status:"pending",date:new Date().toISOString().split("T")[0]};y([f,...j]),S({name:"",role:"Landlord",email:"",phone:"",amount:"",property:"",description:"",method:"bank_transfer",automatic:!1,frequency:"monthly"}),_(!1)},T=j.filter(d=>{const f=d.name.toLowerCase().includes(m.toLowerCase())||d.email.toLowerCase().includes(m.toLowerCase()),u=b==="All"||d.role===b;return f&&u}),$=j.filter(d=>d.status==="pending").reduce((d,f)=>d+f.amount,0),z=j.filter(d=>d.status==="completed").reduce((d,f)=>d+f.amount,0),U=j.filter(d=>d.automatic).reduce((d,f)=>d+f.amount,0),M=d=>{switch(d){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},k=d=>{switch(d){case"completed":return e.jsx(le,{className:"w-4 h-4"});case"pending":return e.jsx(se,{className:"w-4 h-4"});case"failed":return e.jsx(de,{className:"w-4 h-4"});default:return null}},N=d=>{y(j.map(f=>f.id===d?{...f,status:"completed"}:f))},h=d=>{y(j.map(f=>f.id===d?{...f,status:"failed"}:f))},g=d=>{y(j.filter(f=>f.id!==d))},a=d=>{const f=j.find(u=>u.id===d);f&&(S(f),_(!0))},o=d=>{y(j.map(f=>f.id===d?{...f,automatic:!f.automatic}:f))};return e.jsx("div",{className:`min-h-screen p-6 ${t?"bg-slate-950":"bg-slate-50"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold ${t?"text-white":"text-slate-900"}`,children:"Pay Others"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-slate-400":"text-slate-600"}`,children:"Manage payments to landlords, managers, and other stakeholders"})]}),e.jsxs("button",{onClick:()=>_(!x),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition",children:[e.jsx(re,{className:"w-5 h-5"}),"New Payment"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:`rounded-lg p-6 border ${t?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Total Pending"}),e.jsxs("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:["$",$.toLocaleString()]})]}),e.jsx(se,{className:"w-8 h-8 text-yellow-600"})]})}),e.jsx("div",{className:`rounded-lg p-6 border ${t?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Total Completed"}),e.jsxs("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:["$",z.toLocaleString()]})]}),e.jsx(le,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:`rounded-lg p-6 border ${t?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Automatic Payments"}),e.jsxs("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:["$",U.toLocaleString()]})]}),e.jsx(dt,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:`rounded-lg p-6 border ${t?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"Total Recipients"}),e.jsx("p",{className:`text-2xl font-bold mt-2 ${t?"text-white":"text-slate-900"}`,children:j.length})]}),e.jsx(Re,{className:"w-8 h-8 text-blue-600"})]})})]}),x&&e.jsxs("div",{className:`rounded-lg p-6 border mb-8 ${t?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-4 ${t?"text-white":"text-slate-900"}`,children:"Create New Payment"}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Name"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:v,required:!0,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,placeholder:"Recipient name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Role"}),e.jsx("select",{name:"role",value:c.role,onChange:v,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,children:l.filter(d=>d!=="All").map(d=>e.jsx("option",{value:d,children:d},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Email"}),e.jsx("input",{type:"email",name:"email",value:c.email,onChange:v,required:!0,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,placeholder:"Email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:c.phone,onChange:v,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,placeholder:"Phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Amount ($)"}),e.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:v,required:!0,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Property"}),e.jsx("input",{type:"text",name:"property",value:c.property,onChange:v,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,placeholder:"Property name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Description"}),e.jsx("textarea",{name:"description",value:c.description,onChange:v,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,placeholder:"Payment description",rows:"3"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Payment Method"}),e.jsx("select",{name:"method",value:c.method,onChange:v,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,children:r.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:"Frequency"}),e.jsx("select",{name:"frequency",value:c.frequency,onChange:v,disabled:!c.automatic,className:`w-full px-3 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600 disabled:opacity-50`,children:F.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]})]}),e.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border ${t?"bg-slate-800 border-slate-600":"bg-slate-50 border-slate-300"} cursor-pointer`,children:[e.jsx("input",{type:"checkbox",name:"automatic",checked:c.automatic,onChange:d=>S(f=>({...f,automatic:d.target.checked})),className:"w-4 h-4 rounded"}),e.jsx("span",{className:`text-sm font-medium ${t?"text-slate-300":"text-slate-700"}`,children:"Enable Automatic Recurring Payment"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition",children:[e.jsx(st,{className:"w-4 h-4"}),"Create Payment"]}),e.jsx("button",{type:"button",onClick:()=>_(!1),className:`px-4 py-2 rounded-lg border ${t?"border-slate-600 text-slate-300 hover:bg-slate-800":"border-slate-300 text-slate-700 hover:bg-slate-100"} transition`,children:"Cancel"})]})]})]}),e.jsx("div",{className:`rounded-lg p-4 mb-6 border ${t?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:m,onChange:d=>P(d.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-gray-400"}),e.jsx("select",{value:b,onChange:d=>w(d.target.value),className:`px-4 py-2 rounded-lg border ${t?"bg-slate-800 border-slate-600 text-white":"bg-white border-slate-300 text-slate-900"} focus:outline-none focus:ring-2 focus:ring-orange-600`,children:l.map(d=>e.jsx("option",{value:d,children:d},d))})]})]})}),e.jsx("div",{className:`rounded-lg border overflow-hidden ${t?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${t?"bg-slate-800":"bg-slate-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"Recipient"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"Role"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"Amount"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"Method"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"Frequency"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-sm font-semibold ${t?"text-slate-300":"text-slate-700"}`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-slate-700":"divide-slate-200"}`,children:T.length>0?T.map(d=>{var f,u,C;return e.jsxs("tr",{className:`${t?"hover:bg-slate-800":"hover:bg-slate-50"} transition`,children:[e.jsx("td",{className:`px-6 py-4 ${t?"text-slate-300":"text-slate-900"}`,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.name}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:d.email})]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-slate-300":"text-slate-900"}`,children:d.role}),e.jsxs("td",{className:`px-6 py-4 font-semibold ${t?"text-slate-300":"text-slate-900"}`,children:["$",d.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:(f=r.find(i=>i.value===d.method))==null?void 0:f.icon}),e.jsx("span",{className:`text-sm ${t?"text-slate-300":"text-slate-900"}`,children:(u=r.find(i=>i.value===d.method))==null?void 0:u.label})]})}),e.jsx("td",{className:"px-6 py-4",children:d.automatic?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:[e.jsx(dt,{className:"w-3 h-3"}),(C=F.find(i=>i.value===d.frequency))==null?void 0:C.label]}):e.jsx("span",{className:`text-sm ${t?"text-slate-400":"text-slate-600"}`,children:"One-time"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${M(d.status)}`,children:[k(d.status),d.status.charAt(0).toUpperCase()+d.status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(d.id),className:`p-1 rounded ${d.automatic?"text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:"Toggle Automatic",children:d.automatic?e.jsx(is,{className:"w-4 h-4"}):e.jsx(ns,{className:"w-4 h-4"})}),d.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(d.id),className:"p-1 text-green-600 hover:bg-green-100 dark:hover:bg-green-900 rounded",title:"Approve",children:e.jsx(et,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(d.id),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded",title:"Reject",children:e.jsx(X,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>a(d.id),className:"p-1 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded",title:"Edit",children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(d.id),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded",title:"Delete",children:e.jsx(Ne,{className:"w-4 h-4"})})]})})]},d.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:`px-6 py-8 text-center ${t?"text-slate-400":"text-slate-600"}`,children:"No payments found"})})})]})})})]})})},zl=()=>e.jsxs(At,{children:[e.jsx(G,{element:e.jsx(Y,{children:e.jsx(us,{})}),path:"/"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ps,{})}),path:"/payments"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(bs,{})}),path:"/payments/history"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(js,{})}),path:"/payments/invoices"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ys,{})}),path:"/payments/refunds"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(vs,{})}),path:"/payments/settings"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ws,{})}),path:"/properties"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Ns,{})}),path:"/properties/verification"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx($s,{})}),path:"/properties/bnb"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Ss,{})}),path:"/properties/pending"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ks,{})}),path:"/properties/documents"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Os,{})}),path:"/verification/tenants"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Vs,{})}),path:"/verification/landlords"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Ks,{})}),path:"/verification/managers"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Ws,{})}),path:"/verification/pending"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Js,{})}),path:"/verification/reports"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(qs,{})}),path:"/support/tickets"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Hs,{})}),path:"/support/chat"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Gs,{})}),path:"/support/kb"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Ys,{})}),path:"/support/issues"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Qs,{})}),path:"/support/reports"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Xs,{})}),path:"/transportation/drivers"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ta,{})}),path:"/transportation/bookings"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(aa,{})}),path:"/transportation/tracking"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ra,{})}),path:"/transportation/fleet"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(na,{})}),path:"/transportation/earnings"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(da,{})}),path:"/communication/messages"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ca,{})}),path:"/communication/announcements"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(xa,{})}),path:"/communication/notifications"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ma,{})}),path:"/communication/templates"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ha,{})}),path:"/communication/logs"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(pa,{})}),path:"/security/permissions"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ba,{})}),path:"/security/audit"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(fa,{})}),path:"/security/data"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ja,{})}),path:"/security/compliance"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(ya,{})}),path:"/settings"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(va,{})}),path:"/sharing"}),e.jsx(G,{element:e.jsx(Y,{children:e.jsx(Na,{})}),path:"/pay-others"}),e.jsx(G,{path:"*",element:e.jsx(Dt,{to:"/company",replace:!0})})]});export{zl as default};
//# sourceMappingURL=CompanyRoutes-0ea80f8d.js.map
