import{j as e}from"./charts-2e8e60b5.js";import{r as n}from"./vendor-fb33f09a.js";import{a as v}from"./utils-78d57de0.js";import{u as G}from"./index-b6a99ef3.js";import{b as H}from"./router-9ce3d278.js";import"./maps-2dc382d1.js";function J(d){return e.jsx("div",{children:"Loading (stub)"})}function K(d){return e.jsx("div",{children:"Erroralert (stub)"})}const te=()=>{const d=H(),{user:O,token:b}=G(),[w,f]=n.useState([]),[y,A]=n.useState([]),[E,S]=n.useState(!0),[P,x]=n.useState(null),[o,L]=n.useState(""),[u,$]=n.useState("all"),[j,B]=n.useState("name"),[h,m]=n.useState(1),[N]=n.useState(10),[i,c]=n.useState([]),[Q,D]=n.useState(!1);n.useEffect(()=>{F()},[]);const F=async()=>{var t,s;try{S(!0),x(null);const r=await v.get("http://localhost:5000/api/properties",{headers:{Authorization:`Bearer ${b}`}});f(r.data.data||r.data)}catch(r){x(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to fetch properties"),console.error("Error fetching properties:",r)}finally{S(!1)}};n.useEffect(()=>{let t=w;o&&(t=t.filter(s=>{var r,a,l;return((r=s.name)==null?void 0:r.toLowerCase().includes(o.toLowerCase()))||((a=s.address)==null?void 0:a.toLowerCase().includes(o.toLowerCase()))||((l=s.code)==null?void 0:l.toLowerCase().includes(o.toLowerCase()))})),u!=="all"&&(t=t.filter(s=>s.status===u)),t=t.sort((s,r)=>{var a,l,k;switch(j){case"name":return(a=s.name)==null?void 0:a.localeCompare(r.name);case"price":return(s.price||0)-(r.price||0);case"date":return new Date(r.createdAt)-new Date(s.createdAt);case"units":return(((l=r.units)==null?void 0:l.length)||0)-(((k=s.units)==null?void 0:k.length)||0);default:return 0}}),A(t),m(1)},[w,o,u,j]);const p=Math.ceil(y.length/N),C=(h-1)*N,M=C+N,g=y.slice(C,M),z=t=>{t.target.checked?c(g.map(s=>s.id)):c([])},T=t=>{c(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},U=async t=>{var s,r;if(window.confirm("Are you sure you want to delete this property?"))try{await v.delete(`http://localhost:5000/api/properties/${t}`,{headers:{Authorization:`Bearer ${b}`}}),f(a=>a.filter(l=>l.id!==t)),c(a=>a.filter(l=>l!==t))}catch(a){x(((r=(s=a.response)==null?void 0:s.data)==null?void 0:r.message)||"Failed to delete property")}},V=async()=>{var t,s;if(window.confirm(`Delete ${i.length} properties?`))try{for(const r of i)await v.delete(`http://localhost:5000/api/properties/${r}`,{headers:{Authorization:`Bearer ${b}`}});f(r=>r.filter(a=>!i.includes(a.id))),c([]),D(!1)}catch(r){x(((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to delete properties")}},R=t=>{d(`/management/properties/${t}/edit`)},_=t=>{d(`/management/properties/${t}`)},q=()=>{d("/management/properties/new")};return E?e.jsx(J,{}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Properties"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage and view all properties"})]}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"+ Add Property"})]}),P&&e.jsx(K,{message:P}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search properties...",value:o,onChange:t=>L(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-transparent"}),e.jsxs("select",{value:u,onChange:t=>$(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]}),e.jsxs("select",{value:j,onChange:t=>B(t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"price",children:"Sort by Price"}),e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"units",children:"Sort by Units"})]}),e.jsxs("div",{className:"text-right text-sm text-gray-600 self-center",children:[y.length," properties found"]})]}),i.length>0&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg flex justify-between items-center",children:[e.jsxs("span",{className:"text-blue-900",children:[i.length," property(ies) selected"]}),e.jsx("button",{onClick:V,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Delete Selected"})]})]}),e.jsx("div",{className:"overflow-x-auto shadow-md rounded-lg",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",onChange:z,checked:i.length===g.length&&g.length>0})}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Units"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:g.map(t=>{var s;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(t.id),onChange:()=>T(t.id)})}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:t.address}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:((s=t.units)==null?void 0:s.length)||0}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.status==="active"?"bg-green-100 text-green-800":t.status==="maintenance"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status})}),e.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[e.jsx("button",{onClick:()=>_(t.id),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"View"}),e.jsx("button",{onClick:()=>R(t.id),className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200",children:"Edit"}),e.jsx("button",{onClick:()=>U(t.id),className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Delete"})]})]},t.id)})})]})}),p>1&&e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>m(t=>Math.max(1,t-1)),disabled:h===1,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50",children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:p},(t,s)=>s+1).map(t=>e.jsx("button",{onClick:()=>m(t),className:`px-3 py-2 rounded-lg ${h===t?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:t},t))}),e.jsx("button",{onClick:()=>m(t=>Math.min(p,t+1)),disabled:h===p,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50",children:"Next"})]})]})})};export{te as default};
//# sourceMappingURL=PropertyList-2b3b1649.js.map
