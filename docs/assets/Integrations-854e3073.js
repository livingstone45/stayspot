import{j as e}from"./charts-2e8e60b5.js";import{r as i}from"./vendor-fb33f09a.js";import{u as C}from"./useThemeMode-713d1096.js";import{u as k}from"./index-b6a99ef3.js";import{a as A}from"./utils-78d57de0.js";import{C as I}from"./circle-alert-73cb2b80.js";import{L as S}from"./loader-e267c9d1.js";import{C as E}from"./check-735eb75a.js";import{P}from"./plug-2c69b0bd.js";import{P as L}from"./plus-e2e8cc52.js";import"./router-9ce3d278.js";import"./maps-2dc382d1.js";import"./createLucideIcon-e378a771.js";const R={}.VITE_API_URL||"http://localhost:3000/api",d=A.create({baseURL:R,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(t=>{const a=localStorage.getItem("authToken");return a&&(t.headers.Authorization=`Bearer ${a}`),t});const z=async()=>{try{return(await d.get("/integration")).data}catch(t){throw console.error("Error fetching integrations:",t),t}},T=async t=>{try{return(await d.post(`/integration/${t}/connect`)).data}catch(a){throw console.error("Error connecting integration:",a),a}},U=async t=>{try{return(await d.post(`/integration/${t}/disconnect`)).data}catch(a){throw console.error("Error disconnecting integration:",a),a}},J=()=>{const{isDark:t}=C(),{user:a}=k(),[v,g]=i.useState([]),[p,h]=i.useState(!0),[b,m]=i.useState(null),[u,j]=i.useState(null),[x,y]=i.useState({connected:0,available:0,ready:0});i.useEffect(()=>{f()},[]);const f=async()=>{h(!0),m(null);try{const s=await z(),n=Array.isArray(s.data)?s.data:s;g(n),y({connected:n.filter(c=>c.connected).length,available:n.length,ready:n.filter(c=>!c.connected).length})}catch(s){m(s.message||"Failed to load integrations"),console.error("Error loading integrations:",s),g([{id:1,name:"Stripe Payments",description:"Accept rent payments via credit card",connected:!0},{id:2,name:"QuickBooks",description:"Sync financial data with accounting software",connected:!1},{id:3,name:"Slack Notifications",description:"Receive alerts via Slack",connected:!0},{id:4,name:"Google Calendar",description:"Sync events with Google Calendar",connected:!1},{id:5,name:"Zapier",description:"Automate workflows with Zapier",connected:!1}]),y({connected:2,available:5,ready:3})}finally{h(!1)}},$=async(s,n)=>{j(s);try{n?await U(s):await T(s),await f()}catch(c){m(c.message||"Failed to update integration"),console.error("Error toggling integration:",c)}finally{j(null)}},w=`${t?"bg-gray-900":"bg-gray-50"} p-6 min-h-screen`,o=`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border rounded-lg p-6`,N=`${t?"text-white":"text-gray-900"} text-3xl font-bold mb-2`,r=`${t?"text-gray-400":"text-gray-600"}`,l=`${t?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg`;return e.jsxs("div",{className:w,children:[e.jsxs("div",{className:`${o} mb-8`,children:[e.jsx("h1",{className:N,children:"Welcome back!"}),e.jsx("p",{className:r,children:"Manage your investment properties and track performance in real-time"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:l,children:[e.jsx("p",{className:`${r} text-sm`,children:"Active Properties"}),e.jsx("p",{className:`${t?"text-white":"text-gray-900"} text-2xl font-bold`,children:"0"})]}),e.jsxs("div",{className:l,children:[e.jsx("p",{className:`${r} text-sm`,children:"Total Units"}),e.jsx("p",{className:`${t?"text-white":"text-gray-900"} text-2xl font-bold`,children:"0"})]}),e.jsxs("div",{className:l,children:[e.jsx("p",{className:`${r} text-sm`,children:"Occupied Units"}),e.jsx("p",{className:`${t?"text-white":"text-gray-900"} text-2xl font-bold`,children:"0"})]}),e.jsxs("div",{className:l,children:[e.jsx("p",{className:`${r} text-sm`,children:"Vacancy Rate"}),e.jsx("p",{className:`${t?"text-white":"text-gray-900"} text-2xl font-bold`,children:"0%"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:N,children:["Welcome back, ",(a==null?void 0:a.firstName)||"User","!"]}),e.jsx("p",{className:r,children:"Manage your investment properties and track performance in real-time"})]}),b&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg border ${t?"bg-red-900 border-red-700 text-red-200":"bg-red-50 border-red-200 text-red-800"} flex gap-3`,children:[e.jsx(I,{size:20,className:"flex-shrink-0 mt-0.5"}),e.jsx("p",{children:b})]}),p&&e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(S,{className:"animate-spin mr-2",size:24}),e.jsx("p",{className:r,children:"Loading integrations..."})]}),!p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:o,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${r} text-sm font-medium mb-1`,children:"Connected Apps"}),e.jsx("p",{className:`${t?"text-green-400":"text-green-600"} text-2xl font-bold`,children:x.connected})]}),e.jsx(E,{className:`${t?"text-green-400":"text-green-600"}`,size:32})]})}),e.jsx("div",{className:o,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${r} text-sm font-medium mb-1`,children:"Available Apps"}),e.jsx("p",{className:`${t?"text-blue-400":"text-blue-600"} text-2xl font-bold`,children:x.available})]}),e.jsx(P,{className:`${t?"text-blue-400":"text-blue-600"}`,size:32})]})}),e.jsx("div",{className:o,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${r} text-sm font-medium mb-1`,children:"Ready to Connect"}),e.jsx("p",{className:`${t?"text-orange-400":"text-orange-600"} text-2xl font-bold`,children:x.ready})]}),e.jsx(L,{className:`${t?"text-orange-400":"text-orange-600"}`,size:32})]})})]}),e.jsxs("div",{className:o,children:[e.jsx("h2",{className:`${t?"text-white":"text-gray-900"} text-xl font-bold mb-6`,children:"Available Integrations"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(s=>e.jsxs("div",{className:`border rounded-lg p-4 ${t?"border-gray-700 bg-gray-700":"border-gray-200 bg-gray-50"} flex justify-between items-start`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`${t?"text-white":"text-gray-900"} font-semibold mb-1`,children:s.name}),e.jsx("p",{className:`${r} text-sm mb-3`,children:s.description}),s.connected?e.jsx("span",{className:`inline-block px-3 py-1 text-xs rounded font-medium ${t?"bg-green-900 text-green-200":"bg-green-100 text-green-800"}`,children:"âœ“ Connected"}):e.jsx("span",{className:`inline-block px-3 py-1 text-xs rounded font-medium ${t?"bg-gray-600 text-gray-300":"bg-gray-200 text-gray-700"}`,children:"Not Connected"})]}),e.jsx("button",{onClick:()=>$(s.id,s.connected),disabled:u===s.id,className:`ml-3 px-4 py-2 rounded-lg font-medium transition disabled:opacity-50 ${s.connected?t?"text-red-400 hover:bg-red-900":"text-red-600 hover:bg-red-100":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u===s.id?"Processing...":s.connected?"Disconnect":"Connect"})]},s.id))})]})]})};export{J as default};
//# sourceMappingURL=Integrations-854e3073.js.map
