import{j as e}from"./charts-9ec29004.js";import{r as a}from"./vendor-8b2b8b4f.js";import{u as z}from"./index-25e3517a.js";import{D as H}from"./download-ec6dcfaf.js";import{c as J}from"./createLucideIcon-44004120.js";import{S as G}from"./search-d5f06d09.js";import{R as K}from"./refresh-cw-8841d50f.js";import{F as Q}from"./funnel-e5567b45.js";import{C as W}from"./circle-check-big-f01bb21d.js";import{M as X}from"./mail-c4b252d1.js";import{P as Y}from"./phone-c01cfe62.js";import{B as Z}from"./triangle-alert-7d51363f.js";import{E as ee}from"./eye-b8068b5a.js";import{S as se}from"./square-pen-c3382cad.js";import{T as M}from"./trash-2-558d0f1b.js";import{E as te}from"./ellipsis-vertical-2e4d019a.js";import"./router-5c3dff30.js";import"./maps-f59a35be.js";import"../../node_modules/core-js/internals/globalThis-this";import"../../node_modules/core-js/internals/define-globalThis-property";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],P=J("user-plus",le),Se=()=>{z();const[c,E]=a.useState([]),[m,T]=a.useState([]),[F,k]=a.useState(!0),[d,R]=a.useState(""),[r,v]=a.useState({role:"all",status:"all",dateRange:"all"}),[n,g]=a.useState([]),[u,p]=a.useState(1),[ae,U]=a.useState(!1),[_,w]=a.useState(!1),[b,C]=a.useState(null),y=10,f=[{value:"system_admin",label:"System Admin",color:"bg-red-100 text-red-800"},{value:"company_admin",label:"Company Admin",color:"bg-blue-100 text-blue-800"},{value:"property_manager",label:"Property Manager",color:"bg-green-100 text-green-800"},{value:"landlord",label:"Landlord",color:"bg-purple-100 text-purple-800"},{value:"tenant",label:"Tenant",color:"bg-yellow-100 text-yellow-800"},{value:"maintenance",label:"Maintenance",color:"bg-indigo-100 text-indigo-800"},{value:"leasing_agent",label:"Leasing Agent",color:"bg-pink-100 text-pink-800"}];a.useEffect(()=>{A()},[]),a.useEffect(()=>{$()},[c,d,r]);const A=async()=>{k(!0);try{const s=await getUsers();E(s)}catch(s){console.error("Failed to load users:",s)}finally{k(!1)}},$=()=>{let s=[...c];d&&(s=s.filter(t=>{var o,x,i,l;return t.email.toLowerCase().includes(d.toLowerCase())||((o=t.firstName)==null?void 0:o.toLowerCase().includes(d.toLowerCase()))||((x=t.lastName)==null?void 0:x.toLowerCase().includes(d.toLowerCase()))||((l=(i=t.company)==null?void 0:i.name)==null?void 0:l.toLowerCase().includes(d.toLowerCase()))})),r.role!=="all"&&(s=s.filter(t=>t.role===r.role)),r.status!=="all"&&(s=s.filter(t=>t.status===r.status)),T(s),p(1)},B=s=>{n.includes(s)?g(n.filter(t=>t!==s)):g([...n,s])},V=()=>{n.length===h.length?g([]):g(h.map(s=>s.id))},q=async s=>{try{await deleteUser(s),A(),w(!1),C(null)}catch(t){console.error("Failed to delete user:",t)}},I=()=>{const s=n.length>0?c.filter(l=>n.includes(l.id)):c,t=[["Email","Name","Role","Company","Status","Last Login","Created At"],...s.map(l=>{var L,D;return[l.email,`${l.firstName} ${l.lastName}`,((L=f.find(O=>O.value===l.role))==null?void 0:L.label)||l.role,((D=l.company)==null?void 0:D.name)||"N/A",l.status,l.lastLogin||"Never",new Date(l.createdAt).toLocaleDateString()]})].map(l=>l.join(",")).join(`
`),o=new Blob([t],{type:"text/csv"}),x=window.URL.createObjectURL(o),i=document.createElement("a");i.href=x,i.download=`stayspot-users-${new Date().toISOString().split("T")[0]}.csv`,i.click()},S=s=>{},j=Math.ceil(m.length/y),N=(u-1)*y,h=m.slice(N,N+y);return F?e.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},s))})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage all user accounts across the StaySpot platform"})]}),e.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-3",children:[e.jsxs("button",{onClick:I,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs("button",{onClick:()=>U(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Users",value:c.length,color:"blue"},{label:"Active Today",value:c.filter(s=>s.status==="active").length,color:"green"},{label:"Pending Verification",value:c.filter(s=>s.status==="pending").length,color:"yellow"},{label:"Suspended",value:c.filter(s=>s.status==="suspended").length,color:"red"}].map((s,t)=>e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s.label}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.value}),e.jsx("div",{className:"mt-2 w-full h-1 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${s.color}-500`,style:{width:`${s.value/c.length*100}%`}})})]},t))}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0",children:[e.jsx("div",{className:"flex-1 max-w-lg",children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users by name, email, or company...",value:d,onChange:s=>R(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>v({role:"all",status:"all",dateRange:"all"}),className:"flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"Reset"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:r.role,onChange:s=>v({...r,role:s.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),f.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsxs("select",{value:r.status,onChange:s=>v({...r,status:s.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})]}),n.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-5 h-5 text-blue-600 mr-2"}),e.jsxs("span",{className:"font-medium text-blue-900",children:[n.length," user",n.length>1?"s":""," selected"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>S(),className:"px-3 py-1 text-sm bg-green-100 text-green-800 rounded-lg hover:bg-green-200",children:"Activate"}),e.jsx("button",{onClick:()=>S(),className:"px-3 py-1 text-sm bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200",children:"Deactivate"}),e.jsx("button",{onClick:()=>S(),className:"px-3 py-1 text-sm bg-red-100 text-red-800 rounded-lg hover:bg-red-200",children:"Delete"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:n.length===h.length&&h.length>0,onChange:V,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Company"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Activity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(s=>{var t,o,x,i;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:n.includes(s.id),onChange:()=>B(s.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsxs("span",{className:"font-semibold text-blue-600",children:[(t=s.firstName)==null?void 0:t.charAt(0),(o=s.lastName)==null?void 0:o.charAt(0)]})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(X,{className:"w-3 h-3 mr-1"}),s.email]}),s.phone&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),s.phone]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${((x=f.find(l=>l.value===s.role))==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((i=f.find(l=>l.value===s.role))==null?void 0:i.label)||s.role}),s.company&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),s.company.name]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"flex items-center",children:s.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-green-700",children:"Active"})]}):s.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-yellow-700",children:"Pending"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-red-700",children:"Suspended"})]})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Joined ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.lastLogin?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:new Date(s.lastLogin).toLocaleDateString()}),e.jsx("div",{className:"text-xs",children:new Date(s.lastLogin).toLocaleTimeString()})]}):"Never logged in"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{},className:"text-blue-600 hover:text-blue-900",title:"View",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{C(s),w(!0)},className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"w-4 h-4"})})]})})]},s.id)})})]})}),j>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:N+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(N+y,m.length)})," ","of ",e.jsx("span",{className:"font-medium",children:m.length})," users"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>p(s=>Math.max(s-1,1)),disabled:u===1,className:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(j)].map((s,t)=>e.jsx("button",{onClick:()=>p(t+1),className:`px-3 py-1 rounded-lg text-sm ${u===t+1?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:t+1},t)),e.jsx("button",{onClick:()=>p(s=>Math.min(s+1,j)),disabled:u===j,className:"px-3 py-1 border border-gray-300 rounded-lg text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Users,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:d||r.role!=="all"||r.status!=="all"?"Try adjusting your search or filters":"No users have been added yet"}),e.jsxs("button",{onClick:()=>U(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Add First User"]})]}),_&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx(M,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Delete User"}),e.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Are you sure you want to delete ",b.firstName," ",b.lastName,"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>{w(!1),C(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>q(b.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete User"})]})]})})]})})};export{Se as default};
//# sourceMappingURL=Users-988a4e89.js.map
